import{a5 as Q,a6 as W,a7 as X,h as w}from"./index.b315c1a0.js";import{J as Z}from"./joinUsFormTemplate.b64502d2.js";var B={},Y={},P={};P.__esModule=!0;var x=function(){function e(l){if(!l)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,l&&e.isGuid(l)&&(this.value=l)}return e.isGuid=function(l){var a=l.toString();return l&&(l instanceof e||e.validator.test(a))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(l){return new e(l)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(l){for(var a="",m=0;m<l;m++)a+=((1+Math.random())*65536|0).toString(16).substring(1);return a},e.prototype.equals=function(l){return e.isGuid(l)&&this.value===l.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();P.Guid=x;var G={},I={};Object.defineProperty(I,"__esModule",{value:!0});I.eState=I.CompositeFieldType=I.InfoSectionType=I.OptionFieldType=I.MonolingualFieldType=I.TextType=I.FieldType=void 0;var J;(function(e){e[e.ShortAnswer=0]="ShortAnswer",e[e.Paragraph=1]="Paragraph",e[e.RichText=2]="RichText",e[e.Date=3]="Date",e[e.DateTime=4]="DateTime",e[e.Decimal=5]="Decimal",e[e.Integer=6]="Integer",e[e.Email=7]="Email",e[e.Checkboxes=8]="Checkboxes",e[e.DataList=9]="DataList",e[e.RadioButtons=10]="RadioButtons",e[e.DropDown=11]="DropDown",e[e.InfoSection=12]="InfoSection",e[e.AttachmentField=13]="AttachmentField",e[e.CompositeField=14]="CompositeField",e[e.CheckboxGrid=15]="CheckboxGrid"})(J||(I.FieldType=J={}));var H;(function(e){e[e.ShortAnswer=0]="ShortAnswer",e[e.Paragraph=1]="Paragraph",e[e.RichText=2]="RichText",e[e.AttachmentField=13]="AttachmentField"})(H||(I.TextType=H={}));var R;(function(e){e[e.Date=3]="Date",e[e.DateTime=4]="DateTime",e[e.Decimal=5]="Decimal",e[e.Integer=6]="Integer",e[e.Email=7]="Email"})(R||(I.MonolingualFieldType=R={}));var k;(function(e){e[e.Checkboxes=8]="Checkboxes",e[e.CheckboxGrid=15]="CheckboxGrid",e[e.DataList=9]="DataList",e[e.RadioButtons=10]="RadioButtons",e[e.DropDown=11]="DropDown"})(k||(I.OptionFieldType=k={}));var N;(function(e){e[e.InfoSection=12]="InfoSection"})(N||(I.InfoSectionType=N={}));var $;(function(e){e[e.CompositeField=14]="CompositeField"})($||(I.CompositeFieldType=$={}));var L;(function(e){e.Draft="Draft",e.Active="Active",e.Archived="Archived",e.Inactive="Inactive",e.Deleted="Deleted"})(L||(I.eState=L={}));(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CompositeFieldType=e.FieldType=e.InfoSectionType=e.OptionFieldType=e.MonolingualFieldType=e.TextType=void 0;var l=I;Object.defineProperty(e,"TextType",{enumerable:!0,get:function(){return l.TextType}}),Object.defineProperty(e,"MonolingualFieldType",{enumerable:!0,get:function(){return l.MonolingualFieldType}}),Object.defineProperty(e,"OptionFieldType",{enumerable:!0,get:function(){return l.OptionFieldType}}),Object.defineProperty(e,"InfoSectionType",{enumerable:!0,get:function(){return l.InfoSectionType}}),Object.defineProperty(e,"FieldType",{enumerable:!0,get:function(){return l.FieldType}}),Object.defineProperty(e,"CompositeFieldType",{enumerable:!0,get:function(){return l.CompositeFieldType}})})(G);var E={},M={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getConcatenatedValues=e.cloneTextCollection=e.getTextValue=e.createGuid=e.createText=e.createTextCollection=void 0;const l=P,a=c=>{const p={id:l.Guid.create().toString(),values:[]};return(typeof c=="string"?[c]:c).forEach(h=>{p.values.push({id:l.Guid.create().toString(),lang:h,value:""})}),p};e.createTextCollection=a;const m=c=>({id:l.Guid.create().toString(),value:"",lang:c||"en"});e.createText=m;const S=()=>l.Guid.create().toString();e.createGuid=S;const V=(c,p,O)=>{var h,u;let o;return p?o=(h=c==null?void 0:c.values)===null||h===void 0?void 0:h.filter(s=>s.lang===p).map(s=>s.value):o=(u=c==null?void 0:c.values)===null||u===void 0?void 0:u.map(s=>s.value),O?o.join(O):o};e.getTextValue=V;const D=c=>{const p=JSON.parse(JSON.stringify(c));return p.id=(0,e.createGuid)(),p.values.forEach(O=>{O.id=(0,e.createGuid)()}),p};e.cloneTextCollection=D;const T=(c,p)=>{var O,h,u="",o=[];return c.multilingualTextValues&&((O=c.multilingualTextValues)===null||O===void 0?void 0:O.length)>0?c.multilingualTextValues.forEach(s=>{u+=(0,e.getTextValue)(s,null,p)}):c.monolingualTextValues&&((h=c.monolingualTextValues)===null||h===void 0?void 0:h.length)>0&&(c.monolingualTextValues.forEach(s=>{o.push(s.value)}),u=o==null?void 0:o.join(p)),u};e.getConcatenatedValues=T})(M);var _={},q;function ee(){if(q)return _;q=1,Object.defineProperty(_,"__esModule",{value:!0}),_.cloneOption=_.getOptionValues=_.getOptionText=_.createOption=void 0;const e=P,l=U();function a(D,T){return{id:e.Guid.create().toString(),isExtendedInput:!1,isExtendedInputRequired:!1,optionText:T||(0,l.createTextCollection)(D)}}_.createOption=a;const m=(D,T)=>S(D.optionText,T);_.getOptionText=m;function S(D,T){var c,p,O;return T?(p=(c=D==null?void 0:D.values)===null||c===void 0?void 0:c.filter(h=>h.lang===T).map(h=>h.value))===null||p===void 0?void 0:p.at(0):(O=D==null?void 0:D.values)===null||O===void 0?void 0:O.map(h=>h.value)}_.getOptionValues=S;const V=D=>{const T=JSON.parse(JSON.stringify(D));return T.id=e.Guid.create().toString(),T.optionText.id=e.Guid.create().toString(),T.optionText.values.forEach(c=>c.id=e.Guid.create().toString()),T};return _.cloneOption=V,_}var A={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getFieldDataFromFormData=e.isCompositeField=e.createMissingFieldData=e.createFormData=e.createCompositeFieldData=e.createFieldData=e.getFieldDescription=e.getFieldTitle=e.isTextInputField=e.isMonolingualTextInputField=e.isMultilingualTextInputField=e.isOptionField=void 0;const l=P,a=G,m=M,S=I,V=i=>Object.values(a.OptionFieldType).map(n=>n).includes(i.type);e.isOptionField=V;const D=i=>Object.values(a.TextType).map(n=>n).includes(i.type);e.isMultilingualTextInputField=D;const T=i=>Object.values(a.MonolingualFieldType).map(n=>n).includes(i.type);e.isMonolingualTextInputField=T;const c=i=>Object.values(a.MonolingualFieldType).map(n=>n).includes(i.type);e.isTextInputField=c;const p=(i,n)=>{const t=(0,m.getTextValue)(i.title,n);return(t==null?void 0:t.length)>0?t[0]:null};e.getFieldTitle=p;const O=(i,n)=>{const t=(0,m.getTextValue)(i.description,n);return(t==null?void 0:t.length)>0?t[0]:null};e.getFieldDescription=O;const h=(i,n)=>{var t;const d={id:l.Guid.create().toString(),fieldId:i.id,isValid:!0};if((0,e.isOptionField)(i))d.selectedOptionIds=[],i.allowCustomOptionValues&&(d.customOptionValues=[]),!((t=i.options)===null||t===void 0)&&t.find(r=>r.isExtendedInput)&&(d.extendedOptionValues=[]);else if((0,e.isMultilingualTextInputField)(i)){const r=typeof n=="string"?[n]:n;d.multilingualTextValues=[(0,m.createTextCollection)(r)]}else(0,e.isMonolingualTextInputField)(i)?d.monolingualTextValues=[(0,m.createText)(null)]:(0,e.isCompositeField)(i)&&(d.compositeFieldDataValues=[(0,e.createCompositeFieldData)(i,n)]);return d};e.createFieldData=h;const u=(i,n)=>{var t;const d={id:l.Guid.create().toString(),formId:i.id,fieldData:[]};return(t=i.fields)===null||t===void 0||t.forEach(r=>{n||(n="en");let v=(0,e.createFieldData)(r,n);d.fieldData.push(v)}),d};e.createCompositeFieldData=u;const o=(i,n)=>{var t;const d={id:l.Guid.EMPTY,formId:i.id,fieldData:[]};return(t=i.fields)===null||t===void 0||t.forEach(r=>{if(r.type!=S.FieldType.InfoSection){const v=(0,e.createFieldData)(r,n);d.fieldData.push(v)}}),d};e.createFormData=o;const s=(i,n,t)=>{var d;(d=i.fields)===null||d===void 0||d.forEach(r=>{if(r.type!=S.FieldType.InfoSection&&!n.fieldData.find(f=>f.fieldId==r.id)){const f=(0,e.createFieldData)(r,t);n.fieldData.push(f)}})};e.createMissingFieldData=s;const g=i=>Object.values(a.CompositeFieldType).map(n=>n).includes(i.type);e.isCompositeField=g;const F=(i,n)=>i==null?void 0:i.fieldData.find(t=>t.fieldId===n);e.getFieldDataFromFormData=F})(A);var z;function U(){return z||(z=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getFieldDataFromFormData=e.isCompositeField=e.createFormData=e.createFieldData=e.getFieldDescription=e.getFieldTitle=e.isTextInputField=e.isMonolingualTextInputField=e.isMultilingualTextInputField=e.isOptionField=e.cloneOption=e.getOptionText=e.createOption=e.getTextValue=e.createGuid=e.createText=e.cloneTextCollection=e.createTextCollection=void 0;var l=M;Object.defineProperty(e,"createTextCollection",{enumerable:!0,get:function(){return l.createTextCollection}}),Object.defineProperty(e,"cloneTextCollection",{enumerable:!0,get:function(){return l.cloneTextCollection}}),Object.defineProperty(e,"createText",{enumerable:!0,get:function(){return l.createText}}),Object.defineProperty(e,"createGuid",{enumerable:!0,get:function(){return l.createGuid}}),Object.defineProperty(e,"getTextValue",{enumerable:!0,get:function(){return l.getTextValue}});var a=ee();Object.defineProperty(e,"createOption",{enumerable:!0,get:function(){return a.createOption}}),Object.defineProperty(e,"getOptionText",{enumerable:!0,get:function(){return a.getOptionText}}),Object.defineProperty(e,"cloneOption",{enumerable:!0,get:function(){return a.cloneOption}});var m=A;Object.defineProperty(e,"isOptionField",{enumerable:!0,get:function(){return m.isOptionField}}),Object.defineProperty(e,"isMultilingualTextInputField",{enumerable:!0,get:function(){return m.isMultilingualTextInputField}}),Object.defineProperty(e,"isMonolingualTextInputField",{enumerable:!0,get:function(){return m.isMonolingualTextInputField}}),Object.defineProperty(e,"isTextInputField",{enumerable:!0,get:function(){return m.isTextInputField}}),Object.defineProperty(e,"getFieldTitle",{enumerable:!0,get:function(){return m.getFieldTitle}}),Object.defineProperty(e,"getFieldDescription",{enumerable:!0,get:function(){return m.getFieldDescription}}),Object.defineProperty(e,"createFieldData",{enumerable:!0,get:function(){return m.createFieldData}}),Object.defineProperty(e,"createFormData",{enumerable:!0,get:function(){return m.createFormData}}),Object.defineProperty(e,"isCompositeField",{enumerable:!0,get:function(){return m.isCompositeField}}),Object.defineProperty(e,"getFieldDataFromFormData",{enumerable:!0,get:function(){return m.getFieldDataFromFormData}})}(E)),E}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getOptionIds=e.getFieldType=e.toFormData=e.getSolrFieldValues=e.getSolrFieldNameSuffix=e.createSolrFieldData=e.toSolrDocJson=void 0;const l=P,a=G,m=U(),S=A,V=(u,o,s)=>{var g;const F={id:u.id,fields:[]};return(g=u.fieldData)===null||g===void 0||g.forEach(i=>{var n,t,d;const r=(n=s.fields)===null||n===void 0?void 0:n.find(f=>f.id===i.fieldId),v=r==null?void 0:r.type;if(v!=a.FieldType.InfoSection)if(v==a.FieldType.CompositeField){const f={name:`container_${i.fieldId}`,childDocuments:[]};F.fields.push(f),(t=i.compositeFieldDataValues)===null||t===void 0||t.forEach(y=>{const b=(0,e.toSolrDocJson)(y,"data",r);f.childDocuments.push(b)})}else{const f=(0,e.createSolrFieldData)(i,s,o,v);f.constructor.name==="Array"?f.forEach(y=>{var b;(b=F.fields)===null||b===void 0||b.push(y)}):(d=F.fields)===null||d===void 0||d.push(f)}}),F};e.toSolrDocJson=V;const D=(u,o,s,g)=>{const F=o.id,i=u.fieldId,n=(0,e.getSolrFieldNameSuffix)(g,u),t=`${s}_${F}_${i}_${n}`,d=(0,e.getSolrFieldValues)(u,o.fields);if(d.constructor.name==="Array"){const r=[];return d.forEach(v=>{const f={name:t,value:v};r.push(f)}),r}else return{name:t,value:d}};e.createSolrFieldData=D;const T=(u,o)=>{var s,g,F,i,n;let t="";return((s=o.monolingualTextValues)===null||s===void 0?void 0:s.length)>0?u==a.FieldType.Email?(console.log("email"),t="ts"):u==a.FieldType.Date||u==a.FieldType.DateTime?t="dts":u==a.FieldType.Integer?t="is":u==a.FieldType.Decimal&&(t="ds"):(((g=o.multilingualTextValues)===null||g===void 0?void 0:g.length)>0||((F=o.selectedOptionIds)===null||F===void 0?void 0:F.length)>0||((i=o.customOptionValues)===null||i===void 0?void 0:i.length)>0||((n=o.compositeFieldDataValues)===null||n===void 0?void 0:n.length)>0)&&(t="ts"),t};e.getSolrFieldNameSuffix=T;const c=(u,o)=>{var s,g,F,i,n,t,d,r;if(u.multilingualTextValues&&((s=u.multilingualTextValues)===null||s===void 0?void 0:s.length)>0){let v=[];return(g=u.multilingualTextValues)===null||g===void 0||g.forEach(f=>{var y;v=(y=f.values)===null||y===void 0?void 0:y.map(b=>b==null?void 0:b.value)}),v.length>0?v:[]}else if(u.monolingualTextValues&&((F=u.monolingualTextValues)===null||F===void 0?void 0:F.length)>0){let v="";return(i=u.monolingualTextValues)===null||i===void 0||i.forEach(f=>{v=f.value}),v.length>0?v:""}else if(u.selectedOptionIds&&((n=u.selectedOptionIds)===null||n===void 0?void 0:n.length)>0){const v=u.fieldId;let f=[];return(t=u.selectedOptionIds)===null||t===void 0||t.forEach(y=>{var b;const j=(b=o==null?void 0:o.filter(C=>C.id===v).find(C=>C.options))===null||b===void 0?void 0:b.options,K=j==null?void 0:j.filter(C=>C.id===y).find(C=>C.optionText);f.push((0,m.getOptionText)(K,"en"))}),f}else if(u.extendedOptionValues&&((d=u.extendedOptionValues)===null||d===void 0?void 0:d.length)>0)return(r=u.extendedOptionValues)===null||r===void 0?void 0:r.find(f=>f==null?void 0:f.values);return""};e.getSolrFieldValues=c;const p=(u,o,s="en")=>{var g;const F={id:u.id,formId:o.id,fieldData:[]};return(g=u.data)===null||g===void 0||g.forEach(i=>{const n=i.key.toString().split("_");let t={id:l.Guid.create().toString(),fieldId:n[2],isValid:!0};if(F.fieldData.push(t),n[0]=="data"||n[0]=="metadata")(0,e.getFieldType)(t.fieldId,o)===a.FieldType.ShortAnswer||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.Paragraph||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.RichText?(t.multilingualTextValues=[],i.value.map(d=>{var r;const v={id:l.Guid.create().toString(),values:[{id:l.Guid.create().toString(),lang:s,value:d}]};(r=t.multilingualTextValues)===null||r===void 0||r.push(v)})):(0,e.getFieldType)(t.fieldId,o)===a.FieldType.Email||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.Date||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.DateTime||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.Integer||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.Decimal?(t.monolingualTextValues=[],i.value.map(d=>{var r;const v={id:l.Guid.create().toString(),value:d,lang:s};(r=t.monolingualTextValues)===null||r===void 0||r.push(v)})):((0,e.getFieldType)(t.fieldId,o)===a.FieldType.CheckboxGrid||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.Checkboxes||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.DataList||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.DropDown||(0,e.getFieldType)(t.fieldId,o)===a.FieldType.RadioButtons)&&(t.selectedOptionIds=[],t.selectedOptionIds=(0,e.getOptionIds)(t.fieldId,i.value,o));else if(n[0]=="container"&&n[n.length-1]!="ss"){const d=n[1];t.fieldId=d;const r=o.fields.filter(f=>f.id==d)[0],v=i.value;t.compositeFieldDataValues=[],v.forEach(f=>{var y;const b=(0,e.toFormData)(f,r);b.fieldData.length>0&&((y=t.compositeFieldDataValues)===null||y===void 0||y.push(b))})}}),(0,S.createMissingFieldData)(o,F,s),F};e.toFormData=p;const O=(u,o)=>o.fields.find(g=>g.id===u).type;e.getFieldType=O;const h=(u,o,s)=>{var g;const F=(g=s.fields)===null||g===void 0?void 0:g.find(n=>n.id===u),i=[];return o.forEach(n=>{var t;const d=(t=F==null?void 0:F.options)===null||t===void 0?void 0:t.find(r=>r.optionText.values.find(v=>v.value===n));(d==null?void 0:d.id)!=null&&i.push(d==null?void 0:d.id)}),i};e.getOptionIds=h})(Y);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toFormData=e.toSolrDocJson=void 0;var l=Y;Object.defineProperty(e,"toSolrDocJson",{enumerable:!0,get:function(){return l.toSolrDocJson}}),Object.defineProperty(e,"toFormData",{enumerable:!0,get:function(){return l.toFormData}})})(B);Q();const ne=W("ProfileStore",{state:()=>({...X,activeProfile:null,userInfo:null,profileDeleteStatus:""}),getters:{isAdmin(){var e,l;return!!((l=(e=this.userInfo)==null?void 0:e.roles)!=null&&l.includes("SysAdmin"))},getFormData(){return B.toFormData(this.activeProfile,Z)}},actions:{setActiveProfile(e){if(e){const l=`${w.solrApiRoot}/api/SolrSearch/get-document/${e}`;fetch(l,{method:"GET",headers:{"Tenant-Id":`${w.tenantId}`}}).then(a=>a.json()).then(a=>{this.activeProfile=a}).catch(a=>{console.error("Solr get-document API error:",a)})}else this.activeProfile=null}}});export{ne as u};
