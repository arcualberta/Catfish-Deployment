var Applets=function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c={pageId:{required:!1,type:null},blockId:{required:!1,type:null},appletTitle:{required:!1,type:String},dataAttributes:{required:!1,type:null},queryParameters:{required:!1,type:null}},d=e.defineComponent({name:"Carousel",components:{},props:c,setup:function(e,t){console.log("Carousel setup ..."),console.log("props: ",e),console.log("context: ",t)},mounted:function(){console.log("Carousel mounted ...")}}),u=e.createElementVNode("h2",null,"Carousel",-1),m={class:"row"},f={class:"row"},p={class:"row"};function _(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}d.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",null,[u,e.createElementVNode("div",m,"Page Id: "+e.toDisplayString(t.pageId),1),e.createElementVNode("div",f,"Block Id: "+e.toDisplayString(t.blockId),1),e.createElementVNode("div",p,"Data Attributes "+e.toDisplayString(t.dataAttributes),1)])};const v="function"==typeof Proxy;class h{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const t in e.settings){const o=e.settings[t];n[t]=o.defaultValue}const o=`__vue-devtools-plugin-settings__${e.id}`;let r={...n};try{const e=localStorage.getItem(o),t=JSON.parse(e);Object.assign(r,t)}catch(e){}this.fallbacks={getSettings:()=>r,setSettings(e){try{localStorage.setItem(o,JSON.stringify(e))}catch(e){}r=e}},t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function g(e,t){const n=_(),o=_().__VUE_DEVTOOLS_GLOBAL_HOOK__,r=v&&e.enableEarlyProxy;if(!o||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&r){const a=r?new h(e,o):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}else o.emit("devtools-plugin:setup",e,t)}
/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var b="store";function E(t){return void 0===t&&(t=null),e.inject(null!==t?t:b)}function S(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function k(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function y(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;B(e,n,[],e._modules.root,!0),T(e,n,t)}function T(t,n,o){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,i={};S(a,(function(e,n){i[n]=function(e,t){return function(){return e(t)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return i[n]()},enumerable:!0})})),t._state=e.reactive({data:n}),t.strict&&function(t){e.watch((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),r&&o&&t._withCommit((function(){r.data=null}))}function B(e,t,n,o,r){var a=!n.length,i=e._modules.getNamespace(n);if(o.namespaced&&(e._modulesNamespaceMap[i],e._modulesNamespaceMap[i]=o),!a&&!r){var l=A(t,n.slice(0,-1)),s=n[n.length-1];e._withCommit((function(){l[s]=o.state}))}var c=o.context=function(e,t,n){var o=""===t,r={dispatch:o?e.dispatch:function(n,o,r){var a=C(n,o,r),i=a.payload,l=a.options,s=a.type;return l&&l.root||(s=t+s),e.dispatch(s,i)},commit:o?e.commit:function(n,o,r){var a=C(n,o,r),i=a.payload,l=a.options,s=a.type;l&&l.root||(s=t+s),e.commit(s,i,l)}};return Object.defineProperties(r,{getters:{get:o?function(){return e.getters}:function(){return I(e,t)}},state:{get:function(){return A(e.state,n)}}}),r}(e,i,n);o.forEachMutation((function(t,n){!function(e,t,n,o){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,o.state,t)}))}(e,i+n,t,c)})),o.forEachAction((function(t,n){var o=t.root?n:i+n,r=t.handler||t;!function(e,t,n,o){(e._actions[t]||(e._actions[t]=[])).push((function(t){var r,a=n.call(e,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:e.getters,rootState:e.state},t);return(r=a)&&"function"==typeof r.then||(a=Promise.resolve(a)),e._devtoolHook?a.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):a}))}(e,o,r,c)})),o.forEachGetter((function(t,n){!function(e,t,n,o){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(o.state,o.getters,e.state,e.getters)}}(e,i+n,t,c)})),o.forEachChild((function(o,a){B(e,t,n.concat(a),o,r)}))}function I(e,t){if(!e._makeLocalGettersCache[t]){var n={},o=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,o)===t){var a=r.slice(o);Object.defineProperty(n,a,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function A(e,t){return t.reduce((function(e,t){return e[t]}),e)}function C(e,t,n){var o;return null!==(o=e)&&"object"==typeof o&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var R="vuex:mutations",x="vuex:actions",M="vuex",w=0;function F(e,t){g({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:R,label:"Vuex Mutations",color:N}),n.addTimelineLayer({id:x,label:"Vuex Actions",color:N}),n.addInspector({id:M,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===M)if(n.filter){var o=[];L(o,t._modules.root,n.filter,""),n.rootNodes=o}else n.rootNodes=[O(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===M){var o=n.nodeId;I(t,o),n.state=function(e,t,n){t="root"===n?t:t[n];var o=Object.keys(t),r={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(o.length){var a=function(e){var t={};return Object.keys(e).forEach((function(n){var o=n.split("/");if(o.length>1){var r=t,a=o.pop();o.forEach((function(e){r[e]||(r[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),r=r[e]._custom.value})),r[a]=P((function(){return e[n]}))}else t[n]=P((function(){return e[n]}))})),t}(t);r.getters=Object.keys(a).map((function(e){return{key:e.endsWith("/")?V(e):e,editable:!1,value:P((function(){return a[e]}))}}))}return r}((r=t._modules,(i=(a=o).split("/").filter((function(e){return e}))).reduce((function(e,t,n){var o=e[t];if(!o)throw new Error('Missing module "'+t+'" for path "'+a+'".');return n===i.length-1?o:o._children}),"root"===a?r:r.root._children)),"root"===o?t.getters:t._makeLocalGettersCache,o)}var r,a,i})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===M){var o=n.nodeId,r=n.path;"root"!==o&&(r=o.split("/").filter(Boolean).concat(r)),t._withCommit((function(){n.set(t._state.data,r,n.state.value)}))}})),t.subscribe((function(e,t){var o={};e.payload&&(o.payload=e.payload),o.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(M),n.sendInspectorState(M),n.addTimelineEvent({layerId:R,event:{time:Date.now(),title:e.type,data:o}})})),t.subscribeAction({before:function(e,t){var o={};e.payload&&(o.payload=e.payload),e._id=w++,e._time=Date.now(),o.state=t,n.addTimelineEvent({layerId:x,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:o}})},after:function(e,t){var o={},r=Date.now()-e._time;o.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},e.payload&&(o.payload=e.payload),o.state=t,n.addTimelineEvent({layerId:x,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:o}})}})}))}var N=8702998,D={label:"namespaced",textColor:16777215,backgroundColor:6710886};function V(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function O(e,t){return{id:t||"root",label:V(t),tags:e.namespaced?[D]:[],children:Object.keys(e._children).map((function(n){return O(e._children[n],t+n+"/")}))}}function L(e,t,n,o){o.includes(n)&&e.push({id:o||"root",label:o.endsWith("/")?o.slice(0,o.length-1):o||"Root",tags:t.namespaced?[D]:[]}),Object.keys(t._children).forEach((function(r){L(e,t._children[r],n,o+r+"/")}))}function P(e){try{return e()}catch(e){return e}}var H=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},U={namespaced:{configurable:!0}};U.namespaced.get=function(){return!!this._rawModule.namespaced},H.prototype.addChild=function(e,t){this._children[e]=t},H.prototype.removeChild=function(e){delete this._children[e]},H.prototype.getChild=function(e){return this._children[e]},H.prototype.hasChild=function(e){return e in this._children},H.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},H.prototype.forEachChild=function(e){S(this._children,e)},H.prototype.forEachGetter=function(e){this._rawModule.getters&&S(this._rawModule.getters,e)},H.prototype.forEachAction=function(e){this._rawModule.actions&&S(this._rawModule.actions,e)},H.prototype.forEachMutation=function(e){this._rawModule.mutations&&S(this._rawModule.mutations,e)},Object.defineProperties(H.prototype,U);var q=function(e){this.register([],e,!1)};function $(e,t,n){if(t.update(n),n.modules)for(var o in n.modules){if(!t.getChild(o))return;$(e.concat(o),t.getChild(o),n.modules[o])}}q.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},q.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},q.prototype.update=function(e){$([],this.root,e)},q.prototype.register=function(e,t,n){var o=this;void 0===n&&(n=!0);var r=new H(t,n);0===e.length?this.root=r:this.get(e.slice(0,-1)).addChild(e[e.length-1],r);t.modules&&S(t.modules,(function(t,r){o.register(e.concat(r),t,n)}))},q.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],o=t.getChild(n);o&&o.runtime&&t.removeChild(n)},q.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var j=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var o=e.strict;void 0===o&&(o=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new q(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=r;var a=this,i=this.dispatch,l=this.commit;this.dispatch=function(e,t){return i.call(a,e,t)},this.commit=function(e,t,n){return l.call(a,e,t,n)},this.strict=o;var s=this._modules.root.state;B(this,s,[],this._modules.root),T(this,s),n.forEach((function(e){return e(t)}))},Y={state:{configurable:!0}};j.prototype.install=function(e,t){e.provide(t||b,this),e.config.globalProperties.$store=this,(void 0!==this._devtools?this._devtools:__VUE_PROD_DEVTOOLS__)&&F(e,this)},Y.state.get=function(){return this._state.data},Y.state.set=function(e){},j.prototype.commit=function(e,t,n){var o=this,r=C(e,t,n),a=r.type,i=r.payload,l={type:a,payload:i},s=this._mutations[a];s&&(this._withCommit((function(){s.forEach((function(e){e(i)}))})),this._subscribers.slice().forEach((function(e){return e(l,o.state)})))},j.prototype.dispatch=function(e,t){var n=this,o=C(e,t),r=o.type,a=o.payload,i={type:r,payload:a},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(i,n.state)}))}catch(e){}var s=l.length>1?Promise.all(l.map((function(e){return e(a)}))):l[0](a);return new Promise((function(e,t){s.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(i,n.state)}))}catch(e){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(i,n.state,e)}))}catch(e){}t(e)}))}))}},j.prototype.subscribe=function(e,t){return k(e,this._subscribers,t)},j.prototype.subscribeAction=function(e,t){return k("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},j.prototype.watch=function(t,n,o){var r=this;return e.watch((function(){return t(r.state,r.getters)}),n,Object.assign({},o))},j.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},j.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),B(this,this.state,e,this._modules.get(e),n.preserveState),T(this,this.state)},j.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete A(t.state,e.slice(0,-1))[e[e.length-1]]})),y(this)},j.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},j.prototype.hotUpdate=function(e){this._modules.update(e),y(this,!0)},j.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(j.prototype,Y);var G,X={id:null,item:null,siteUrl:null};!function(e){e.Home="Home",e.List="List",e.Details="Details"}(G||(G={}));var z,K,W=n({keywordQueryModel:null,searchResult:null,offset:0,max:25,pageId:null,blockId:null,freeSearchText:null,activePage:G.Home,popupVisibility:!1},X);!function(e){e.SET_ID="SET_ID",e.SET_ITEM="SET_ITEM",e.CHANGE_STATE="CHANGE_STATE",e.SET_SITE_URL="SET_SITE_URL"}(K||(K={}));var Q,Z,J=(i(z={},K.SET_ID,(function(e,t){e.id=t})),i(z,K.SET_ITEM,(function(e,t){e.item=t,t&&(e.id=t.id)})),i(z,K.CHANGE_STATE,(function(e,t){console.log(JSON.stringify(e)),console.log(JSON.stringify(t))})),i(z,K.SET_SITE_URL,(function(e,t){e.siteUrl=t})),z);!function(e){e.SET_SOURCE="SET_SOURCE",e.SET_KEYWORDS="SET_KEYWORDS",e.SET_RESULTS="SET_RESULTS",e.SET_OFFSET="SET_OFFSET",e.SET_PAGE_SIZE="SET_PAGE_SIZE",e.SET_FREE_TEXT_SEARCH="SET_FREE_TEXT_SEARCH",e.SET_ACTIVE_PAGE="SET_ACTIVE_PAGE",e.TOGGLE_KEYWORD="TOGGLE_KEYWORD",e.CLEAR_KEYWORD_SELECTIONS="CLEAR_KEYWORD_SELECTIONS",e.SELECT_KEYWORD="SELECT_KEYWORD",e.CLEAR_KEYWORD="CLEAR_KEYWORD",e.SET_POPUP_VISIBILITY="SET_POPUP_VISIBILITY"}(Z||(Z={}));var ee,te,ne=n(n({},J),{},(i(Q={},Z.SET_SOURCE,(function(e,t){e.pageId=t.pageId,e.blockId=t.blockId})),i(Q,Z.SET_KEYWORDS,(function(e,t){console.log("SET_KEYWORDS Payload: ",t),e.keywordQueryModel=t})),i(Q,Z.SET_RESULTS,(function(e,t){e.searchResult=t,e.offset=t.first-1})),i(Q,Z.SET_OFFSET,(function(e,t){e.offset=t})),i(Q,Z.SET_PAGE_SIZE,(function(e,t){e.max=t})),i(Q,Z.SET_FREE_TEXT_SEARCH,(function(e,t){e.freeSearchText=t})),i(Q,Z.SET_ACTIVE_PAGE,(function(e,t){e.activePage=t})),i(Q,Z.TOGGLE_KEYWORD,(function(e,t){e.keywordQueryModel&&(e.keywordQueryModel.containers[t.containerIndex].fields[t.fieldIndex].selected[t.valueIndex]=!e.keywordQueryModel.containers[t.containerIndex].fields[t.fieldIndex].selected[t.valueIndex])})),i(Q,Z.SELECT_KEYWORD,(function(e,t){e.keywordQueryModel&&(e.keywordQueryModel.containers[t.containerIndex].fields[t.fieldIndex].selected[t.valueIndex]=!0)})),i(Q,Z.CLEAR_KEYWORD,(function(e,t){e.keywordQueryModel&&(e.keywordQueryModel.containers[t.containerIndex].fields[t.fieldIndex].selected[t.valueIndex]=!1)})),i(Q,Z.CLEAR_KEYWORD_SELECTIONS,(function(e){var t;null===(t=e.keywordQueryModel)||void 0===t||t.containers.forEach((function(e){return e.fields.forEach((function(e){return e.selected=new Array(e.values.length).fill(!1)}))}))})),i(Q,Z.SET_POPUP_VISIBILITY,(function(e,t){e.popupVisibility=t})),Q));!function(e){e.LOAD_ITEM="LOAD_ITEM",e.CHANGE_STATE="CHANGE_STATE"}(te||(te={}));var oe,re,ae=(i(ee={},te.LOAD_ITEM,(function(e){var t=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/".concat(e.state.id);console.log("Item Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(K.SET_ITEM,t)}))})),i(ee,te.CHANGE_STATE,(function(e,t){console.log(JSON.stringify(e.state));var n=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/deleteItem/".concat(t);console.log("Item Load API: ",n),fetch(n,{method:"post"}).then((function(e){switch(console.log(e.status),e.status){case 200:window.location.href="/";break;case 401:alert("Authorization failed.");break;case 404:alert("Item not found.");break;case 500:alert("Internal server error occurred.");break;default:alert("Unknown error occurred.")}})).catch((function(e){alert("Unknown error occurred."),console.log(e)}))})),ee);!function(e){e.INIT_FILTER="INIT_FILTER",e.FILTER_BY_KEYWORDS="FILTER_BY_KEYWORDS",e.NEXT_PAGE="NEXT_PAGE",e.PREVIOUS_PAGE="PREVIOUS_PAGE",e.FRESH_SEARCH="FRESH_SEARCH",e.SAVE_KEYWORDS="SAVE_KEYWORDS",e.SEARCH_FREE_TEXT="SEARCH_FREE_TEXT",e.SET_SEARCH_TEXT="SET_SEARCH_TEXT",e.LOAD_ITEM="LOAD_ITEM"}(re||(re={}));var ie=n(n({},ae),{},(i(oe={},re.INIT_FILTER,(function(e){var t=window.location.origin+"/applets/api/keywordsearch/keywords/page/".concat(e.state.pageId,"/block/").concat(e.state.blockId);console.log("Keyword Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Z.SET_KEYWORDS,t)}))})),i(oe,re.FILTER_BY_KEYWORDS,(function(e){if(e.state.blockId){var t={keywords:e.state.keywordQueryModel,offset:e.state.offset,max:e.state.max};localStorage.setItem(e.getters.searchParamStorageKey,JSON.stringify(t))}var n=window.location.origin+"/applets/api/keywordsearch/items/",o=new FormData;e.state.pageId&&o.append("pageId",e.state.pageId.toString()),e.state.blockId&&o.append("blockId",e.state.blockId.toString()),o.append("offset",e.state.offset.toString()),o.append("max",e.state.max.toString()),o.append("queryParams",JSON.stringify(e.state.keywordQueryModel));var r=e.state.freeSearchText?e.state.freeSearchText:"";o.append("searchText",r),fetch(n,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(t){e.commit(Z.SET_RESULTS,t)})).catch((function(e){console.error("Item Load API Error:",e)}))})),i(oe,re.NEXT_PAGE,(function(e){e.commit(Z.SET_OFFSET,e.state.offset+e.state.max),e.dispatch(re.FILTER_BY_KEYWORDS)})),i(oe,re.PREVIOUS_PAGE,(function(e){var t=Math.max(e.state.offset-e.state.max,0);e.commit(Z.SET_OFFSET,t),e.dispatch(re.FILTER_BY_KEYWORDS)})),i(oe,re.FRESH_SEARCH,(function(e,t){e.commit(Z.SET_OFFSET,0),t&&e.commit(Z.SET_PAGE_SIZE,t),e.dispatch(re.FILTER_BY_KEYWORDS)})),i(oe,re.SAVE_KEYWORDS,(function(e,t){e.commit(Z.SET_KEYWORDS,t)})),i(oe,re.SET_SEARCH_TEXT,(function(e,t){e.commit(Z.SET_FREE_TEXT_SEARCH,t)})),oe)),le={searchParamStorageKey:function(e){var t;return(null===(t=e.blockId)||void 0===t?void 0:t.toString())+"SearchParams"},isKeywordSelected:function(e){return function(t,n,o){var r;return null===(r=e.keywordQueryModel)||void 0===r?void 0:r.containers[t].fields[n].selected[o]}},getItem:function(e){return function(t){var n;return console.log("inside getter getitem: "+t),null===(n=e.searchResult)||void 0===n?void 0:n.items.filter((function(e){return e.id===t}))}}},se=e.defineComponent({name:"KeywordFilter",setup:function(){var t=E();return{runFreshSearch:function(){return t.dispatch(re.FRESH_SEARCH)},keywordQueryModel:e.computed((function(){return t.state.keywordQueryModel}))}}}),ce={key:0},de={key:0,class:"font-weight-bold"},ue=["value","onUpdate:modelValue"],me={class:"ml-1"};se.render=function(t,n,o,r,a,i){var l;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.keywordQueryModel)||void 0===l?void 0:l.containers,(function(o,r){var a,i;return e.openBlock(),e.createElementBlock("div",{key:o},[(null===(a=t.keywordQueryModel)||void 0===a?void 0:a.containers.length)>1&&(null==o||null===(i=o.name)||void 0===i?void 0:i.length)>0?(e.openBlock(),e.createElementBlock("div",ce,e.toDisplayString(o.name),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.fields,(function(o,a){return e.openBlock(),e.createElementBlock("div",{key:o,class:"mb-3"},[o.name.length>0?(e.openBlock(),e.createElementBlock("div",de,e.toDisplayString(o.name),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.values,(function(o,i){return e.openBlock(),e.createElementBlock("div",{key:o},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:o,"onUpdate:modelValue":function(e){return t.keywordQueryModel.containers[r].fields[a].selected[i]=e},onChange:n[0]||(n[0]=function(){return t.runFreshSearch&&t.runFreshSearch.apply(t,arguments)})},null,40,ue),[[e.vModelCheckbox,t.keywordQueryModel.containers[r].fields[a].selected[i]]]),e.createElementVNode("label",me,e.toDisplayString(o),1)])})),128))])})),128))])})),128)};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function fe(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var pe=fe((function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,o="millisecond",r="second",a="minute",i="hour",l="day",s="week",c="month",d="quarter",u="year",m="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,n){var o=String(e);return!o||o.length>=t?e:""+Array(t+1-o.length).join(n)+e},g={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),o=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+h(o,2,"0")+":"+h(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var o=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(o,c),a=n-r<0,i=t.clone().add(o+(a?-1:1),c);return+(-(o+(n-r)/(a?r-i:i-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:s,d:l,D:m,h:i,m:a,s:r,ms:o,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",E={};E[b]=v;var S=function(e){return e instanceof B},k=function(e,t,n){var o;if(!e)return b;if("string"==typeof e)E[e]&&(o=e),t&&(E[e]=t,o=e);else{var r=e.name;E[r]=e,o=r}return!n&&o&&(b=o),o||!n&&b},y=function(e,t){if(S(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new B(n)},T=g;T.l=k,T.i=S,T.w=function(e,t){return y(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var B=function(){function v(e){this.$L=k(e.locale,null,!0),this.parse(e)}var h=v.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var o=t.match(p);if(o){var r=o[2]-1||0,a=(o[7]||"0").substring(0,3);return n?new Date(Date.UTC(o[1],r,o[3]||1,o[4]||0,o[5]||0,o[6]||0,a)):new Date(o[1],r,o[3]||1,o[4]||0,o[5]||0,o[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return T},h.isValid=function(){return!(this.$d.toString()===f)},h.isSame=function(e,t){var n=y(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return y(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<y(e)},h.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,t){var n=this,o=!!T.u(t)||t,d=T.p(e),f=function(e,t){var r=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return o?r:r.endOf(l)},p=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},_=this.$W,v=this.$M,h=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case u:return o?f(1,0):f(31,11);case c:return o?f(1,v):f(0,v+1);case s:var b=this.$locale().weekStart||0,E=(_<b?_+7:_)-b;return f(o?h-E:h+(6-E),v);case l:case m:return p(g+"Hours",0);case i:return p(g+"Minutes",1);case a:return p(g+"Seconds",2);case r:return p(g+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(e,t){var n,s=T.p(e),d="set"+(this.$u?"UTC":""),f=(n={},n[l]=d+"Date",n[m]=d+"Date",n[c]=d+"Month",n[u]=d+"FullYear",n[i]=d+"Hours",n[a]=d+"Minutes",n[r]=d+"Seconds",n[o]=d+"Milliseconds",n)[s],p=s===l?this.$D+(t-this.$W):t;if(s===c||s===u){var _=this.clone().set(m,1);_.$d[f](p),_.init(),this.$d=_.set(m,Math.min(this.$D,_.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[T.p(e)]()},h.add=function(o,d){var m,f=this;o=Number(o);var p=T.p(d),_=function(e){var t=y(f);return T.w(t.date(t.date()+Math.round(e*o)),f)};if(p===c)return this.set(c,this.$M+o);if(p===u)return this.set(u,this.$y+o);if(p===l)return _(1);if(p===s)return _(7);var v=(m={},m[a]=t,m[i]=n,m[r]=e,m)[p]||1,h=this.$d.getTime()+o*v;return T.w(h,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var o=e||"YYYY-MM-DDTHH:mm:ssZ",r=T.z(this),a=this.$H,i=this.$m,l=this.$M,s=n.weekdays,c=n.months,d=function(e,n,r,a){return e&&(e[n]||e(t,o))||r[n].substr(0,a)},u=function(e){return T.s(a%12||12,e,"0")},m=n.meridiem||function(e,t,n){var o=e<12?"AM":"PM";return n?o.toLowerCase():o},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:T.s(l+1,2,"0"),MMM:d(n.monthsShort,l,c,3),MMMM:d(c,l),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,s,2),ddd:d(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:T.s(a,2,"0"),h:u(1),hh:u(2),a:m(a,i,!0),A:m(a,i,!1),m:String(i),mm:T.s(i,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:r};return o.replace(_,(function(e,t){return t||p[e]||r.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(o,m,f){var p,_=T.p(m),v=y(o),h=(v.utcOffset()-this.utcOffset())*t,g=this-v,b=T.m(this,v);return b=(p={},p[u]=b/12,p[c]=b,p[d]=b/3,p[s]=(g-h)/6048e5,p[l]=(g-h)/864e5,p[i]=g/n,p[a]=g/t,p[r]=g/e,p)[_]||g,f?b:T.a(b)},h.daysInMonth=function(){return this.endOf(c).$D},h.$locale=function(){return E[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),o=k(e,t,!0);return o&&(n.$L=o),n},h.clone=function(){return T.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},v}(),I=B.prototype;return y.prototype=I,[["$ms",o],["$s",r],["$m",a],["$H",i],["$W",l],["$M",c],["$y",u],["$D",m]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),y.extend=function(e,t){return e.$i||(e(t,B,y),e.$i=!0),y},y.locale=k,y.isDayjs=S,y.unix=function(e){return y(1e3*e)},y.en=E[b],y.Ls=E,y.p={},y}()})),_e=pe,ve=e.defineComponent({name:"ItemList",props:{},setup:function(){var t=E(),n=e.ref(25);return{items:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.items})),freshSearch:function(e){return t.dispatch(re.FRESH_SEARCH,e)},nextPage:function(){return t.dispatch(re.NEXT_PAGE)},previousPage:function(){return t.dispatch(re.PREVIOUS_PAGE)},selectedPageSize:n,count:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.count})),first:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.first})),last:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.last}))}},methods:{formatDate:function(e){return _e(e).format("MMM DD, YYYY")}}}),he={class:"itemList"},ge={key:0},be={key:0},Ee={key:1},Se=[e.createElementVNode("option",null,"25",-1),e.createElementVNode("option",null,"50",-1),e.createElementVNode("option",null,"100",-1)],ke={key:1},ye={class:"item"},Te={class:"item-title"},Be=["href"],Ie={key:1},Ae={class:"item-date"},Ce={class:"item-subtitle"},Re={class:"categories"},xe={class:"badge rounded-pill bg-dark text-white m-1"},Me={class:"content"};ve.render=function(t,n,o,r,a,i){var l;return e.openBlock(),e.createElementBlock("div",he,[(null===(l=t.items)||void 0===l?void 0:l.length)>0?(e.openBlock(),e.createElementBlock("div",ge,[t.first>1?(e.openBlock(),e.createElementBlock("span",be,[e.createElementVNode("i",{class:"fas fa-angle-double-left",onClick:n[0]||(n[0]=function(){return t.previousPage&&t.previousPage.apply(t,arguments)})})])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(t.first)+"-"+e.toDisplayString(t.last)+" of "+e.toDisplayString(t.count)+" ",1),t.count>t.last?(e.openBlock(),e.createElementBlock("span",Ee,[e.createElementVNode("i",{class:"fas fa-angle-double-right",onClick:n[1]||(n[1]=function(){return t.nextPage&&t.nextPage.apply(t,arguments)})})])):e.createCommentVNode("",!0),e.createElementVNode("span",null,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":n[2]||(n[2]=function(e){return t.selectedPageSize=e}),class:"pull-right",onChange:n[3]||(n[3]=function(e){return t.freshSearch(Number(t.selectedPageSize))})},Se,544),[[e.vModelSelect,t.selectedPageSize]])])])):(e.openBlock(),e.createElementBlock("div",ke,"No results found.")),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(function(n){var o;return e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createElementVNode("div",ye,[e.createElementVNode("h3",Te,[(null===(o=n.detailedViewUrl)||void 0===o?void 0:o.length)>0?(e.openBlock(),e.createElementBlock("a",{key:0,href:n.detailedViewUrl},e.toDisplayString(n.title),9,Be)):(e.openBlock(),e.createElementBlock("span",Ie,e.toDisplayString(n.title),1))]),e.createElementVNode("div",Ae,e.toDisplayString(t.formatDate(n.date)),1),e.createElementVNode("h5",Ce,e.toDisplayString(n.subtitle),1),e.createElementVNode("div",Re,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.categories,(function(t){return e.openBlock(),e.createElementBlock("span",xe,e.toDisplayString(t),1)})),256))]),e.createElementVNode("div",Me,e.toDisplayString(n.content),1)])])})),128))])};var we=e.defineComponent({name:"ListView",components:{KeywordFilter:se,ItemList:ve}}),Fe={class:"col-md-4 text-left"},Ne={class:"col-md-8"};we.render=function(t,n,o,r,a,i){var l=e.resolveComponent("KeywordFilter"),s=e.resolveComponent("ItemList");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Fe,[e.createVNode(l)]),e.createElementVNode("div",Ne,[e.createVNode(s)])],64)};var De=e.defineComponent({name:"FreeTextSearch",components:{},props:{},setup:function(){var t=E();return{store:t,freeTextSearch:e.computed((function(){return t.state.freeSearchText})),results:e.computed((function(){return t.state.searchResult}))}},storeConfig:{state:W,actions:ie,mutations:ne,getters:le},methods:{onBlur:function(e){e.target.value.length>0&&this.store.dispatch(re.SET_SEARCH_TEXT,e.target.value)},executeSearch:function(){this.store.dispatch(re.FILTER_BY_KEYWORDS)}}}),Ve={class:"input-group dir-text-search"};De.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",Ve,[e.createElementVNode("input",{type:"text",class:"form-control rounded",placeholder:"searchText","aria-label":"Search","aria-describedby":"search-addon",onBlur:n[0]||(n[0]=function(e){return t.onBlur(e)})},null,32),e.createElementVNode("button",{type:"button",class:"btn btn-outline-primary",onClick:n[1]||(n[1]=function(){return t.executeSearch&&t.executeSearch.apply(t,arguments)})},"search")])};var Oe=e.defineComponent({name:"KeywordPanel",props:n({hexColorList:{type:null,required:!1},runAction:{type:null,required:!1},className:{type:null,required:!1}},c),setup:function(t){var n=E();return e.onMounted((function(){var e=Array.from(document.getElementsByClassName("dir-keyword-button")),n=t.hexColorList?t.hexColorList.length:0,o=0;e.forEach((function(e){if(null!==t.hexColorList){var r=t.hexColorList?t.hexColorList[o]:"";e.setAttribute("style","background-color: "+r),o=++o<=n-1?o:0}else{var a="hsla("+~~(360*Math.random())+",70%,80%,1)";e.setAttribute("style","background-color: "+a)}}))})),{filterByKeyword:function(e,t,o){n.commit(Z.CLEAR_KEYWORD_SELECTIONS),n.commit(Z.SELECT_KEYWORD,{containerIndex:e,fieldIndex:t,valueIndex:o}),n.commit(Z.SET_ACTIVE_PAGE,G.List)},keywordQueryModel:e.computed((function(){return n.state.keywordQueryModel})),addKeyword:function(e,t,o){n.getters.isKeywordSelected(e,t,o)||(n.commit(Z.SELECT_KEYWORD,{containerIndex:e,fieldIndex:t,valueIndex:o}),n.dispatch(re.FRESH_SEARCH))},className:t.className}}}),Le=["onClick"],Pe=["onClick"];function He(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}He("\n.keywordContainer[data-v-92d1c55a] {\r\n        overflow-x: scroll;\r\n        overflow-y: visible;\r\n        white-space: nowrap;\r\n        position: relative;\r\n        display: inline-block;\r\n        height: 150px;\r\n        width: 100%;\r\n        scroll-behavior: smooth;\r\n        align-content: center;\n}\n.dir-keyword[data-v-92d1c55a] {\r\n        display: inline-block;\r\n        margin-top: 15px;\r\n        margin-right: 5px;\n}\n.dir-keyword-button[data-v-92d1c55a] {\r\n        position: relative;\r\n        color: Black;\r\n        font-size: 0.80em;\r\n        text-align: center;\r\n        border-radius: 60px;\r\n        padding-top: 30px;\r\n        padding-bottom: 30px;\r\n        padding-left: 10px;\r\n        padding-right: 10px;\r\n        max-width: 150px;\r\n        white-space: normal;\n}\n.dir-keyword-button[data-v-92d1c55a]:focus {\r\n            background-color: yellow;\n}\n.dir-keyword-button[data-v-92d1c55a]:hover {\r\n            transform: scale(1.2);\r\n            z-index: 100;\r\n            opacity: 90%;\r\n            text-decoration: underline;\n}\r\n\r\n\r\n    /* Works on Chrome, Edge, and Safari */\n.keywordContainer[data-v-92d1c55a]::-webkit-scrollbar, .keywordContainerSmall[data-v-92d1c55a]::-webkit-scrollbar {\r\n        width: 12px;\r\n        height: 5px;\r\n        overflow-x: scroll;\r\n        background-color: transparent;\n}\n.keywordContainer[data-v-92d1c55a]::-webkit-scrollbar-track, .keywordContainerSmall[data-v-92d1c55a]::-webkit-scrollbar-track {\r\n        background-color: transparent;\r\n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.05);\n}\n.keywordContainer[data-v-92d1c55a]::-webkit-scrollbar-thumb, .keywordContainerSmall[data-v-92d1c55a]::-webkit-scrollbar-thumb {\r\n        background-color: grey;\r\n        border-radius: 10px;\r\n        /* border: 1px solid Green;*/\n}\n.keywordContainer[data-v-92d1c55a]::-webkit-scrollbar-track-piece:end, .keywordContainerSmall[data-v-92d1c55a]::-webkit-scrollbar-track-piece:end {\r\n        margin-right: 75px;\n}\n.keywordContainer[data-v-92d1c55a]::-webkit-scrollbar-track-piece:start, .keywordContainerSmall[data-v-92d1c55a]::-webkit-scrollbar-track-piece:start {\r\n        margin-left: 175px;\n}\r\n\r\n    /* smaller version*/\n.keywordContainerSmall[data-v-92d1c55a] {\r\n        overflow-x: scroll;\r\n        overflow-y: visible;\r\n        white-space: nowrap;\r\n        position: relative;\r\n        display: inline-block;\r\n        height: 90px;\r\n        width: 100%;\r\n        scroll-behavior: smooth;\r\n        align-content: center;\n}\n.keywordContainerSmall > .dir-keyword[data-v-92d1c55a] {\r\n            display: inline-block;\r\n            margin-top: 15px;\r\n            margin-right: 5px;\r\n            font-size: medium;\n}\n.keywordContainerSmall > .dir-keyword > .dir-keyword-button[data-v-92d1c55a] {\r\n                position: relative;\r\n                color: Black;\r\n                font-size: 0.80em;\r\n                text-align: center;\r\n                border-radius: 60px;\r\n                padding-top: 15px;\r\n                padding-bottom: 15px;\r\n                padding-left: 10px;\r\n                padding-right: 10px;\r\n                max-width: 150px;\r\n                white-space: normal;\n}\r\n"),Oe.render=function(t,n,o,r,a,i){var l;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.keywordQueryModel)||void 0===l?void 0:l.containers,(function(n,o){return e.openBlock(),e.createElementBlock("div",{key:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.fields,(function(n,r){return e.openBlock(),e.createElementBlock("div",{key:n,class:e.normalizeClass(t.className?"row "+t.className:"row keywordContainer")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.values,(function(n,a){return e.openBlock(),e.createElementBlock("span",{key:n,class:"dir-keyword"},["filterByKeyword"===t.runAction?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:function(e){return t.filterByKeyword(o,r,a)},class:"dir-keyword-button",ref:"dirBtn"},e.toDisplayString(n),9,Le)):(e.openBlock(),e.createElementBlock("button",{key:1,onClick:function(e){return t.addKeyword(o,r,a)},class:"dir-keyword-button",ref:"dirBtn"},e.toDisplayString(n),9,Pe))])})),128))],2)})),128))])})),128)},Oe.__scopeId="data-v-92d1c55a";var Ue=e.defineComponent({name:"HomeView",props:n({colorScheme:{type:null,required:!1}},c),components:{KeywordPanel:Oe,FreeTextSearch:De},setup:function(t){var n=E(),o=t.dataAttributes,r=o["block-title"],a=o["block-description"],i=o["enable-freetext-search"],l=o["hex-color-list"],s=l?l.split(",").map((function(e){return e.trim()})):null;return{filterByKeyword:function(e,t,o){n.commit(Z.CLEAR_KEYWORD_SELECTIONS),n.commit(Z.SELECT_KEYWORD,{containerIndex:e,fieldIndex:t,valueIndex:o}),n.commit(Z.SET_ACTIVE_PAGE,G.List)},keywordQueryModel:e.computed((function(){return n.state.keywordQueryModel})),hexColorList:s,blogTitle:r,blogDescription:a,enableFreeTextSearch:i}}}),qe={class:"dir-title"},$e={class:"dir-description"},je={key:0};Ue.render=function(t,n,o,r,a,i){var l=e.resolveComponent("FreeTextSearch"),s=e.resolveComponent("KeywordPanel");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h1",qe,e.toDisplayString(t.blogTitle),1),e.createElementVNode("div",$e,e.toDisplayString(t.blogDescription),1),!0===t.enableFreeTextSearch?(e.openBlock(),e.createElementBlock("div",je,[e.createVNode(l)])):e.createCommentVNode("",!0),e.createVNode(s,{hexColorList:t.hexColorList,runAction:"filterByKeyword"},null,8,["hexColorList"])],64)};var Ye=e.defineComponent({name:"ListView",props:n({colorScheme:{type:null,required:!1}},c),components:{KeywordPanel:Oe,FreeTextSearch:De},setup:function(t){var n=E(),o=t.dataAttributes,r=o["enable-freetext-search"],a=o["hex-color-list"],i=a?a.split(",").map((function(e){return e.trim()})):null;return e.onMounted((function(){n.dispatch(re.FRESH_SEARCH)})),{hexColorList:i,enableFreeTextSearch:r,removeKeyword:function(e){n.commit(Z.CLEAR_KEYWORD,e),n.dispatch(re.FRESH_SEARCH)},viewDetails:function(e){n.commit(K.SET_ID,e),n.commit(Z.SET_ACTIVE_PAGE,G.Details)},keywordQueryModel:e.computed((function(){return n.state.keywordQueryModel})),items:e.computed((function(){var e;return null===(e=n.state.searchResult)||void 0===e?void 0:e.items})),results:e.computed((function(){return n.state.searchResult})),selectedKeywords:e.computed((function(){var e,t=[];return null===(e=n.state.keywordQueryModel)||void 0===e||e.containers.forEach((function(e,o){return e.fields.forEach((function(e,r){return e.values.forEach((function(e,a){n.getters.isKeywordSelected(o,r,a)&&t.push({index:{containerIndex:o,fieldIndex:r,valueIndex:a},value:e})}))}))})),t}))}}}),Ge=function(t){return e.pushScopeId("data-v-766506bb"),t=t(),e.popScopeId(),t},Xe={class:"row"},ze={class:"col-md-8 row"},Ke={class:"col-md-3"},We={class:"selectedKeyword"},Qe=["onClick"],Ze={class:"col-md-8 grey-BG contentList"},Je=Ge((function(){return e.createElementVNode("b",null,"Entries",-1)})),et={class:"item row"},tt=Ge((function(){return e.createElementVNode("div",null,[e.createElementVNode("i",{class:"fas fa-image profileImg"})],-1)})),nt={class:"profileInfo"},ot={class:"item-title"},rt=["onClick"],at={class:"content"},it={class:"col-md-4"},lt={key:0};He("\n.searchbar[data-v-766506bb] {\r\n        background-color: #ececec;\r\n        cursor: pointer;\r\n        height: 40px;\r\n        position: relative;\r\n        width: 400px;\r\n        display: inline-block;\r\n        margin-top: 15px;\r\n        padding: 12.5px\n}\n.profileInfo[data-v-766506bb] {\r\n        margin-left: 10px;\r\n        display: inline-block;\r\n        margin-top: 22px;\r\n        max-width:275px;\r\n        font-size:large;\n}\n.profileImg[data-v-766506bb] {\r\n        font-size: 1000%;\r\n        margin-left: 5px;\n}\n.grey-BG[data-v-766506bb] {\r\n        background-color: #ececec;\r\n        border-radius: 30px;\r\n        height: 500px;\r\n        position: relative;\r\n        width: 600px;\r\n        width: 700px;\r\n        margin-left: 20px;\r\n        margin-top: 10px;\r\n        margin-bottom: 20px;\r\n        display: inline-block;\r\n        overflow-y: scroll;\n}\n.fa-times[data-v-766506bb] {\r\n        margin-left: 5px;\r\n        font-size: medium;\n}\n.selectedKeyword[data-v-766506bb] {\r\n        background-color: #ffdc0e;\r\n        border-radius: 50px;\r\n        position: relative;\r\n        margin: 5px;\r\n        padding: 5px;\r\n        overflow-wrap: break-word;\r\n        display: inline-block;\r\n        font-size: medium;\n}\n.contentList[data-v-766506bb]::-webkit-scrollbar {\r\n        width: 7px;\r\n        height: 5px;\r\n        overflow-y: scroll;\r\n        background-color: transparent;\n}\n.contentList[data-v-766506bb]::-webkit-scrollbar-track {\r\n        background-color: transparent;\r\n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.02);\n}\n.contentList[data-v-766506bb]::-webkit-scrollbar-thumb {\r\n        background-color: grey;\r\n        border-radius: 10px;\r\n        /* border: 1px solid Green;*/\n}\n.contentList[data-v-766506bb]::-webkit-scrollbar-track-piece:end {\r\n        margin-bottom: 75px;\n}\n.contentList[data-v-766506bb]::-webkit-scrollbar-track-piece:start {\r\n        margin-top: 175px;\n}\r\n"),Ye.render=function(t,n,o,r,a,i){var l=e.resolveComponent("FreeTextSearch"),s=e.resolveComponent("KeywordPanel");return e.openBlock(),e.createElementBlock("div",Xe,[e.createElementVNode("div",ze,[e.createElementVNode("div",Ke,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.selectedKeywords,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.index.containerIndex+"_"+n.index.valueIndex},[e.createElementVNode("span",We,e.toDisplayString(n.value),1),e.createElementVNode("i",{class:"fa fa-remove",onClick:function(e){return t.removeKeyword(n.index)}},null,8,Qe)])})),128))]),e.createElementVNode("div",Ze,[Je,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createElementVNode("div",et,[tt,e.createElementVNode("div",nt,[e.createElementVNode("h5",ot,[e.createElementVNode("a",{href:"#",onClick:function(e){return t.viewDetails(n.id)}},e.toDisplayString(n.subtitle),9,rt)]),e.createElementVNode("div",at,e.toDisplayString(n.content),1)])])])})),128))])]),e.createElementVNode("div",it,[!0===t.enableFreeTextSearch?(e.openBlock(),e.createElementBlock("div",lt,[e.createVNode(l)])):e.createCommentVNode("",!0),e.createVNode(s,{hexColorList:t.hexColorList,className:"keywordContainerSmall"},null,8,["hexColorList"])])])},Ye.__scopeId="data-v-766506bb";var st=e.defineComponent({name:"DetailsView",props:c,components:{FreeTextSearch:De},setup:function(t){var n,o=E(),r=t.queryParameters;r&&(null===(n=r.iid)||void 0===n?void 0:n.length)>0&&o.commit(K.SET_ID,r.iid);var a=e.computed((function(){return o.state.id})),i=e.computed((function(){var e;return null===(e=o.state.searchResult)||void 0===e?void 0:e.items})),l=t.dataAttributes["enable-freetext-search"],s=e.computed((function(){return o.getters.getItem(a)}));return console.log("details view selected Item: "+JSON.stringify(s)),e.onMounted((function(){a&&o.dispatch(te.LOAD_ITEM,a)})),{itemId:a,items:i,item:e.computed((function(){return o.getters.getItem(a)})),enableFreeTextSearch:l,backToSearchResults:function(){o.commit(Z.SET_ACTIVE_PAGE,G.List)}}},methods:{}}),ct=function(t){return e.pushScopeId("data-v-8afc24e0"),t=t(),e.popScopeId(),t},dt=ct((function(){return e.createElementVNode("h2",null,"Details View",-1)})),ut={class:"row"},mt={key:0,class:"row"},ft={class:"col-md-6 grey-BG"},pt={class:"row"},_t=ct((function(){return e.createElementVNode("i",{class:"fas fa-image profileHeadshot"},null,-1)})),vt={class:"profileInfo"},ht={class:"item-title"},gt=["onClick"],bt={class:"content profileDetails"},Et=ct((function(){return e.createElementVNode("button",{class:"contactMeBtn btn btn-link marginTop"},"Contact Me!",-1)})),St={class:"col-md-5"},kt={key:0,class:"marginTop"},yt={class:"explore-related"},Tt=ct((function(){return e.createElementVNode("div",{class:"related-title"},"Explore related researchers",-1)})),Bt={class:"related-scroll"},It=ct((function(){return e.createElementVNode("i",{class:"fas fa-image related-image"},null,-1)})),At={class:"related-results"};He("\n.marginTop[data-v-8afc24e0]{\r\n        margin-top:30px;\n}\n.fa-image[data-v-8afc24e0] {\r\n        font-size: 500%;\n}\n.explore-related[data-v-8afc24e0] {\r\n        display: inline-block;\r\n        position: relative;\r\n        margin: 20px;\r\n        vertical-align: top;\n}\n.related-title[data-v-8afc24e0] {\r\n        background-color: #ececec;\r\n        font-weight: 700;\r\n        text-decoration: underline;\r\n        position: relative;\r\n        width: 230px;\r\n        padding: 15px;\r\n        margin-left: 30px;\r\n        border-radius: 20px 20px 0px 0px;\r\n        font-size: large;\n}\n.related-scroll[data-v-8afc24e0] {\r\n        background-color: #ececec;\r\n        border-radius: 30px;\r\n        padding: 20px;\r\n        width: 450px;\r\n        height: 150px;\r\n        overflow-x: scroll;\r\n        overflow-y: hidden;\r\n        white-space: nowrap;\r\n        display: inline-block;\n}\n.related[data-v-8afc24e0] {\r\n        display: inline-block;\n}\n.related-image[data-v-8afc24e0] {\r\n        position: relative;\r\n        display: inline-block;\r\n        float: left;\r\n        width: 100px;\n}\n.related-results[data-v-8afc24e0] {\r\n        display: inline-block;\r\n        position: relative;\r\n        margin: 20px;\r\n        margin-top: 10px;\n}\n.contactMeBtn[data-v-8afc24e0] {\r\n        float: right;\r\n        background: White;\r\n        border-radius: 50px;\r\n        position: relative;\r\n        display: inline-block;\r\n        padding: 7.5px;\r\n        font-size: large;\n}\n.backToSearchResultsBtn[data-v-8afc24e0] {\r\n        background: #ececec;\r\n        border-radius: 50px;\r\n        position: relative;\r\n        display: inline-block;\r\n        padding: 12.5px\n}\n.grey-BG[data-v-8afc24e0] {\r\n        background-color: #ececec;\r\n        border-radius: 30px;\r\n        height: 500px;\r\n        position: relative;\r\n        width: 600px;\r\n        width: 700px;\r\n        margin-left: 20px;\r\n        margin-top: 10px;\r\n        margin-bottom: 20px;\r\n        display: inline-block;\r\n        overflow-y: hidden;\n}\n.profileInfo[data-v-8afc24e0] {\r\n        margin-left: 10px;\r\n        display: inline-block;\r\n        margin-top: 22px;\r\n        max-width: 275px;\r\n        font-size: large;\n}\n.profileHeadshot[data-v-8afc24e0] {\r\n        font-size: 500%;\r\n        margin: 10px;\n}\r\n\r\n    /* Works on Chrome, Edge, and Safari */\n.related-scroll[data-v-8afc24e0]::-webkit-scrollbar {\r\n        width: 12px;\r\n        height: 5px;\r\n        overflow-x: scroll;\r\n        background-color: transparent;\n}\n.related-scroll[data-v-8afc24e0]::-webkit-scrollbar-track {\r\n        background-color: transparent;\r\n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.02);\n}\n.related-scroll[data-v-8afc24e0]::-webkit-scrollbar-thumb {\r\n        background-color: grey;\r\n        border-radius: 10px;\r\n        /* border: 1px solid Green;*/\n}\n.related-scroll[data-v-8afc24e0]::-webkit-scrollbar-track-piece:end {\r\n        margin-right: 75px;\n}\n.keywordContainer[data-v-8afc24e0]::-webkit-scrollbar-track-piece:start {\r\n        margin-left: 175px;\n}\r\n"),st.render=function(t,n,o,r,a,i){var l=e.resolveComponent("FreeTextSearch");return e.openBlock(),e.createElementBlock(e.Fragment,null,[dt,e.createElementVNode("div",ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(function(o){return e.openBlock(),e.createElementBlock("div",{key:o.id},[o.id===t.itemId?(e.openBlock(),e.createElementBlock("div",mt,[e.createElementVNode("div",ft,[e.createElementVNode("div",pt,[_t,e.createElementVNode("div",vt,[e.createElementVNode("h5",ht,[e.createElementVNode("a",{href:"#",onClick:function(e){return t.viewDetails(o.id)}},e.toDisplayString(o.subtitle),9,gt)])])]),e.createElementVNode("div",bt,e.toDisplayString(o.content),1),Et]),e.createElementVNode("div",St,[e.createElementVNode("button",{class:"backToSearchResultsBtn",onClick:n[0]||(n[0]=function(){return t.backToSearchResults&&t.backToSearchResults.apply(t,arguments)})},"Back to search results"),!0===t.enableFreeTextSearch?(e.openBlock(),e.createElementBlock("div",kt,[e.createVNode(l)])):e.createCommentVNode("",!0),e.createElementVNode("div",yt,[Tt,e.createElementVNode("div",Bt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id,class:"related"},[It,e.createElementVNode("div",At,e.toDisplayString(t.subtitle),1)])})),128))])])])])):e.createCommentVNode("",!0)])})),128))])],64)},st.__scopeId="data-v-8afc24e0";var Ct=e.defineComponent({name:"Popups",components:{},props:n({title:{type:null,required:!1,default:"Click me"},popup:{type:null,required:!1}},c),setup:function(t){var n=E(),o=e.ref(t.popup);return console.log("inside popup New: "+JSON.stringify(t.popup)),{isPopupVisible:e.computed((function(){return n.state.popupVisibility})),setPopupVisibility:function(e){return n.commit(Z.SET_POPUP_VISIBILITY,e)},ispopup:o}},methods:{closePopup:function(){this.ispopup=!1}}}),Rt={class:"popup"},xt={class:"popup-inner"};He("\n.popup[data-v-4b9ddcea] {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        z-index: 99;\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\n}\n.popup-inner[data-v-4b9ddcea] {\r\n        background: #FFF;\r\n        padding: 32px;\r\n        width:50%;\n}\r\n"),Ct.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",Rt,[e.createElementVNode("div",xt,[e.createElementVNode("button",{class:"popup-close",onClick:n[0]||(n[0]=function(e){return t.setPopupVisibility(!t.isPopupVisible)})}," Close Popup "),e.renderSlot(t.$slots,"default")])])},Ct.__scopeId="data-v-4b9ddcea";var Mt=e.defineComponent({name:"DirectoryView",components:{HomeView:Ue,ListView:Ye,DetailsView:st,Popups:Ct},props:n({colorScheme:{type:null,required:!1}},c),setup:function(t){var n=E(),o=t.queryParameters,r=t.dataAttributes["info-pop-up-content"];if(console.log("pop-up info content "+r),null!=o&&o.page){var a=null==o?void 0:o.page;n.commit(Z.SET_ACTIVE_PAGE,a)}var i=e.ref(!1);return{ePage:G,visit:function(e){return n.commit(Z.SET_ACTIVE_PAGE,e)},page:e.computed((function(){return n.state.activePage})),popupTrigger:i,isPopupVisible:e.computed((function(){return n.state.popupVisibility})),setPopupVisibility:function(e){return n.commit(Z.SET_POPUP_VISIBILITY,e)},infoContent:r,title:"<h1>Title</h1><hr/>"}}}),wt=["innerHTML"],Ft=e.createTextVNode(" | ");He("\n.keywordContainer[data-v-20851afe] {\r\n        overflow-x: scroll;\r\n        overflow-y: visible;\r\n        white-space: nowrap;\r\n        position: relative;\r\n        display: inline-block;\r\n        height: 150px;\r\n        width: 100%;\r\n        scroll-behavior: smooth;\r\n        align-content:center;\n}\n.dir-keyword[data-v-20851afe] {\r\n        display: inline-block;\r\n        margin-top: 15px;\r\n        margin-right: 5px;\n}\n.dir-keyword-button[data-v-20851afe] {\r\n        position: relative;\r\n        color: Black;\r\n        font-size: 0.80em;\r\n        text-align: center;\r\n        border-radius: 60px;\r\n        padding-top: 30px;\r\n        padding-bottom: 30px;\r\n        padding-left: 10px;\r\n        padding-right: 10px;\r\n        max-width: 150px;\r\n        white-space: normal;\n}\n.dir-keyword-button[data-v-20851afe]:focus {\r\n        background-color: yellow;\n}\n.dir-keyword-button[data-v-20851afe]:hover {\r\n       transform: scale(1.2);\r\n       z-index:100;\r\n       opacity:90%;\r\n       text-decoration:underline;\n}\r\n   \r\n   \r\n        /* Works on Chrome, Edge, and Safari */\n.keywordContainer[data-v-20851afe]::-webkit-scrollbar {\r\n        width: 12px;\r\n        height: 5px;\r\n        overflow-x: scroll;\r\n        background-color: transparent;\n}\n.keywordContainer[data-v-20851afe]::-webkit-scrollbar-track {\r\n        background-color: transparent;\r\n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.05);\n}\n.keywordContainer[data-v-20851afe]::-webkit-scrollbar-thumb {\r\n        background-color: grey;\r\n        border-radius: 10px;\r\n        /* border: 1px solid Green;*/\n}\n.keywordContainer[data-v-20851afe]::-webkit-scrollbar-track-piece:end {\r\n        margin-right: 75px;\n}\n.keywordContainer[data-v-20851afe]::-webkit-scrollbar-track-piece:start {\r\n        margin-left: 175px;\n}\r\n"),Mt.render=function(t,n,o,r,a,i){var l=e.resolveComponent("Popups"),s=e.resolveComponent("HomeView"),c=e.resolveComponent("ListView"),d=e.resolveComponent("DetailsView");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("button",{onClick:n[0]||(n[0]=function(e){return t.setPopupVisibility(!t.isPopupVisible)})},"info"),t.isPopupVisible?(e.openBlock(),e.createBlock(l,{key:0,popup:t.popupTrigger,"data-attributes":t.dataAttributes,"query-parameters":t.queryParameters},{default:e.withCtx((function(){return[e.createElementVNode("div",null,[e.createElementVNode("span",{innerHTML:t.infoContent},null,8,wt)])]})),_:1},8,["popup","data-attributes","query-parameters"])):e.createCommentVNode("",!0),e.createElementVNode("nav",null,[e.createElementVNode("a",{href:"#",onClick:n[1]||(n[1]=function(e){return t.visit(t.ePage.Home)})},"Home"),Ft,e.createElementVNode("a",{href:"#",onClick:n[2]||(n[2]=function(e){return t.visit(t.ePage.List)})},"Explore")]),t.page==t.ePage.Home?(e.openBlock(),e.createBlock(s,{key:1,"data-attributes":t.dataAttributes,"query-parameters":t.queryParameters},null,8,["data-attributes","query-parameters"])):e.createCommentVNode("",!0),t.page==t.ePage.List?(e.openBlock(),e.createBlock(c,{key:2,"data-attributes":t.dataAttributes,"query-parameters":t.queryParameters},null,8,["data-attributes","query-parameters"])):e.createCommentVNode("",!0),t.page==t.ePage.Details?(e.openBlock(),e.createBlock(d,{key:3,"data-attributes":t.dataAttributes,"query-parameters":t.queryParameters},null,8,["data-attributes","query-parameters"])):e.createCommentVNode("",!0)],64)},Mt.__scopeId="data-v-20851afe";var Nt=e.defineComponent({name:"Applet",components:{DirectoryView:Mt,ListView:we,FreeTextSearch:De},props:c,setup:function(t){console.log("Keyword Search setup ...",t);var n=t.dataAttributes,o=n["display-format"],r=n["block-title"],a=n["block-description"],i=n["enable-freetext-search"],l=n["hex-color-list"],s=E();s.commit(Z.SET_SOURCE,{pageId:t.pageId,blockId:t.blockId});var c,d=localStorage.getItem(s.getters.searchParamStorageKey);d&&d.length>0&&(c=JSON.parse(d))&&c.keywords?(s.commit(Z.SET_KEYWORDS,c.keywords),s.commit(Z.SET_OFFSET,c.offset),s.commit(Z.SET_PAGE_SIZE,c.max)):s.dispatch(re.INIT_FILTER),e.onMounted((function(){return s.dispatch(re.FILTER_BY_KEYWORDS)}));var u=e.ref(s.state.keywordQueryModel);return{dataAttributes:n,queryParameters:t.queryParameters,keywordQueryModel:u,displayFormat:o,blogTitle:r,blogDescription:a,enableFreeTextSearch:i,hexColors:l}},storeConfig:{state:W,actions:ie,mutations:ne,getters:le}}),Dt=["colorScheme"];Nt.render=function(t,n,o,r,a,i){var l=e.resolveComponent("DirectoryView"),s=e.resolveComponent("ListView");return e.openBlock(),e.createElementBlock(e.Fragment,null,["Directory"===t.displayFormat?(e.openBlock(),e.createBlock(l,{key:0,"data-attributes":t.dataAttributes,"query-parameters":t.queryParameters},null,8,["data-attributes","query-parameters"])):e.createCommentVNode("",!0),"List"===t.displayFormat?(e.openBlock(),e.createElementBlock("div",{key:1,class:"row",colorScheme:t.hexColors},[e.createVNode(s)],8,Dt)):e.createCommentVNode("",!0)],64)};var Vt,Ot;!function(e){e.SET_ID="SET_ID",e.SET_TEMPLATE="SET_TEMPLATE"}(Ot||(Ot={}));var Lt,Pt,Ht=(i(Vt={},Ot.SET_ID,(function(e,t){e.Id=t})),i(Vt,Ot.SET_TEMPLATE,(function(e,t){e.template=t})),Vt);!function(e){e.LOAD_TEMPLATE="LOAD_TEMPLATE",e.SET_ID="SET_ID"}(Pt||(Pt={}));var Ut=(i(Lt={},Pt.LOAD_TEMPLATE,(function(e){var t=window.location.origin+"/applets/api/itemtemplates/".concat(e.state.Id);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Ot.SET_TEMPLATE,t)}))})),i(Lt,Pt.SET_ID,(function(e,t){e.commit(Ot.SET_ID,t)})),Lt),qt=e.defineComponent({name:"NotificationEditor",props:{fieldContainer:{required:!1,type:null}},setup:function(){}});qt.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h4",null,e.toDisplayString(t.fieldContainer.name.concatenatedContent),1),e.createElementVNode("div",null,e.toDisplayString(t.fieldContainer),1)],64)};var $t=e.defineComponent({name:"FormEditor",props:["form"],setup:function(){}});$t.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h4",null,e.toDisplayString(t.form.name.concatenatedContent),1),e.createElementVNode("div",null,e.toDisplayString(t.form),1)],64)};var jt=e.defineComponent({name:"MetadatasetEditor",props:["metadataset"],setup:function(){}});jt.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h4",null,e.toDisplayString(t.metadataset.name.concatenatedContent),1),e.createElementVNode("div",null,e.toDisplayString(t.metadataset),1)],64)};var Yt=e.defineComponent({name:"ItemTemplate",components:{NotificationEditor:qt,FormEditor:$t,MetadatasetEditor:jt},props:{},setup:function(){var t=E(),n=e.ref(null);return{template:e.computed((function(){return t.state.template})),metadataSets:e.computed((function(){var e;return null===(e=t.state.template)||void 0===e?void 0:e.metadataSets})),dataContainer:e.computed((function(){var e;return null===(e=t.state.template)||void 0===e?void 0:e.dataContainer})),activePanel:n}},methods:{formatDate:function(e){return _e(e).format("MMM DD, YYYY")}}}),Gt=function(t){return e.pushScopeId("data-v-2579f0c4"),t=t(),e.popScopeId(),t},Xt={class:"container row itemTemplate"},zt={class:"col-md-4"},Kt=[Gt((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Overview",-1)}))],Wt=[Gt((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Notifications",-1)}))],Qt=["onClick"],Zt=[Gt((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Forms",-1)}))],Jt=["onClick"],en=[Gt((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Metadata Forms",-1)}))],tn=["onClick"],nn={class:"col-md-8"},on={key:0,class:"col-12 wrapper"},rn=[Gt((function(){return e.createElementVNode("h4",null,"Overview",-1)}))],an={key:1,class:"col-12 wrapper"},ln=[Gt((function(){return e.createElementVNode("h4",null,"Notifications",-1)}))],sn={key:0},cn={key:2,class:"col-12 wrapper"},dn=[Gt((function(){return e.createElementVNode("h4",null,"Forms",-1)}))],un={key:0},mn={key:3,class:"col-12 wrapper"},fn=[Gt((function(){return e.createElementVNode("h4",null,"Metadata Forms",-1)}))],pn={key:0};He("\n.menuEntry[data-v-2579f0c4]{\r\n        border: 1px solid Grey;\r\n        margin: 10px;\r\n        padding: 10px 10px;\n}\n.menuEntry.active[data-v-2579f0c4] {\r\n            background-color: #BBBCAA;\n}\n.sectionLabel[data-v-2579f0c4]{\r\n        font-weight: bold;\n}\n.wrapper[data-v-2579f0c4]{\r\n        margin: 0;\r\n        padding: 0;\n}\r\n"),Yt.render=function(t,n,o,r,a,i){var l,s,c,d,u,m=e.resolveComponent("NotificationEditor"),f=e.resolveComponent("FormEditor"),p=e.resolveComponent("MetadatasetEditor");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",null,e.toDisplayString(null===(l=t.template)||void 0===l?void 0:l.templateName),1),e.createElementVNode("div",Xt,[e.createElementVNode("div",zt,[e.createElementVNode("div",{class:e.normalizeClass(["col-12 menuEntry","overview"==t.activePanel||null==t.activePanel?"active":""]),onClick:n[0]||(n[0]=function(e){return t.activePanel="overview"})},Kt,2),e.createElementVNode("div",{class:e.normalizeClass(["col-12 menuEntry","notifications"==t.activePanel?"active":""]),onClick:n[1]||(n[1]=function(e){return t.activePanel="notifications"})},Wt,2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(s=t.metadataSets)||void 0===s?void 0:s.filter((function(e){return 1==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["col-12 menuEntry",t.activePanel==n.id?"active":""]),onClick:function(e){return t.activePanel=n.id}},e.toDisplayString(n.name.concatenatedContent),11,Qt)})),128)),e.createElementVNode("div",{class:"col-12 menuEntry",onClick:n[2]||(n[2]=function(e){return t.activePanel="forms"})},Zt),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dataContainer,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["col-12 menuEntry",t.activePanel==n.id?"active":""]),onClick:function(e){return t.activePanel=n.id}},e.toDisplayString(n.name.concatenatedContent),11,Jt)})),128)),e.createElementVNode("div",{class:"col-12 menuEntry",onClick:n[3]||(n[3]=function(e){return t.activePanel="metadata-forms"})},en),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(c=t.metadataSets)||void 0===c?void 0:c.filter((function(e){return 0==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["col-12 menuEntry",t.activePanel==n.id?"active":""]),onClick:function(e){return t.activePanel=n.id}},e.toDisplayString(n.name.concatenatedContent),11,tn)})),128))]),e.createElementVNode("div",nn,[null==t.activePanel||"overview"==t.activePanel?(e.openBlock(),e.createElementBlock("div",on,rn)):e.createCommentVNode("",!0),"notifications"==t.activePanel?(e.openBlock(),e.createElementBlock("div",an,ln)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(d=t.metadataSets)||void 0===d?void 0:d.filter((function(e){return 1==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"col-12 wrapper"},[t.activePanel==n.id?(e.openBlock(),e.createElementBlock("div",sn,[e.createVNode(m,{fieldContainer:n},null,8,["fieldContainer"])])):e.createCommentVNode("",!0)])})),128)),"forms"==t.activePanel?(e.openBlock(),e.createElementBlock("div",cn,dn)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dataContainer,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"col-12 wrapper"},[t.activePanel==n.id?(e.openBlock(),e.createElementBlock("div",un,[e.createVNode(f,{form:n},null,8,["form"])])):e.createCommentVNode("",!0)])})),128)),"metadata-forms"==t.activePanel?(e.openBlock(),e.createElementBlock("div",mn,fn)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(u=t.metadataSets)||void 0===u?void 0:u.filter((function(e){return 0==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"col-12 wrapper"},[t.activePanel==n.id?(e.openBlock(),e.createElementBlock("div",pn,[e.createVNode(p,{metadataset:n},null,8,["metadataset"])])):e.createCommentVNode("",!0)])})),128))])])],64)},Yt.__scopeId="data-v-2579f0c4";var _n=e.defineComponent({name:"ItemTemplateEditor",components:{ItemTemplate:Yt},props:c,setup:function(e){var t=E();console.log("Item Template Editor setup ..."),console.log("props: ",JSON.stringify(e));var n=e.queryParameters;return t.dispatch("SET_ID",n.id),t.dispatch("LOAD_TEMPLATE"),{queryParams:n}},storeConfig:{state:{Id:null,template:null},actions:Ut,mutations:Ht,getters:{}}}),vn=e.createElementVNode("h3",null,"Item Template Editor",-1);_n.render=function(t,n,o,r,a,i){var l=e.resolveComponent("ItemTemplate");return e.openBlock(),e.createElementBlock(e.Fragment,null,[vn,e.createElementVNode("div",null,"Item Template ID: "+e.toDisplayString(t.queryParameters.id),1),e.createVNode(l)],64)};var hn=e.defineComponent({name:"ItemEditor",components:{},props:c,setup:function(e,t){return console.log("Editor setup ..."),console.log("props: ",e),console.log("context: ",t),{queryParameters:e.queryParameters}},mounted:function(){console.log("Editor mounted ...")}}),gn=e.createElementVNode("h2",null,"Item Ediror",-1);hn.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",null,[gn,e.createElementVNode("div",null,"Item ID: "+e.toDisplayString(t.queryParameters.id),1)])};var bn,En,Sn;!function(e){e[e[void 0]=0]="undefined",e[e.data=1]="data",e[e.metadata=2]="metadata"}(bn||(bn={})),function(e){e[e.AttachmentField=0]="AttachmentField",e[e.CheckboxField=1]="CheckboxField",e[e.CompositeField=2]="CompositeField",e[e.DateField=3]="DateField",e[e.DecimalField=4]="DecimalField",e[e.EmailField=5]="EmailField",e[e.FieldContainerReference=6]="FieldContainerReference",e[e.InfoSection=7]="InfoSection",e[e.IntegerField=8]="IntegerField",e[e.MonolingualTextField=9]="MonolingualTextField",e[e.RadioField=10]="RadioField",e[e.SelectField=11]="SelectField",e[e.TableField=12]="TableField",e[e.TextArea=13]="TextArea",e[e.TextField=14]="TextField",e[e.AudioRecorderField=15]="AudioRecorderField"}(En||(En={})),function(e){e.VALID="VALID",e.VALUE_REQUIRED="VALUE_REQUIRED",e.INVALID="INVALID"}(Sn||(Sn={}));var kn=function(){function e(){o(this,e)}return a(e,null,[{key:"getSelectedFieldLabels",value:function(e){return null==e?void 0:e.filter((function(e){return e.selected})).map((function(e){var t;return null===(t=e.optionText)||void 0===t?void 0:t.values.$values.map((function(e){return e.value})).join(" / ")})).join(", ")}}]),e}(),yn=e.defineComponent({name:"Text",props:{model:{type:null,required:!0}},methods:{isUrl:function(e){return(null==e?void 0:e.startsWith("http://"))||(null==e?void 0:e.startsWith("https://"))}}}),Tn={key:0},Bn=["href"],In={key:1};yn.render=function(t,n,o,r,a,i){return t.isUrl(t.model.value)?(e.openBlock(),e.createElementBlock("div",Tn,[e.createElementVNode("a",{href:t.model.value},e.toDisplayString(t.model.value),9,Bn)])):(e.openBlock(),e.createElementBlock("div",In,e.toDisplayString(t.model.value),1))};var An=e.defineComponent({name:"TextCollection",props:{model:{type:null,required:!0}},components:{Text:yn}});An.render=function(t,n,o,r,a,i){var l=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(l,{model:t},null,8,["model"])])})),256)};var Cn=e.defineComponent({name:"TextField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!0},isMultiline:{type:Boolean,required:!1,default:!0}},components:{TextCollection:An}});Cn.render=function(t,n,o,r,a,i){var l=e.resolveComponent("TextCollection");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id},[e.createVNode(l,{model:t},null,8,["model"])])})),128)};var Rn=e.defineComponent({name:"EmailField",props:{model:{type:null,required:!0},isMultivalue:{type:Boolean,required:!1,default:!1}}});Rn.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.value),1)})),256)};var xn=e.defineComponent({name:"OptionsField",components:{},props:{model:{type:Object,required:!0}},methods:{getSelectedFieldLabels:function(e){return kn.getSelectedFieldLabels(e.options.$values)}}});xn.render=function(t,n,o,r,a,i){return e.toDisplayString(t.getSelectedFieldLabels(t.model))};var Mn=e.defineComponent({name:"DecimalField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1},numDecimalPlaces:{type:Number,required:!1,default:2}},methods:{formatToDecimal:function(e,t){return Number(e).toFixed(t)}}});Mn.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.formatToDecimal(n,t.numDecimalPlaces)),1)})),256)};var wn=e.defineComponent({name:"IntegerField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}}});wn.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.value),1)})),256)};var Fn=e.defineComponent({name:"DateField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}},methods:{formatDate:function(e){return _e(e).format("MMM DD, YYYY")}}});Fn.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.formatDate(n.value)),1)})),256)};var Nn=e.defineComponent({name:"ChildFieldContainer",props:{model:null},components:{TextField:Cn,EmailField:Rn,OptionsField:xn,DecimalField:Mn,IntegerField:wn,DateField:Fn},methods:{getFieldType:function(e){var t,n=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return n=null===(t=n)||void 0===t?void 0:t.substring(n.lastIndexOf(".")+1),En[n]},isAttachmentField:function(e){return this.getFieldType(e)===En.AttachmentField},isOptionsField:function(e){return this.getFieldType(e)===En.CheckboxField||this.getFieldType(e)===En.RadioField||this.getFieldType(e)===En.SelectField},isCompositeField:function(e){return this.getFieldType(e)===En.CompositeField},isDateField:function(e){return this.getFieldType(e)===En.DateField},isDecimalField:function(e){return this.getFieldType(e)===En.DecimalField},isEmailField:function(e){return this.getFieldType(e)===En.EmailField},isFieldContainerReference:function(e){return this.getFieldType(e)===En.FieldContainerReference},isInfoSection:function(e){return this.getFieldType(e)===En.InfoSection},isIntegerField:function(e){return this.getFieldType(e)===En.IntegerField},isMonolingualTextField:function(e){return this.getFieldType(e)===En.MonolingualTextField},isTableField:function(e){return this.getFieldType(e)===En.TableField},isTextArea:function(e){return this.getFieldType(e)===En.TextArea},isTextField:function(e){return this.getFieldType(e)===En.TextField},cssClass:function(e){return(e.cssClass?e.cssClass:"")+" "+(e.fieldCssClass?e.fieldCssClass:"")}}}),Dn={class:"field-name col-md-3"},Vn={class:"field-value col-md-9"},On={key:7},Ln={key:8},Pn={key:9},Hn={key:11};Nn.render=function(t,n,o,r,a,i){var l=this,s=e.resolveComponent("TextField"),c=e.resolveComponent("EmailField"),d=e.resolveComponent("OptionsField"),u=e.resolveComponent("DecimalField"),m=e.resolveComponent("IntegerField"),f=e.resolveComponent("DateField");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.fields.$values,(function(n){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["row",t.cssClass(n)])},[e.createElementVNode("div",Dn,e.toDisplayString(n.name.concatenatedContent),1),e.createElementVNode("div",Vn,[l.isTextField(n)?(e.openBlock(),e.createBlock(s,{key:0,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isTextArea(n)?(e.openBlock(),e.createBlock(s,{key:1,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isEmailField(n)?(e.openBlock(),e.createBlock(c,{key:2,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isOptionsField(n)?(e.openBlock(),e.createBlock(d,{key:3,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isDecimalField(n)?(e.openBlock(),e.createBlock(u,{key:4,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isIntegerField(n)?(e.openBlock(),e.createBlock(m,{key:5,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isDateField(n)?(e.openBlock(),e.createBlock(f,{key:6,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isAttachmentField(t.model)?(e.openBlock(),e.createElementBlock("div",On," AttachmentField ")):e.createCommentVNode("",!0),l.isCompositeField(t.model)?(e.openBlock(),e.createElementBlock("div",Ln," CompositeField ")):e.createCommentVNode("",!0),l.isInfoSection(t.model)?(e.openBlock(),e.createElementBlock("div",Pn," InfoSection ")):e.createCommentVNode("",!0),l.isMonolingualTextField(t.model)?(e.openBlock(),e.createBlock(s,{key:10,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isTableField(t.model)?(e.openBlock(),e.createElementBlock("div",Hn," TableField ")):e.createCommentVNode("",!0)])],2)})),256)};var Un=e.defineComponent({name:"FieldContainerReference",components:{ChildFieldContainer:Nn},props:{model:{type:null,required:!0}},setup:function(t){var n=E(),o=e.ref(t.model.refId);return console.log("refId: "+JSON.stringify(o)),{refId:o,source:e.computed((function(){return n.getters.metadataSet(o.value)}))}}});Un.render=function(t,n,o,r,a,i){var l=e.resolveComponent("ChildFieldContainer");return e.openBlock(),e.createBlock(l,{model:t.source},null,8,["model"])};var qn=e.defineComponent({name:"AttachmentField",components:{},props:{model:{type:null,required:!0}},setup:function(t){var n=E(),o=e.ref(n.state.item.id),r=e.ref(n.getters.dataItemId);return{itemId:o,fileUrl:"/api/items/"+o.value+"/"+r.value+"/"+t.model.id+"/"}}}),$n=["href"],jn=["src"];He("\n.img-thumbnail[data-v-307ae89a]{\r\n        width:35px;\r\n        height: auto;\r\n        margin-right: 10px;\n}\r\n"),qn.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.files.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("a",{href:t.fileUrl+n.fileName},[e.createElementVNode("img",{src:n.thumbnail,class:"img-thumbnail"},null,8,jn)],8,$n),e.createTextVNode(e.toDisplayString(n.originalFileName),1)])})),256)},qn.__scopeId="data-v-307ae89a";var Yn=e.defineComponent({name:"InfoField",props:{model:{type:null,required:!0}}}),Gn=["innerHTML"];Yn.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.content.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id},[e.createElementVNode("div",{innerHTML:t.value},null,8,Gn)])})),128)};var Xn=e.defineComponent({name:"FieldContainer",props:{model:null,hideFieldNames:Boolean},components:{TextField:Cn,EmailField:Rn,OptionsField:xn,DecimalField:Mn,IntegerField:wn,DateField:Fn,ReferenceField:Un,AttachmentField:qn,InfoField:Yn},methods:{getFieldType:function(e){var t,n=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return n=null===(t=n)||void 0===t?void 0:t.substring(n.lastIndexOf(".")+1),En[n]},isAttachmentField:function(e){return this.getFieldType(e)===En.AttachmentField},isOptionsField:function(e){return this.getFieldType(e)===En.CheckboxField||this.getFieldType(e)===En.RadioField||this.getFieldType(e)===En.SelectField},isCompositeField:function(e){return this.getFieldType(e)===En.CompositeField},isDateField:function(e){return this.getFieldType(e)===En.DateField},isDecimalField:function(e){return this.getFieldType(e)===En.DecimalField},isEmailField:function(e){return this.getFieldType(e)===En.EmailField},isFieldContainerReference:function(e){return this.getFieldType(e)===En.FieldContainerReference},isInfoSection:function(e){return this.getFieldType(e)===En.InfoSection},isIntegerField:function(e){return this.getFieldType(e)===En.IntegerField},isMonolingualTextField:function(e){return this.getFieldType(e)===En.MonolingualTextField},isTableField:function(e){return this.getFieldType(e)===En.TableField},isTextArea:function(e){return this.getFieldType(e)===En.TextArea},isTextField:function(e){return this.getFieldType(e)===En.TextField},cssClass:function(e){return e.cssClass+" "+e.fieldCssClass},formatDate:function(e){return _e(e).format("MMM DD, YYYY")}}}),zn={class:"timeStamp"},Kn={key:0,class:"field-name col-md-3"},Wn={class:"field-value col-md-9"},Qn={key:10},Zn={key:11};Xn.render=function(t,n,o,r,a,i){var l=this,s=e.resolveComponent("ReferenceField"),c=e.resolveComponent("TextField"),d=e.resolveComponent("EmailField"),u=e.resolveComponent("OptionsField"),m=e.resolveComponent("DecimalField"),f=e.resolveComponent("IntegerField"),p=e.resolveComponent("DateField"),_=e.resolveComponent("AttachmentField"),v=e.resolveComponent("InfoField");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",zn,e.toDisplayString(t.formatDate(t.model.created)),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.fields.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[l.isFieldContainerReference(n)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(t.cssClass(n))},[e.createVNode(s,{model:n},null,8,["model"])],2)):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["row",t.cssClass(n)])},[t.hideFieldNames?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Kn,e.toDisplayString(n.name.concatenatedContent),1)),e.createElementVNode("div",Wn,[l.isTextField(n)?(e.openBlock(),e.createBlock(c,{key:0,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isTextArea(n)?(e.openBlock(),e.createBlock(c,{key:1,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isEmailField(n)?(e.openBlock(),e.createBlock(d,{key:2,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isOptionsField(n)?(e.openBlock(),e.createBlock(u,{key:3,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isDecimalField(n)?(e.openBlock(),e.createBlock(m,{key:4,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isIntegerField(n)?(e.openBlock(),e.createBlock(f,{key:5,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isDateField(n)?(e.openBlock(),e.createBlock(p,{key:6,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isMonolingualTextField(t.model)?(e.openBlock(),e.createBlock(c,{key:7,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isAttachmentField(n)?(e.openBlock(),e.createBlock(_,{key:8,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isInfoSection(n)?(e.openBlock(),e.createBlock(v,{key:9,model:n},null,8,["model"])):e.createCommentVNode("",!0),l.isCompositeField(n)?(e.openBlock(),e.createElementBlock("div",Qn," CompositeField ")):e.createCommentVNode("",!0),l.isTableField(n)?(e.openBlock(),e.createElementBlock("div",Zn," TableField ")):e.createCommentVNode("",!0)])],2))])})),256))],64)};var Jn=e.defineComponent({name:"ItemViewer",components:{FieldContainer:Xn},props:c,setup:function(t){var n=E(),o=t.dataAttributes;console.log("Item Viewer setup ..."),console.log("props: ",JSON.stringify(t));var r=o["is-admin"],a=o["site-url"];n.commit(K.SET_SITE_URL,a),console.log("isAdmin: ",r);var i=t.queryParameters;return n.commit(K.SET_ID,i.iid),n.dispatch(te.LOAD_ITEM),{store:n,queryParams:i,dataItem:e.computed((function(){return n.getters.rootDataItem})),isAdmin:r}},storeConfig:{state:X,actions:ae,mutations:J,getters:{rootDataItem:function(e){var t,n,o;return null===(t=e.item)||void 0===t||null===(n=t.dataContainer)||void 0===n||null===(o=n.$values)||void 0===o?void 0:o.filter((function(e){return e.isRoot}))[0]},metadataSet:function(e){return function(t){var n,o,r;return null===(n=e.item)||void 0===n||null===(o=n.metadataSets)||void 0===o||null===(r=o.$values)||void 0===r?void 0:r.find((function(e){return e.templateId===t}))}},dataItemId:function(e){var t,n,o,r;return null===(t=e.item)||void 0===t||null===(n=t.dataContainer)||void 0===n||null===(o=n.$values)||void 0===o||null===(r=o.filter((function(e){return e.isRoot}))[0])||void 0===r?void 0:r.id}}},methods:{changeItemState:function(e){confirm("Do you really want to delete this item?")&&(console.log("id: "+e),this.store.dispatch(te.CHANGE_STATE,e))}}}),eo={key:0,class:"text-right"},to={class:"item"};var no;He("\n.field-name[data-v-4033daca] {\r\n        font-weight: bold !important;\n}\n.fa-remove[data-v-4033daca] {\r\n        color: red;\r\n        margin-left: 30px;\n}\r\n"),Jn.render=function(t,n,o,r,a,i){var l=e.resolveComponent("FieldContainer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.isAdmin?(e.openBlock(),e.createElementBlock("div",eo,[e.createElementVNode("span",{class:"fas fa-remove",onClick:n[0]||(n[0]=function(e){t.changeItemState(t.queryParams.iid)})})])):e.createCommentVNode("",!0),e.createElementVNode("div",to,[t.dataItem?(e.openBlock(),e.createBlock(l,{key:0,model:t.dataItem},null,8,["model"])):e.createCommentVNode("",!0)])],64)},Jn.__scopeId="data-v-4033daca",function(e){e[e.InProgress=1]="InProgress",e[e.Ready=2]="Ready"}(no||(no={}));var oo,ro,ao={indexingStatus:{pageIndexingStatus:no.Ready,dataIndexingStatus:no.Ready}};!function(e){e.SET_REINDEX_PAGE_STATUS="SET_REINDEX_PAGE_STATUS",e.SET_REINDEX_DATA_STATUS="SET_REINDEX_DATA_STATUS",e.SET_REINDEX_STATUS="SET_REINDEX_STATUS"}(ro||(ro={}));var io,lo,so=(i(oo={},ro.SET_REINDEX_PAGE_STATUS,(function(e,t){console.log("SET_REINDEX_PAGE_STATUS: ",t),e.indexingStatus.pageIndexingStatus=t})),i(oo,ro.SET_REINDEX_DATA_STATUS,(function(e,t){console.log("SET_REINDEX_DATA_STATUS: ",t),e.indexingStatus.dataIndexingStatus=t})),i(oo,ro.SET_REINDEX_STATUS,(function(e,t){console.log("SET_REINDEX_STATUS: ",t),e.indexingStatus=t})),oo);!function(e){e.REINDEX_DATA="REINDEX_DATA",e.REINDEX_PAGES="REINDEX_PAGES",e.FETCH_REINDEX_STATUS="FETCH_REINDEX_STATUS"}(lo||(lo={}));var co=(i(io={},lo.REINDEX_DATA,(function(e){var t=window.location.origin+"/applets/api/reindex/data";e.commit(ro.SET_REINDEX_DATA_STATUS,no.InProgress),fetch(t,{method:"POST"}).then((function(e){return e.json()})).then((function(t){e.commit(ro.SET_REINDEX_DATA_STATUS,t)})).catch((function(e){console.error("Data reindexing error:",e)}))})),i(io,lo.REINDEX_PAGES,(function(e){var t=window.location.origin+"/applets/api/reindex/pages";e.commit(ro.SET_REINDEX_PAGE_STATUS,no.InProgress),fetch(t,{method:"POST"}).then((function(e){return e.json()})).then((function(t){e.commit(ro.SET_REINDEX_PAGE_STATUS,t)})).catch((function(e){console.error("Page reindexing error:",e)}))})),i(io,lo.FETCH_REINDEX_STATUS,(function(e){var t=window.location.origin+"/applets/api/reindex/status";fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(ro.SET_REINDEX_STATUS,t)})).catch((function(e){console.error("Fetch reindexing status error:",e)}))})),io),uo=e.defineComponent({name:"IndexingPanel",props:{},setup:function(){var t=E();return{reindexData:function(){return t.dispatch(lo.REINDEX_DATA)},reindexPages:function(){return t.dispatch(lo.REINDEX_PAGES)},isPageIndexingReady:e.computed((function(){return t.state.indexingStatus.pageIndexingStatus==no.Ready})),isDataIndexingReady:e.computed((function(){return t.state.indexingStatus.dataIndexingStatus==no.Ready}))}}}),mo=e.createElementVNode("h5",{class:"card-title"},"Data Indexing",-1),fo=e.createElementVNode("p",{class:"card-text"},"With supporting text below as a natural lead-in to additional content.",-1),po={key:1,class:"btn btn-danger",disabled:""},_o=e.createElementVNode("br",null,null,-1),vo=e.createElementVNode("br",null,null,-1),ho=e.createElementVNode("h5",{class:"card-title"},"Page Indexing",-1),go=e.createElementVNode("p",{class:"card-text"},"With supporting text below as a natural lead-in to additional content.",-1),bo={key:3,class:"btn btn-danger",disabled:""};uo.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[mo,fo,t.isDataIndexingReady?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary",onClick:n[0]||(n[0]=function(){return t.reindexData&&t.reindexData.apply(t,arguments)})},"Reindex")):(e.openBlock(),e.createElementBlock("button",po,"Indexing In-progress")),_o,vo,ho,go,t.isPageIndexingReady?(e.openBlock(),e.createElementBlock("button",{key:2,class:"btn btn-primary",onClick:n[1]||(n[1]=function(){return t.reindexPages&&t.reindexPages.apply(t,arguments)})},"Reindex")):(e.openBlock(),e.createElementBlock("button",bo,"Indexing In-progress"))],64)};var Eo,So,ko=e.defineComponent({name:"Applet",components:{IndexingPanel:uo},props:c,setup:function(t){console.log("Process Manager setup ...",t);var n=E();e.onMounted((function(){return n.dispatch(lo.FETCH_REINDEX_STATUS)}))},storeConfig:{state:ao,actions:co,mutations:so,getters:{}}}),yo={class:"card"},To=e.createElementVNode("div",{class:"card-header"}," Indexing Processes ",-1),Bo={class:"card-body"};ko.render=function(t,n,o,r,a,i){var l=e.resolveComponent("IndexingPanel");return e.openBlock(),e.createElementBlock("div",yo,[To,e.createElementVNode("div",Bo,[e.createVNode(l)])])},function(e){e.SET_SOURCE="SET_SOURCE",e.SET_MODEL="SET_MODEL"}(So||(So={}));var Io,Ao,Co=(i(Eo={},So.SET_SOURCE,(function(e,t){e.pageId=t.pageId,e.blockId=t.blockId})),i(Eo,So.SET_MODEL,(function(e,t){e.model=t})),Eo);!function(e){e.LOAD_BLOCK="LOAD_BLOCK",e.LOAD_PAGE="LOAD_PAGE"}(Ao||(Ao={}));var Ro=(i(Io={},Ao.LOAD_BLOCK,(function(e){e.state.pageId||console.error("Page ID is null. It must be a valid GUID"),e.state.blockId||console.error("Block ID is null. It must be a valid GUID");var t=window.location.origin+"/applets/api/content/page/".concat(e.state.pageId,"/block/").concat(e.state.blockId);console.log("LOAD_BLOCK API: ",t),fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.commit(So.SET_MODEL,t)})).catch((function(e){console.error("LOAD_BLOCK error:",e)}))})),i(Io,Ao.LOAD_PAGE,(function(e){if(!e.state.pageId)throw new Error("Page ID is null. It must be a valid GUID");var t=window.location.origin+"/applets/api/content/page/".concat(e.state.pageId);console.log("LOAD_PAGE API: ",t),fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.commit(So.SET_MODEL,t)})).catch((function(e){console.error("LOAD_PAGE error:",e)}))})),Io),xo=e.defineComponent({name:"ImgDiv",props:{image:{type:Object,required:!0},debounceMs:{type:Number,required:!1,default:200}},methods:{resizeHandler:function(){this.setViewHeight(!1)},setViewHeight:function(e){var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout);var n=e?0:this.debounceMs;this.resizeTimeout=setTimeout((function(){if(t.root){var e=Math.round(t.root.clientWidth/t.aspectRatio);t.root.style.height="".concat(e,"px")}}),n)}},created:function(){window.addEventListener("resize",this.resizeHandler)},destroyed:function(){window.removeEventListener("resize",this.resizeHandler)},mounted:function(){this.setViewHeight(!0)},setup:function(t){var n=e.toRefs(t).image,o=e.ref(),r=e.ref();return{root:o,imageUrl:e.computed((function(){var e,t;return null===(e=n.value)||void 0===e||null===(t=e.publicUrl)||void 0===t?void 0:t.replace(/^~+/g,"")})),aspectRatio:e.computed((function(){return n.value?n.value.width/n.value.height:1})),resizeTimeout:r}}}),Mo=["id"];xo.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",{ref:"root",style:e.normalizeStyle([{backgroundImage:"url(".concat(t.imageUrl,")")},{"background-size":"cover"}]),id:t.image.id,class:"cf-img-div"},null,12,Mo)};var wo=e.defineComponent({name:"CardTemplate",components:{ImgDiv:xo},props:{model:{type:Object,required:!0}},setup:function(t){var n=e.toRefs(t).model;return{model:n,cardImage:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.cardImage.media})),popupImageUrl:e.computed((function(){var e,t,o;return null===(e=n.value)||void 0===e||null===(t=e.modalImage)||void 0===t||null===(o=t.media)||void 0===o?void 0:o.publicUrl})),title:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.cardTitle.value})),subTitle:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.cardSubTitle.value})),hasModel:e.computed((function(){return n.value.hasAModal})),modelImage:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.modalImage})),modalTitle:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.modalTitle.value})),modalSubTitle:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.modalSubTitle.value}))}}}),Fo={class:"col-md-4 cf-card"};He("\n.cf-card{\r\n        text-align:center;\n}\r\n"),wo.render=function(t,n,o,r,a,i){var l=e.resolveComponent("img-div");return e.openBlock(),e.createElementBlock("div",Fo,[e.createVNode(l,{image:t.cardImage,"debounce-ms":250,class:"img-div"},null,8,["image"]),e.createElementVNode("h2",null,e.toDisplayString(t.title),1),e.createElementVNode("h4",null,e.toDisplayString(t.subTitle),1)])};var No=e.defineComponent({name:"Applet",components:{CardTemplate:wo},props:c,setup:function(t){console.log("Grid setup ...");var n=E();return n.commit(So.SET_SOURCE,{pageId:t.pageId,blockId:t.blockId}),e.onMounted((function(){return n.dispatch(Ao.LOAD_BLOCK)})),{model:e.computed((function(){return n.state.model}))}},storeConfig:{actions:Ro,mutations:Co,getters:{searchParamStorageKey:function(e){var t;return(null===(t=e.blockId)||void 0===t?void 0:t.toString())+"SearchParams"}}}}),Do=e.createElementVNode("h2",null,"Grid",-1),Vo={class:"row"};No.render=function(t,n,o,r,a,i){var l,s=e.resolveComponent("CardTemplate");return e.openBlock(),e.createElementBlock("div",null,[Do,e.createElementVNode("div",Vo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l?void 0:l.items,(function(t){return e.openBlock(),e.createBlock(s,{model:t},null,8,["model"])})),256))])])};var Oo,Lo=fe((function(e,t){t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n})),Po=Lo;!function(e){e.None="None",e.InProgress="InProgress",e.Success="Success",e.Fail="Fail"}(Oo||(Oo={}));var Ho=function(){function e(){o(this,e)}return a(e,null,[{key:"cssClass",value:function(e){return e.cssClass+" "+e.fieldCssClass}},{key:"getFieldType",value:function(e){var t,n=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return n=null===(t=n)||void 0===t?void 0:t.substring(n.lastIndexOf(".")+1),En[n]}},{key:"isAttachmentField",value:function(e){return this.getFieldType(e)===En.AttachmentField}},{key:"isOptionsField",value:function(e){var t=this.getFieldType(e);return t===En.CheckboxField||t===En.RadioField||t===En.SelectField}},{key:"isCompositeField",value:function(e){return this.getFieldType(e)===En.CompositeField}},{key:"isDateField",value:function(e){return this.getFieldType(e)===En.DateField}},{key:"isDecimalField",value:function(e){return this.getFieldType(e)===En.DecimalField}},{key:"isEmailField",value:function(e){return this.getFieldType(e)===En.EmailField}},{key:"isFieldContainerReference",value:function(e){return this.getFieldType(e)===En.FieldContainerReference}},{key:"isInfoSection",value:function(e){return this.getFieldType(e)===En.InfoSection}},{key:"isIntegerField",value:function(e){return this.getFieldType(e)===En.IntegerField}},{key:"isMonolingualTextField",value:function(e){return this.getFieldType(e)===En.MonolingualTextField}},{key:"isTableField",value:function(e){return this.getFieldType(e)===En.TableField}},{key:"isTextArea",value:function(e){return this.getFieldType(e)===En.TextArea}},{key:"isTextField",value:function(e){return this.getFieldType(e)===En.TextField}},{key:"isAudioRecorderField",value:function(e){return this.getFieldType(e)===En.AudioRecorderField}}]),e}();function Uo(e,t){var n,o;null==e||null===(n=e.fields)||void 0===n||null===(o=n.$values)||void 0===o||o.forEach((function(e){var n,o,r,a=null===(n=e.$type)||void 0===n?void 0:n.substring(0,e.$type.indexOf(",")),i=a.substring(a.lastIndexOf(".")+1),l=En[i],s=l===En.DateField||l===En.DecimalField||l===En.EmailField||l===En.IntegerField||l===En.MonolingualTextField,c=l===En.TextArea||l===En.TextField,d=l===En.CheckboxField||l===En.RadioField||l===En.SelectField;if(s)null===(o=e.values)||void 0===o||null===(r=o.$values)||void 0===r||r.forEach((function(e){t.flattenedTextModels[e.id.toString()]=e}));else if(c){var u,m;null===(u=e.values)||void 0===u||null===(m=u.$values)||void 0===m||m.forEach((function(e){var n,o;null===(n=e.values)||void 0===n||null===(o=n.$values)||void 0===o||o.forEach((function(e){t.flattenedTextModels[e.id.toString()]=e}))}))}else if(d){var f,p;null===(f=e.options)||void 0===f||null===(p=f.$values)||void 0===p||p.forEach((function(e){t.flattenedOptionModels[e.id.toString()]=e}))}}))}function qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{id:Po.Guid.create().toString(),$type:"Catfish.Core.Models.Contents.Text, Catfish.Core",language:e,created:new Date,value:t}}var $o,jo,Yo={modified:!1,flattenedTextModels:{},flattenedOptionModels:{},flattenedFileModels:{}},Go=n(n({},Yo),{},{itemTemplateId:null,formId:null,collectionId:null,groupId:null,form:null,submissionStatus:Oo.None,formLoadAPI:null,formSubmissionAPI:null}),Xo=n({itemInstanceId:null,childResponseFormId:null,childResponseForm:null,formInstances:null},Go);!function(e){e.SET_TEXT_VALUE="SET_TEXT_VALUE",e.SET_OPTION_VALUE="SET_OPTION_VALUE",e.ADD_FILE="ADD_FILE",e.REMOVE_FILE="REMOVE_FILE",e.CLEAR_FIELD_DATA="CLEAR_FIELD_DATA",e.REMOVE_FIELD_CONTAINERS="REMOVE_FIELD_CONTAINERS",e.APPEND_FIELD_DATA="APPEND_FIELD_DATA",e.APPEND_MONOLINGUAL_VALUE="APPEND_MONOLINGUAL_VALUE",e.APPEND_MULTILINGUAL_VALUE="APPEND_MULTILINGUAL_VALUE"}(jo||(jo={}));var zo,Ko,Wo=(i($o={},jo.SET_TEXT_VALUE,(function(e,t){e.flattenedTextModels[t.id.toString()].value=t.val,e.modified=!0})),i($o,jo.SET_OPTION_VALUE,(function(e,t){e.flattenedOptionModels[t.id.toString()].selected=t.isSelected,e.modified=!0})),i($o,jo.ADD_FILE,(function(e,t){e.flattenedFileModels[t.id.toString()]||(e.flattenedFileModels[t.id.toString()]=[]),e.flattenedFileModels[t.id.toString()].push(t.val),e.modified=!0})),i($o,jo.REMOVE_FILE,(function(e,t){var n;null===(n=e.flattenedFileModels[t.id.toString()])||void 0===n||n.splice(t.index,1),e.modified=!0})),i($o,jo.CLEAR_FIELD_DATA,(function(e){Object.keys(e.flattenedTextModels).forEach((function(t){e.flattenedTextModels[t].value=""})),Object.keys(e.flattenedOptionModels).forEach((function(t){e.flattenedOptionModels[t].selected=!1})),Object.keys(e.flattenedFileModels).forEach((function(t){e.flattenedFileModels[t]=[]})),e.modified=!1})),i($o,jo.REMOVE_FIELD_CONTAINERS,(function(e){e.flattenedTextModels={},e.flattenedOptionModels={},e.flattenedFileModels={},e.modified=!1})),i($o,jo.APPEND_FIELD_DATA,(function(e,t){Uo(t,e)})),i($o,jo.APPEND_MONOLINGUAL_VALUE,(function(e,t){var n,o=qo();null===(n=t.values)||void 0===n||n.$values.push(o),e.flattenedTextModels[o.id.toString()]=o})),i($o,jo.APPEND_MULTILINGUAL_VALUE,(function(e,t){var n,o,r,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["en"];return{id:Po.Guid.create().toString(),$type:"Catfish.Core.Models.Contents.MultilingualValue, Catfish.Core",values:{$type:"Catfish.Core.Models.Contents.XmlModelList`1[[Catfish.Core.Models.Contents.Text, Catfish.Core]], Catfish.Core",$values:e.map((function(e){return qo(e)}))}}}(null!==(n=t.values)&&void 0!==n&&n.$values[0]?(null===(o=t.values)||void 0===o?void 0:o.$values[0]).values.$values.map((function(e){return e.language})):["en"]);a.values.$values.forEach((function(t){return e.flattenedTextModels[t.id.toString()]=t})),null===(r=t.values)||void 0===r||r.$values.push(a)})),$o);!function(e){e.SET_ITEM_TEMPLATE_ID="SET_ITEM_TEMPLATE_ID",e.SET_FORM_ID="SET_FORM_ID",e.SET_SUBMISSION_STATUS="SET_SUBMISSION_STATUS",e.SET_COLLECTION_ID="SET_COLLECTION_ID",e.SET_GROUP_ID="SET_GROUP_ID",e.SET_FORM="SET_FORM"}(Ko||(Ko={}));var Qo,Zo,Jo=n(n({},Wo),{},(i(zo={},Ko.SET_ITEM_TEMPLATE_ID,(function(e,t){e.itemTemplateId=t})),i(zo,Ko.SET_FORM_ID,(function(e,t){e.formId=t})),i(zo,Ko.SET_COLLECTION_ID,(function(e,t){e.collectionId=t})),i(zo,Ko.SET_GROUP_ID,(function(e,t){e.groupId=t})),i(zo,Ko.SET_SUBMISSION_STATUS,(function(e,t){e.submissionStatus=Oo[t]})),i(zo,Ko.SET_FORM,(function(e,t){e.form=t})),zo));!function(e){e.SET_SUBMISSIONS="SET_SUBMISSIONS",e.SET_PARENT_ITEM_ID="SET_PARENT_ITEM_ID",e.APPEND_CHILD_INSTANCE="APPEND_CHILD_INSTANCE",e.SET_RESPONSE_FORM_ID="SET_RESPONSE_FORM_ID",e.SET_RESPONSE_FORM="SET_RESPONSE_FORM",e.APPEND_CHILD_RESPONSE_INSTANCE="APPEND_CHILD_RESPONSE_INSTANCE",e.DELETE_CHILD_RESPONSE_INSTANCE="DELETE_CHILD_RESPONSE_INSTANCE",e.DELETE_CHILD_INSTANCE="DELETE_CHILD_INSTANCE"}(Zo||(Zo={}));var er,tr,nr=n((i(Qo={},Zo.SET_SUBMISSIONS,(function(e,t){e.formInstances=t})),i(Qo,Zo.SET_PARENT_ITEM_ID,(function(e,t){e.itemInstanceId=t})),i(Qo,Zo.APPEND_CHILD_INSTANCE,(function(e,t){var n;null===(n=e.formInstances)||void 0===n||n.$values.unshift(t)})),i(Qo,Zo.SET_RESPONSE_FORM_ID,(function(e,t){e.childResponseFormId=t})),i(Qo,Zo.SET_RESPONSE_FORM,(function(e,t){e.childResponseForm=t,Uo(e.childResponseForm,e)})),i(Qo,Zo.APPEND_CHILD_RESPONSE_INSTANCE,(function(e,t){var n,o,r=null===(n=e.formInstances)||void 0===n?void 0:n.$values.find((function(e){return e.id===(null==t?void 0:t.parentId)}));r&&(null===(o=r.childFieldContainers)||void 0===o||o.$values.push(t))})),i(Qo,Zo.DELETE_CHILD_RESPONSE_INSTANCE,(function(e,t){var n,o=null===(n=e.formInstances)||void 0===n?void 0:n.$values.find((function(e){return e.id===(null==t?void 0:t.parentId)}));if(o){var r,a,i=null==o||null===(r=o.childFieldContainers)||void 0===r?void 0:r.$values.indexOf(t);i>=0&&(null===(a=o.childFieldContainers)||void 0===a||a.$values.splice(i,1))}})),i(Qo,Zo.DELETE_CHILD_INSTANCE,(function(e,t){var n,o,r,a=null===(n=e.formInstances)||void 0===n||null===(o=n.$values)||void 0===o?void 0:o.indexOf(t);void 0!==a&&a>=0&&(null===(r=e.formInstances)||void 0===r||r.$values.splice(a,1))})),Qo),Jo),or=function e(){o(this,e)};function rr(e){if(!e.required)return Sn.VALID;for(var t=!1,n=0;!t&&null!=e&&e.values&&n<(null===(o=e.values)||void 0===o||null===(r=o.$values)||void 0===r?void 0:r.length);++n)for(var o,r,a,i=null==e||null===(a=e.values)||void 0===a?void 0:a.$values[n],l=0;!t&&i.values&&l<(null===(s=i.values)||void 0===s?void 0:s.$values.length);++l){var s,c,d,u;t=(null===(c=i.values)||void 0===c||null===(d=c.$values[l])||void 0===d||null===(u=d.value)||void 0===u?void 0:u.trim().length)>0}return t?Sn.VALID:Sn.VALUE_REQUIRED}function ar(e,t){for(var n=!1,o=Sn.VALID,r=0;null!=e&&e.values&&r<(null===(a=e.values)||void 0===a?void 0:a.$values.length);++r){var a,i,l,s=null===(i=e.values.$values[r])||void 0===i||null===(l=i.value)||void 0===l?void 0:l.trim();(null==s?void 0:s.length)>0&&(n=!0,t&&!t.test(s)&&(o=Sn.INVALID))}return e.required&&!n&&(o=Sn.VALUE_REQUIRED),o}function ir(e){for(var t=!1,n=Sn.VALID,o=0;null!=e&&e.values&&o<(null===(r=e.values)||void 0===r?void 0:r.$values.length);++o){var r,a;"number"==typeof(null===(a=e.values.$values[o])||void 0===a?void 0:a.value)&&(t=!0)}return e.required&&!t&&(n=Sn.VALUE_REQUIRED),n}function lr(e){if(!e.required)return Sn.VALID;for(var t=!1,n=0;!t&&null!==(o=e.options)&&void 0!==o&&o.$values&&n<(null===(r=e.options)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length);++n){var o,r,a,i;t=null===(i=e.options)||void 0===i?void 0:i.$values[n].selected}return t?Sn.VALID:Sn.VALUE_REQUIRED}function sr(e){var t,n,o=!0;return null===(t=e.fields)||void 0===t||null===(n=t.$values)||void 0===n||n.forEach((function(e){switch(Ho.getFieldType(e)){case En.AttachmentField:break;case En.CheckboxField:case En.RadioField:case En.SelectField:e.validationStatus=lr(e);break;case En.CompositeField:break;case En.DateField:e.validationStatus=ar(e,null);break;case En.DecimalField:case En.IntegerField:e.validationStatus=ir(e);break;case En.EmailField:e.validationStatus=ar(e,or.Email);break;case En.FieldContainerReference:break;case En.MonolingualTextField:e.validationStatus=ar(e,null);break;case En.TableField:break;case En.TextArea:case En.TextField:e.validationStatus=rr(e);break;case En.AudioRecorderField:e.validationStatus=Sn.VALID}o=o&&e.validationStatus===Sn.VALID})),e.validationStatus=o?null:Sn.INVALID,o}i(or,"Email",/^[^\s@]+@[^\s@]+\.[^\s@]+$/),i(or,"Number",/^\d+$/),i(or,"Decimal",/^[+-]?(\d+\.?\d*|\.\d+)$/),function(e){e.LOAD_FORM="LOAD_FORM",e.LOAD_SUBMISSIONS="LOAD_SUBMISSIONS",e.LOAD_RESPONSE_FORM="LOAD_RESPONSE_FORM",e.SUBMIT_CHILD_FORM="SUBMIT_CHILD_FORM",e.SUBMIT_CHILD_RESPONSE_FORM="SUBMIT_CHILD_RESPONSE_FORM",e.DELETE_CHILD_RESPONSE_INSTANCE="DELETE_CHILD_RESPONSE_INSTANCE",e.DELETE_CHILD_INSTANCE="DELETE_CHILD_INSTANCE"}(tr||(tr={}));var cr=(i(er={},tr.LOAD_FORM,(function(e){var t=window.location.origin+"/applets/api/items/getchildform/".concat(e.state.itemInstanceId,"/").concat(e.state.formId);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Ko.SET_FORM,t),e.commit(jo.APPEND_FIELD_DATA,t)})).catch((function(e){console.error("Actions.LOAD_FORM Error: ",e)}))})),i(er,tr.LOAD_RESPONSE_FORM,(function(e){var t=window.location.origin+"/applets/api/items/getchildform/".concat(e.state.itemInstanceId,"/").concat(e.state.childResponseFormId);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Zo.SET_RESPONSE_FORM,t)})).catch((function(e){console.error("Actions.LOAD_RESPONSE_FORM Error: ",e)}))})),i(er,tr.LOAD_SUBMISSIONS,(function(e){var t=window.location.origin+"/applets/api/items/getchildformsubmissions/".concat(e.state.itemInstanceId,"/").concat(e.state.formId);console.log("Child Submissions Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Zo.SET_SUBMISSIONS,t)})).catch((function(e){console.error("Submission loading error:",e)}))})),i(er,tr.SUBMIT_CHILD_FORM,(function(e){var t=e.state.form;if(t&&sr(t)){e.commit(Ko.SET_SUBMISSION_STATUS,"InProgress");var n=window.location.origin+"/applets/api/items/appendchildforminstance/".concat(e.state.itemInstanceId),o=new FormData;o.append("datamodel",JSON.stringify(t)),fetch(n,{body:o,method:"post"}).then((function(e){return e.json()})).then((function(t){e.commit(jo.CLEAR_FIELD_DATA),e.commit(Zo.APPEND_CHILD_INSTANCE,t),e.commit(Ko.SET_SUBMISSION_STATUS,"Success")})).catch((function(t){e.commit(Ko.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))}})),i(er,tr.SUBMIT_CHILD_RESPONSE_FORM,(function(e,t){if(e.state.childResponseForm&&sr(e.state.childResponseForm)){var n=window.location.origin+"/applets/api/items/appendchildforminstance/".concat(e.state.itemInstanceId),o=new FormData;o.append("datamodel",JSON.stringify(e.state.childResponseForm)),t&&o.append("parentId",t.toString()),fetch(n,{body:o,method:"post"}).then((function(e){return e.json()})).then((function(t){e.commit(Zo.APPEND_CHILD_RESPONSE_INSTANCE,t),e.commit(jo.CLEAR_FIELD_DATA)})).catch((function(t){e.commit(Ko.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))}})),i(er,tr.DELETE_CHILD_RESPONSE_INSTANCE,(function(e,t){var n=window.location.origin+"/applets/api/items/deleteChildForm/".concat(e.state.itemInstanceId,"/").concat(t.id,"?parentId=").concat(t.parentId);fetch(n,{method:"post"}).then((function(e){return e.json()})).then((function(n){n.id&&(console.log("deleteChildForm response received"),e.commit(Zo.DELETE_CHILD_RESPONSE_INSTANCE,t))})).catch((function(t){e.commit(Ko.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))})),i(er,tr.DELETE_CHILD_INSTANCE,(function(e,t){var n=window.location.origin+"/applets/api/items/deleteChildForm/".concat(e.state.itemInstanceId,"/").concat(t.id);fetch(n,{method:"post"}).then((function(e){return e.json()})).then((function(n){n.id&&(console.log("deleteChildForm response received"),e.commit(Zo.DELETE_CHILD_INSTANCE,t))})).catch((function(t){e.commit(Ko.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))})),er),dr=e.defineComponent({name:"DropZone",props:{id:{required:!0,type:String}},setup:function(){var t=e.ref(!1);return{active:t,toggleActive:function(){t.value=!t.value}}}}),ur=function(t){return e.pushScopeId("data-v-eae6523c"),t=t(),e.popScopeId(),t},mr=ur((function(){return e.createElementVNode("span",null,"Drag and Drop File(s)",-1)})),fr=ur((function(){return e.createElementVNode("span",null,"OR",-1)})),pr=["for"],_r=["id"];He("\n.dropzone[data-v-eae6523c] {\r\n        width: 400px;\r\n        height: 200px;\r\n        margin-top:20px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        row-gap: 16px;\r\n        border: 2px dashed #41b883;\r\n        background-color: #fff;\r\n        transition: 0.3s ease all;\n}\n.dropzone label[data-v-eae6523c] {\r\n            padding: 8px 12px;\r\n            color: #fff;\r\n            background-color: #41b883;\r\n            transition: 0.3s ease all;\n}\n.dropzone input[data-v-eae6523c] {\r\n            display: none;\n}\n.active-dropzone[data-v-eae6523c] {\r\n        color: #fff;\r\n        border-color: #fff;\r\n        background-color: #41b883;\n}\n.active-dropzone label[data-v-eae6523c] {\r\n            background-color: #fff;\r\n            color: #41b883;\n}\r\n"),dr.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",{onDragenter:n[0]||(n[0]=e.withModifiers((function(){return t.toggleActive&&t.toggleActive.apply(t,arguments)}),["prevent"])),onDragleave:n[1]||(n[1]=e.withModifiers((function(){return t.toggleActive&&t.toggleActive.apply(t,arguments)}),["prevent"])),onDragover:n[2]||(n[2]=e.withModifiers((function(){}),["prevent"])),onDrop:n[3]||(n[3]=e.withModifiers((function(){return t.toggleActive&&t.toggleActive.apply(t,arguments)}),["prevent"])),class:e.normalizeClass([{"active-dropzone":t.active},"dropzone"])},[mr,fr,e.createElementVNode("label",{for:t.id},"Select File(s)",8,pr),e.createElementVNode("input",{type:"file",id:t.id,class:"dropzoneFile",multiple:""},null,8,_r)],34)},dr.__scopeId="data-v-eae6523c";var vr=e.defineComponent({name:"AttachmentField",components:{DropZone:dr},props:{model:{type:null,required:!0}},setup:function(t){var n=E(),o=e.computed((function(){return n.state.flattenedFileModels[t.model.id.toString()]})),r=e.computed((function(){var e;return null==o||null===(e=o.value)||void 0===e?void 0:e.map((function(e){return e.name}))}));return{drop:function(e){Array.from(e.dataTransfer.files).forEach((function(e){n.commit(jo.ADD_FILE,{id:t.model.id,val:e})}))},selectFiles:function(){var e=document.getElementById(t.model.id.toString());Array.from(null==e?void 0:e.files).forEach((function(e){n.commit(jo.ADD_FILE,{id:t.model.id,val:e})}))},selectedFiles:o,selectedFileNames:r}}});vr.render=function(t,n,o,r,a,i){var l,s=e.resolveComponent("DropZone");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",null,e.toDisplayString(null===(l=t.selectedFileNames)||void 0===l?void 0:l.join(" | ")),1),e.createVNode(s,{id:t.model.id,onDrop:e.withModifiers(t.drop,["prevent"]),onChange:t.selectFiles},null,8,["id","onDrop","onChange"])],64)};var hr=e.defineComponent({name:"CheckboxField",components:{},props:{model:{type:Object,required:!0}},setup:function(t){var n=E(),o=e.computed({get:function(){return t.model.options.$values.filter((function(e){return!0===e.selected})).map((function(e){return e.id}))},set:function(){}});return{store:n,selectoption:function(e){n.commit(jo.SET_OPTION_VALUE,{id:e.target.value,isSelected:e.target.checked})},selectedoptions:o,getConcatenatedOptionLabels:function(e){var t,n,o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((function(e){return e.value})).join(" / ");return o||""}}}}),gr=["id","value"],br=["for"];hr.render=function(t,n,o,r,a,i){var l=this;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(function(o){return e.openBlock(),e.createElementBlock("div",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:o.id,value:o.id,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.selectedoptions=e}),onChange:n[1]||(n[1]=function(e){return t.selectoption(e)})},null,40,gr),[[e.vModelCheckbox,t.selectedoptions]]),e.createElementVNode("label",{for:o.id},e.toDisplayString(l.getConcatenatedOptionLabels(o)),9,br)])})),256)};var Er=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Sr=function(e){return-1!==Er.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},kr=function(t,n,o,r,a,i){r.setContent(i()),o.attrs["onUpdate:modelValue"]&&function(t,n,o,r){var a=t.modelEvents?t.modelEvents:null,i=Array.isArray(a)?a.join(" "):a;e.watch(r,(function(e,n){o&&"string"==typeof e&&e!==n&&e!==o.getContent({format:t.outputFormat})&&o.setContent(e)})),o.on(i||"change input undo redo",(function(){n.emit("update:modelValue",o.getContent({format:t.outputFormat}))}))}(n,o,r,a),function(e,t,n){Object.keys(t).filter(Sr).forEach((function(o){var r=t[o];"function"==typeof r&&("onInit"===o?r(e,n):n.on(o.substring(2),(function(e){return r(e,n)})))}))}(t,o.attrs,r)},yr=0,Tr=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++yr+String(t)},Br=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},Ir=function(){return{listeners:[],scriptId:Tr("tiny-script"),scriptLoaded:!1}},Ar=function(){var e=Ir();return{load:function(t,n,o){e.scriptLoaded?o():(e.listeners.push(o),t.getElementById(e.scriptId)||function(e,t,n,o){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=n;var a=function(){r.removeEventListener("load",a),o()};r.addEventListener("load",a),t.head&&t.head.appendChild(r)}(e.scriptId,t,n,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},reinitialize:function(){e=Ir()}}}(),Cr=function(){return"undefined"!=typeof window?window:global},Rr=function(){var e=Cr();return e&&e.tinymce?e.tinymce:null},xr={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},Mr=window&&window.__assign||function(){return Mr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Mr.apply(this,arguments)},wr=e.defineComponent({props:xr,setup:function(t,n){var o=e.toRefs(t),r=o.disabled,a=o.modelValue,i=e.ref(null),l=null,s=t.id||Tr("tiny-vue"),c=t.init&&t.init.inline||t.inline,d=!!n.attrs["onUpdate:modelValue"],u=!0,m=t.initialValue?t.initialValue:"",f="",p=function(){var e,o,r,p=(e=u,d?function(){return(null==a?void 0:a.value)?a.value:""}:function(){return e?m:f}),_=Mr(Mr({},t.init),{readonly:t.disabled,selector:"#"+s,plugins:(o=t.init&&t.init.plugins,r=t.plugins,Br(o).concat(Br(r))),toolbar:t.toolbar||t.init&&t.init.toolbar,inline:c,setup:function(e){l=e,e.on("init",(function(o){return kr(o,t,n,e,a,p)})),t.init&&"function"==typeof t.init.setup&&t.init.setup(e)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(i.value)&&(i.value.style.visibility=""),Rr().init(_),u=!1};return e.watch(r,(function(e){null!==l&&l.setMode(e?"readonly":"design")})),e.onMounted((function(){if(null!==Rr())p();else if(i.value&&i.value.ownerDocument){var e=t.cloudChannel?t.cloudChannel:"5",n=t.apiKey?t.apiKey:"no-api-key",o=null==t.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+e+"/tinymce.min.js":t.tinymceScriptSrc;Ar.load(i.value.ownerDocument,o,p)}})),e.onBeforeUnmount((function(){null!==Rr()&&Rr().remove(l)})),c||(e.onActivated((function(){u||p()})),e.onDeactivated((function(){var e;d||(f=l.getContent()),null===(e=Rr())||void 0===e||e.remove(l)}))),function(){return c?(n=e.h,o=s,r=i,a=t.tagName,n(a||"div",{id:o,ref:r})):function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})}(e.h,s,i);var n,o,r,a}}}),Fr=wr,Nr=e.defineComponent({name:"Text",props:{model:{type:null,required:!0},isMultiline:{type:Boolean,required:!0},isRichText:{type:Boolean,required:!0},validationStatus:{type:null,required:!0},field:{type:String,required:!1,default:"text"}},components:{Editor:Fr},computed:{content:{get:function(){return this.model.value},set:function(e){this.store.commit(jo.SET_TEXT_VALUE,{id:this.model.id,val:e})}}},setup:function(e){return{store:E(),field:e.field}}}),Dr={key:2},Vr=["type"];Nr.render=function(t,n,o,r,a,i){var l=e.resolveComponent("Editor");return t.isRichText?(e.openBlock(),e.createBlock(l,{key:0,apiKey:"0ohehg73era56wydy5kyws6ouf25550ogy2sifi1j41hk65l",modelValue:t.content,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.content=e}),placeholder:"add multiple lines"},null,8,["modelValue"])):t.isMultiline?e.withDirectives((e.openBlock(),e.createElementBlock("textarea",{key:1,"onUpdate:modelValue":n[1]||(n[1]=function(e){return t.content=e})},null,512)),[[e.vModelText,t.content]]):(e.openBlock(),e.createElementBlock("div",Dr,["text"===t.field?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,type:"text","onUpdate:modelValue":n[2]||(n[2]=function(e){return t.content=e})},null,512)),[[e.vModelText,t.content]]):"decimal"===t.field?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:"number","onUpdate:modelValue":n[3]||(n[3]=function(e){return t.content=e}),step:"0.01",placeholder:"0.00"},null,512)),[[e.vModelText,t.content]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:2,type:t.field,"onUpdate:modelValue":n[4]||(n[4]=function(e){return t.content=e})},null,8,Vr)),[[e.vModelDynamic,t.content]])]))};var Or=e.defineComponent({name:"DateField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}},components:{Text:Nr},setup:function(t){return{validationStatus:e.computed((function(){return ar(t.model,null)})),type:t.model.modelType}}});Or.render=function(t,n,o,r,a,i){var l,s,c=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(c,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"date"},null,8,["model","validation-status"])])})),256)};var Lr=e.defineComponent({name:"DecimalField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1},numDecimalPlaces:{type:Number,required:!1,default:2}},components:{Text:Nr},setup:function(t){return{validationStatus:e.computed((function(){return ir(t.model)})),type:t.model.modelType}}});Lr.render=function(t,n,o,r,a,i){var l,s,c=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(c,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"decimal"},null,8,["model","validation-status"])])})),256)};var Pr=e.defineComponent({name:"EmailField",props:{model:{type:null,required:!0},isMultivalue:{type:Boolean,required:!1,default:!1}},components:{Text:Nr},setup:function(t){return{validationStatus:e.computed((function(){return ar(t.model,or.Email)})),type:t.model.modelType}}});Pr.render=function(t,n,o,r,a,i){var l,s,c=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(c,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"email"},null,8,["model","validation-status"])])})),256)};var Hr=e.defineComponent({name:"InfoField",props:{model:{type:null,required:!0}}}),Ur=["innerHTML"];Hr.render=function(t,n,o,r,a,i){var l,s;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.content)||void 0===s?void 0:s.values,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id},[e.createElementVNode("div",{innerHTML:t.value},null,8,Ur)])})),128)};var qr=e.defineComponent({name:"IntegerField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}},components:{Text:Nr},setup:function(t){return{validationStatus:e.computed((function(){return ir(t.model)})),type:t.model.modelType}}});qr.render=function(t,n,o,r,a,i){var l,s,c=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(c,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"number"},null,8,["model","validation-status"])])})),256)};var $r=e.defineComponent({name:"RadioField",props:{model:{type:Object,required:!0}},methods:{getSelectedFieldLabels:function(e){return kn.getSelectedFieldLabels(e.options.$values)},getConcatenatedOptionLabels:function(e){var t,n,o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((function(e){return e.value})).join(" / ");return o||""}},computed:{selected:{get:function(){var e;return null===(e=this.model.options.$values.find((function(e){return e.selected})))||void 0===e?void 0:e.id},set:function(e){var t=this;this.model.options.$values.forEach((function(n){t.store.commit(jo.SET_OPTION_VALUE,{id:n.id,isSelected:n.id===e})}))}}},setup:function(t){var n=e.computed((function(){return lr(t.model)})),o="radio_"+t.model.id;return{store:E(),validationStatus:n,name:o}}}),jr=["name","id","value"],Yr=e.createTextVNode(),Gr=["for"];$r.render=function(t,n,o,r,a,i){var l=this;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(function(o){return e.openBlock(),e.createElementBlock("div",null,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:t.name,id:o.id,value:o.id,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.selected=e})},null,8,jr),[[e.vModelRadio,t.selected]]),Yr,e.createElementVNode("label",{for:o.id},e.toDisplayString(l.getConcatenatedOptionLabels(o)),9,Gr)])})),256)};var Xr=e.defineComponent({name:"SelectField",components:{},props:{model:{type:Object,required:!0}},methods:{getConcatenatedOptionLabels:function(e){var t,n,o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((function(e){return e.value})).join(" / ");return o||""}},computed:{selected:{get:function(){var e;return null===(e=this.model.options.$values.find((function(e){return e.selected})))||void 0===e?void 0:e.id},set:function(e){var t=this;this.model.options.$values.forEach((function(n){t.store.commit(jo.SET_OPTION_VALUE,{id:n.id,isSelected:n.id===e})}))}}},setup:function(t){var n=e.computed((function(){return lr(t.model)}));return{store:E(),validationStatus:n}}}),zr=e.createElementVNode("option",{disabled:"",value:""},"Please select one",-1),Kr=["id","value"];Xr.render=function(t,n,o,r,a,i){var l=this;return e.openBlock(),e.createElementBlock("div",null,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.selected=e}),class:"form-control col-md-6"},[zr,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(function(t){return e.openBlock(),e.createElementBlock("option",{id:t.id,value:t.id},e.toDisplayString(l.getConcatenatedOptionLabels(t)),9,Kr)})),256))],512),[[e.vModelSelect,t.selected]])])};var Wr=e.defineComponent({name:"TextCollection",props:{model:{type:null,required:!0},isMultiline:{type:Boolean,required:!0},isRichText:{type:Boolean,required:!0},validationStatus:{type:null,required:!0}},components:{Text:Nr}}),Qr={key:0};Wr.render=function(t,n,o,r,a,i){var l,s,c=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(function(n){var o,r,a;return e.openBlock(),e.createElementBlock("div",null,[(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",Qr,e.toDisplayString(n.language)+": ",1)):e.createCommentVNode("",!0),e.createVNode(c,{model:n,"is-multiline":t.isMultiline,"is-rich-text":t.isRichText,"validation-status":t.validationStatus},null,8,["model","is-multiline","is-rich-text","validation-status"])])})),256)};var Zr=e.defineComponent({name:"MultilingualTextField",props:{model:{type:null,required:!0},isMultiline:{type:Boolean,required:!0}},components:{TextCollection:Wr},setup:function(t){var n=E(),o=t.model.modelType,r=e.computed((function(){return rr(t.model)}));return{store:n,type:o,isRichText:e.computed((function(){return!(null==(e=t.model)||!e.richText)&&e.richText;var e})),validationStatus:r,isRequiredField:e.computed((function(){return!(null==(e=t.model)||!e.required)&&e.required;var e}))}},methods:{addText:function(e,t){e.commit(jo.APPEND_MULTILINGUAL_VALUE,t)}}});function Jr(){function e(e){return new Int8Array(e)}function t(e){return new Int32Array(e)}function n(e){return new Float32Array(e)}function o(e){if(1==e.length)return n(e[0]);var t=e[0];e=e.slice(1);for(var r=[],a=0;a<t;a++)r.push(o(e));return r}function r(e){if(1==e.length)return t(e[0]);var n=e[0];e=e.slice(1);for(var o=[],a=0;a<n;a++)o.push(r(e));return o}function a(e){if(1==e.length)return function(e){return new Int16Array(e)}(e[0]);var t=e[0];e=e.slice(1);for(var n=[],o=0;o<t;o++)n.push(a(e));return n}function i(e){if(1==e.length)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],o=0;o<t;o++)n.push(i(e));return n}var l={fill:function(e,t,n,o){if(2==arguments.length)for(var r=0;r<e.length;r++)e[r]=arguments[1];else for(r=t;r<n;r++)e[r]=o}},s={arraycopy:function(e,t,n,o,r){for(var a=t+r;t<a;)n[o++]=e[t++]}},c={};function d(e){this.ordinal=e}c.SQRT2=1.4142135623730951,c.FAST_LOG10=function(e){return Math.log10(e)},c.FAST_LOG10_X=function(e,t){return Math.log10(e)*t},d.short_block_allowed=new d(0),d.short_block_coupled=new d(1),d.short_block_dispensed=new d(2),d.short_block_forced=new d(3);var u={};function m(e){this.ordinal=e}function f(e){var t=e;this.ordinal=function(){return t}}function p(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}}function _(){var e=_.RMS_WINDOW_TIME_NUMERATOR,t=_.RMS_WINDOW_TIME_DENOMINATOR,n=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],o=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function r(e,t,n,o,r,a){for(;0!=r--;)n[o]=1e-10+e[t+0]*a[0]-n[o-1]*a[1]+e[t-1]*a[2]-n[o-2]*a[3]+e[t-2]*a[4]-n[o-3]*a[5]+e[t-3]*a[6]-n[o-4]*a[7]+e[t-4]*a[8]-n[o-5]*a[9]+e[t-5]*a[10]-n[o-6]*a[11]+e[t-6]*a[12]-n[o-7]*a[13]+e[t-7]*a[14]-n[o-8]*a[15]+e[t-8]*a[16]-n[o-9]*a[17]+e[t-9]*a[18]-n[o-10]*a[19]+e[t-10]*a[20],++o,++t}function a(e,t,n,o,r,a){for(;0!=r--;)n[o]=e[t+0]*a[0]-n[o-1]*a[1]+e[t-1]*a[2]-n[o-2]*a[3]+e[t-2]*a[4],++o,++t}function i(e){return e*e}this.InitGainAnalysis=function(n,o){return function(n,o){for(var r=0;r<MAX_ORDER;r++)n.linprebuf[r]=n.lstepbuf[r]=n.loutbuf[r]=n.rinprebuf[r]=n.rstepbuf[r]=n.routbuf[r]=0;switch(0|o){case 48e3:n.reqindex=0;break;case 44100:n.reqindex=1;break;case 32e3:n.reqindex=2;break;case 24e3:n.reqindex=3;break;case 22050:n.reqindex=4;break;case 16e3:n.reqindex=5;break;case 12e3:n.reqindex=6;break;case 11025:n.reqindex=7;break;case 8e3:n.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return n.sampleWindow=0|(o*e+t-1)/t,n.lsum=0,n.rsum=0,n.totsamp=0,l.ill(n.A,0),INIT_GAIN_ANALYSIS_OK}(n,o)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(n.linpre=MAX_ORDER,n.rinpre=MAX_ORDER,n.lstep=MAX_ORDER,n.rstep=MAX_ORDER,n.lout=MAX_ORDER,n.rout=MAX_ORDER,l.fill(n.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(e,t,l,c,d,u,m){var f,p,v,h,g,b,E;if(0==u)return GAIN_ANALYSIS_OK;switch(E=0,g=u,m){case 1:c=t,d=l;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(u<MAX_ORDER?(s.arraycopy(t,l,e.linprebuf,MAX_ORDER,u),s.arraycopy(c,d,e.rinprebuf,MAX_ORDER,u)):(s.arraycopy(t,l,e.linprebuf,MAX_ORDER,MAX_ORDER),s.arraycopy(c,d,e.rinprebuf,MAX_ORDER,MAX_ORDER));g>0;){b=g>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:g,E<MAX_ORDER?(f=e.linpre+E,p=e.linprebuf,v=e.rinpre+E,h=e.rinprebuf,b>MAX_ORDER-E&&(b=MAX_ORDER-E)):(f=l+E,p=t,v=d+E,h=c),r(p,f,e.lstepbuf,e.lstep+e.totsamp,b,n[e.reqindex]),r(h,v,e.rstepbuf,e.rstep+e.totsamp,b,n[e.reqindex]),a(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,b,o[e.reqindex]),a(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,b,o[e.reqindex]),f=e.lout+e.totsamp,p=e.loutbuf,v=e.rout+e.totsamp,h=e.routbuf;for(var S=b%8;0!=S--;)e.lsum+=i(p[f++]),e.rsum+=i(h[v++]);for(S=b/8;0!=S--;)e.lsum+=i(p[f+0])+i(p[f+1])+i(p[f+2])+i(p[f+3])+i(p[f+4])+i(p[f+5])+i(p[f+6])+i(p[f+7]),f+=8,e.rsum+=i(h[v+0])+i(h[v+1])+i(h[v+2])+i(h[v+3])+i(h[v+4])+i(h[v+5])+i(h[v+6])+i(h[v+7]),v+=8;if(g-=b,E+=b,e.totsamp+=b,e.totsamp==e.sampleWindow){var k=10*_.STEPS_per_dB*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37),y=k<=0?0:0|k;y>=e.A.length&&(y=e.A.length-1),e.A[y]++,e.lsum=e.rsum=0,s.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),s.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),s.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),s.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0}if(e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return u<MAX_ORDER?(s.arraycopy(e.linprebuf,u,e.linprebuf,0,MAX_ORDER-u),s.arraycopy(e.rinprebuf,u,e.rinprebuf,0,MAX_ORDER-u),s.arraycopy(t,l,e.linprebuf,MAX_ORDER-u,u),s.arraycopy(c,d,e.rinprebuf,MAX_ORDER-u,u)):(s.arraycopy(t,l+u-MAX_ORDER,e.linprebuf,0,MAX_ORDER),s.arraycopy(c,d+u-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(e){for(var t=function(e,t){var n,o=0;for(n=0;n<t;n++)o+=e[n];if(0==o)return GAIN_NOT_ENOUGH_SAMPLES;var r=0|Math.ceil(o*(1-.95));for(n=t;n-- >0&&!((r-=e[n])<=0););return 64.82-n/_.STEPS_per_dB}(e.A,e.A.length),n=0;n<e.A.length;n++)e.B[n]+=e.A[n],e.A[n]=0;for(n=0;n<MAX_ORDER;n++)e.linprebuf[n]=e.lstepbuf[n]=e.loutbuf[n]=e.rinprebuf[n]=e.rstepbuf[n]=e.routbuf[n]=0;return e.totsamp=0,e.lsum=e.rsum=0,t}}function v(){function e(e,t,n,o,r,a,i,l,s,c,d,u,m,f,p){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=o,this.st_lrm=r,this.st_s=a,this.masking_adj=i,this.masking_adj_short=l,this.ath_lower=s,this.ath_curve=c,this.ath_sensitivity=d,this.interch=u,this.safejoint=m,this.sfb21mod=f,this.msfix=p}function t(e,t,n,o,r,a,i,l,s,c,d,u,m,f){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=o,this.nsmsfix=r,this.st_lrm=a,this.st_s=i,this.nsbass=l,this.scale=s,this.masking_adj=c,this.ath_lower=d,this.ath_curve=u,this.interch=m,this.sfscale=f}var n;this.setModules=function(e){n=e};var o=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],r=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function a(e,t,n){var a=e.VBR==m.vbr_rh?o:r,i=e.VBR_q_frac,l=a[t],s=a[t+1],c=l;l.st_lrm=l.st_lrm+i*(s.st_lrm-l.st_lrm),l.st_s=l.st_s+i*(s.st_s-l.st_s),l.masking_adj=l.masking_adj+i*(s.masking_adj-l.masking_adj),l.masking_adj_short=l.masking_adj_short+i*(s.masking_adj_short-l.masking_adj_short),l.ath_lower=l.ath_lower+i*(s.ath_lower-l.ath_lower),l.ath_curve=l.ath_curve+i*(s.ath_curve-l.ath_curve),l.ath_sensitivity=l.ath_sensitivity+i*(s.ath_sensitivity-l.ath_sensitivity),l.interch=l.interch+i*(s.interch-l.interch),l.msfix=l.msfix+i*(s.msfix-l.msfix),function(e,t){0>t&&(t=0),9<t&&(t=9),e.VBR_q=t,e.VBR_q_frac=0}(e,c.vbr_q),0!=n?e.quant_comp=c.quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=c.quant_comp),0!=n?e.quant_comp_short=c.quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=c.quant_comp_s),0!=c.expY&&(e.experimentalY=0!=c.expY),0!=n?e.internal_flags.nsPsy.attackthre=c.st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=c.st_lrm),0!=n?e.internal_flags.nsPsy.attackthre_s=c.st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=c.st_s),0!=n?e.maskingadjust=c.masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=c.masking_adj),0!=n?e.maskingadjust_short=c.masking_adj_short:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=c.masking_adj_short),0!=n?e.ATHlower=-c.ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-c.ath_lower/10),0!=n?e.ATHcurve=c.ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=c.ath_curve),0!=n?e.athaa_sensitivity=c.ath_sensitivity:Math.abs(e.athaa_sensitivity- -1)>0||(e.athaa_sensitivity=c.ath_sensitivity),c.interch>0&&(0!=n?e.interChRatio=c.interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=c.interch)),c.safejoint>0&&(e.exp_nspsytune=e.exp_nspsytune|c.safejoint),c.sfb21mod>0&&(e.exp_nspsytune=e.exp_nspsytune|c.sfb21mod<<20),0!=n?e.msfix=c.msfix:Math.abs(e.msfix- -1)>0||(e.msfix=c.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=i)}var i=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function l(e,t,o){var r=t,a=n.nearestBitrateFullIndex(t);if(e.VBR=m.vbr_abr,e.VBR_mean_bitrate_kbps=r,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,e.VBR_mean_bitrate_kbps>320&&(e.disable_reservoir=!0),i[a].safejoint>0&&(e.exp_nspsytune=2|e.exp_nspsytune),i[a].sfscale>0&&(e.internal_flags.noise_shaping=2),Math.abs(i[a].nsbass)>0){var l=int(4*i[a].nsbass);l<0&&(l+=64),e.exp_nspsytune=e.exp_nspsytune|l<<2}return 0!=o?e.quant_comp=i[a].quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=i[a].quant_comp),0!=o?e.quant_comp_short=i[a].quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=i[a].quant_comp_s),0!=o?e.msfix=i[a].nsmsfix:Math.abs(e.msfix- -1)>0||(e.msfix=i[a].nsmsfix),0!=o?e.internal_flags.nsPsy.attackthre=i[a].st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=i[a].st_lrm),0!=o?e.internal_flags.nsPsy.attackthre_s=i[a].st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=i[a].st_s),0!=o?e.scale=i[a].scale:Math.abs(e.scale- -1)>0||(e.scale=i[a].scale),0!=o?e.maskingadjust=i[a].masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=i[a].masking_adj),i[a].masking_adj>0?0!=o?e.maskingadjust_short=.9*i[a].masking_adj:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=.9*i[a].masking_adj):0!=o?e.maskingadjust_short=1.1*i[a].masking_adj:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=1.1*i[a].masking_adj),0!=o?e.ATHlower=-i[a].ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-i[a].ath_lower/10),0!=o?e.ATHcurve=i[a].ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=i[a].ath_curve),0!=o?e.interChRatio=i[a].interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=i[a].interch),t}this.apply_preset=function(e,t,n){switch(t){case G.R3MIX:t=G.V3,e.VBR=m.vbr_mtrh;break;case G.MEDIUM:t=G.V4,e.VBR=m.vbr_rh;break;case G.MEDIUM_FAST:t=G.V4,e.VBR=m.vbr_mtrh;break;case G.STANDARD:t=G.V2,e.VBR=m.vbr_rh;break;case G.STANDARD_FAST:t=G.V2,e.VBR=m.vbr_mtrh;break;case G.EXTREME:t=G.V0,e.VBR=m.vbr_rh;break;case G.EXTREME_FAST:t=G.V0,e.VBR=m.vbr_mtrh;break;case G.INSANE:return t=320,e.preset=t,l(e,t,n),e.VBR=m.vbr_off,t}switch(e.preset=t,t){case G.V9:return a(e,9,n),t;case G.V8:return a(e,8,n),t;case G.V7:return a(e,7,n),t;case G.V6:return a(e,6,n),t;case G.V5:return a(e,5,n),t;case G.V4:return a(e,4,n),t;case G.V3:return a(e,3,n),t;case G.V2:return a(e,2,n),t;case G.V1:return a(e,1,n),t;case G.V0:return a(e,0,n),t}return 8<=t&&t<=320?l(e,t,n):(e.preset=0,t)}}function h(){var e=null;function n(e){this.bits=0|e}this.qupvt=null,this.setModules=function(t){this.qupvt=t,e=t};var o=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r(e,t,n,o,r,a){var i=.5946/t;for(e>>=1;0!=e--;)r[a++]=i>n[o++]?0:1,r[a++]=i>n[o++]?0:1}function a(t,n,o,r,a,i){var l=(t>>=1)%2;for(t>>=1;0!=t--;){var s,c,d,u,m,f,p,_;s=o[r++]*n,c=o[r++]*n,m=0|s,d=o[r++]*n,f=0|c,u=o[r++]*n,p=0|d,s+=e.adj43[m],_=0|u,c+=e.adj43[f],a[i++]=0|s,d+=e.adj43[p],a[i++]=0|c,u+=e.adj43[_],a[i++]=0|d,a[i++]=0|u}0!=l&&(m=0|(s=o[r++]*n),f=0|(c=o[r++]*n),s+=e.adj43[m],c+=e.adj43[f],a[i++]=0|s,a[i++]=0|c)}var i=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function c(e,t,n,o){var r=function(e,t,n){var o=0,r=0;do{var a=e[t++],i=e[t++];o<a&&(o=a),r<i&&(r=i)}while(t<n);return o<r&&(o=r),o}(e,t,n);switch(r){case 0:return r;case 1:return function(e,t,n,o){var r=0,a=k.ht[1].hlen;do{var i=2*e[t+0]+e[t+1];t+=2,r+=a[i]}while(t<n);return o.bits+=r,1}(e,t,n,o);case 2:case 3:return function(e,t,n,o,r){var a,i,l=0,s=k.ht[o].xlen;i=2==o?k.table23:k.table56;do{var c=e[t+0]*s+e[t+1];t+=2,l+=i[c]}while(t<n);return a=65535&l,(l>>=16)>a&&(l=a,o++),r.bits+=l,o}(e,t,n,i[r-1],o);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(e,t,n,o,r){var a=0,i=0,l=0,s=k.ht[o].xlen,c=k.ht[o].hlen,d=k.ht[o+1].hlen,u=k.ht[o+2].hlen;do{var m=e[t+0]*s+e[t+1];t+=2,a+=c[m],i+=d[m],l+=u[m]}while(t<n);var f=o;return a>i&&(a=i,f++),a>l&&(a=l,f=o+2),r.bits+=a,f}(e,t,n,i[r-1],o);default:if(r>M.IXMAX_VAL)return o.bits=M.LARGE_BITS,-1;var a,l;for(r-=15,a=24;a<32&&!(k.ht[a].linmax>=r);a++);for(l=a-8;l<24&&!(k.ht[l].linmax>=r);l++);return function(e,t,n,o,r,a){var i,l=65536*k.ht[o].xlen+k.ht[r].xlen,s=0;do{var c=e[t++],d=e[t++];0!=c&&(c>14&&(c=15,s+=l),c*=16),0!=d&&(d>14&&(d=15,s+=l),c+=d),s+=k.largetbl[c]}while(t<n);return i=65535&s,(s>>=16)>i&&(s=i,o=r),a.bits+=s,o}(e,t,n,l,a,o)}}function d(e,t,o,r,a,i,l,s){for(var d=t.big_values,u=2;u<L.SBMAX_l+1;u++){var m=e.scalefac_band.l[u];if(m>=d)break;var f=a[u-2]+t.count1bits;if(o.part2_3_length<=f)break;var p=new n(f),_=c(r,m,d,p);f=p.bits,o.part2_3_length<=f||(o.assign(t),o.part2_3_length=f,o.region0_count=i[u-2],o.region1_count=u-2-i[u-2],o.table_select[0]=l[u-2],o.table_select[1]=s[u-2],o.table_select[2]=_)}}this.noquant_count_bits=function(e,t,o){var r=t.l3_enc,a=Math.min(576,t.max_nonzero_coeff+2>>1<<1);for(null!=o&&(o.sfb_count1=0);a>1&&0==(r[a-1]|r[a-2]);a-=2);t.count1=a;for(var i=0,l=0;a>3;a-=4){var s;if((2147483647&(r[a-1]|r[a-2]|r[a-3]|r[a-4]))>1)break;s=2*(2*(2*r[a-4]+r[a-3])+r[a-2])+r[a-1],i+=k.t32l[s],l+=k.t33l[s]}var d=i;if(t.count1table_select=0,i>l&&(d=l,t.count1table_select=1),t.count1bits=d,t.big_values=a,0==a)return d;if(t.block_type==L.SHORT_TYPE)(i=3*e.scalefac_band.s[3])>t.big_values&&(i=t.big_values),l=t.big_values;else if(t.block_type==L.NORM_TYPE){if(i=t.region0_count=e.bv_scf[a-2],l=t.region1_count=e.bv_scf[a-1],l=e.scalefac_band.l[i+l+2],i=e.scalefac_band.l[i+1],l<a){var u=new n(d);t.table_select[2]=c(r,l,a,u),d=u.bits}}else t.region0_count=7,t.region1_count=L.SBMAX_l-1-7-1,(i=e.scalefac_band.l[8])>(l=a)&&(i=l);if(i=Math.min(i,a),l=Math.min(l,a),0<i&&(u=new n(d),t.table_select[0]=c(r,0,i,u),d=u.bits),i<l&&(u=new n(d),t.table_select[1]=c(r,i,l,u),d=u.bits),2==e.use_best_huffman&&(t.part2_3_length=d,best_huffman_divide(e,t),d=t.part2_3_length),null!=o&&t.block_type==L.NORM_TYPE){for(var m=0;e.scalefac_band.l[m]<t.big_values;)m++;o.sfb_count1=m}return d},this.count_bits=function(t,n,o,i){var s=o.l3_enc,c=M.IXMAX_VAL/e.IPOW20(o.global_gain);if(o.xrpow_max>c)return M.LARGE_BITS;if(function(t,n,o,i,s){var c,d,u,m=0,f=0,p=0,_=0,v=n,h=0,g=v,b=0,E=t,S=0;for(u=null!=s&&i.global_gain==s.global_gain,d=i.block_type==L.SHORT_TYPE?38:21,c=0;c<=d;c++){var k=-1;if((u||i.block_type==L.NORM_TYPE)&&(k=i.global_gain-(i.scalefac[c]+(0!=i.preflag?e.pretab[c]:0)<<i.scalefac_scale+1)-8*i.subblock_gain[i.window[c]]),u&&s.step[c]==k)0!=f&&(a(f,o,E,S,g,b),f=0),0!=p&&(r(p,o,E,S,g,b),p=0);else{var y,T=i.width[c];if(m+i.width[c]>i.max_nonzero_coeff&&(y=i.max_nonzero_coeff-m+1,l.fill(n,i.max_nonzero_coeff,576,0),(T=y)<0&&(T=0),c=d+1),0==f&&0==p&&(g=v,b=h,E=t,S=_),null!=s&&s.sfb_count1>0&&c>=s.sfb_count1&&s.step[c]>0&&k>=s.step[c]?(0!=f&&(a(f,o,E,S,g,b),f=0,g=v,b=h,E=t,S=_),p+=T):(0!=p&&(r(p,o,E,S,g,b),p=0,g=v,b=h,E=t,S=_),f+=T),T<=0){0!=p&&(r(p,o,E,S,g,b),p=0),0!=f&&(a(f,o,E,S,g,b),f=0);break}}c<=d&&(h+=i.width[c],_+=i.width[c],m+=i.width[c])}0!=f&&(a(f,o,E,S,g,b),f=0),0!=p&&(r(p,o,E,S,g,b),p=0)}(n,s,e.IPOW20(o.global_gain),o,i),0!=(2&t.substep_shaping))for(var d=0,u=o.global_gain+o.scalefac_scale,m=.634521682242439/e.IPOW20(u),f=0;f<o.sfbmax;f++){var p,_=o.width[f];if(0==t.pseudohalf[f])d+=_;else for(p=d,d+=_;p<d;++p)s[p]=n[p]>=m?s[p]:0}return this.noquant_count_bits(t,o,i)},this.best_huffman_divide=function(e,o){var r=new F,a=o.l3_enc,i=t(23),l=t(23),s=t(23),u=t(23);if(o.block_type!=L.SHORT_TYPE||1!=e.mode_gr){r.assign(o),o.block_type==L.NORM_TYPE&&(function(e,t,o,r,a,i,l){for(var s=t.big_values,d=0;d<=22;d++)r[d]=M.LARGE_BITS;for(d=0;d<16;d++){var u=e.scalefac_band.l[d+1];if(u>=s)break;var m=0,f=new n(m),p=c(o,0,u,f);m=f.bits;for(var _=0;_<8;_++){var v=e.scalefac_band.l[d+_+2];if(v>=s)break;var h=m,g=c(o,u,v,f=new n(h));h=f.bits,r[d+_]>h&&(r[d+_]=h,a[d+_]=d,i[d+_]=p,l[d+_]=g)}}}(e,o,a,i,l,s,u),d(e,r,o,a,i,l,s,u));var m=r.big_values;if(!(0==m||(a[m-2]|a[m-1])>1||(m=o.count1+2)>576)){r.assign(o),r.count1=m;for(var f=0,p=0;m>r.big_values;m-=4){var _=2*(2*(2*a[m-4]+a[m-3])+a[m-2])+a[m-1];f+=k.t32l[_],p+=k.t33l[_]}if(r.big_values=m,r.count1table_select=0,f>p&&(f=p,r.count1table_select=1),r.count1bits=f,r.block_type==L.NORM_TYPE)d(e,r,o,a,i,l,s,u);else{if(r.part2_3_length=f,(f=e.scalefac_band.l[8])>m&&(f=m),f>0){var v=new n(r.part2_3_length);r.table_select[0]=c(a,0,f,v),r.part2_3_length=v.bits}m>f&&(v=new n(r.part2_3_length),r.table_select[1]=c(a,f,m,v),r.part2_3_length=v.bits),o.part2_3_length>r.part2_3_length&&o.assign(r)}}}};var u=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],m=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],f=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],p=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];h.slen1_tab=f,h.slen2_tab=p,this.best_scalefac_store=function(t,n,o,r){var a,i,l,s,c=r.tt[n][o],d=0;for(l=0,a=0;a<c.sfbmax;a++){var _=c.width[a];for(l+=_,s=-_;s<0&&0==c.l3_enc[s+l];s++);0==s&&(c.scalefac[a]=d=-2)}if(0==c.scalefac_scale&&0==c.preflag){var v=0;for(a=0;a<c.sfbmax;a++)c.scalefac[a]>0&&(v|=c.scalefac[a]);if(0==(1&v)&&0!=v){for(a=0;a<c.sfbmax;a++)c.scalefac[a]>0&&(c.scalefac[a]>>=1);c.scalefac_scale=d=1}}if(0==c.preflag&&c.block_type!=L.SHORT_TYPE&&2==t.mode_gr){for(a=11;a<L.SBPSY_l&&!(c.scalefac[a]<e.pretab[a]&&-2!=c.scalefac[a]);a++);if(a==L.SBPSY_l){for(a=11;a<L.SBPSY_l;a++)c.scalefac[a]>0&&(c.scalefac[a]-=e.pretab[a]);c.preflag=d=1}}for(i=0;i<4;i++)r.scfsi[o][i]=0;for(2==t.mode_gr&&1==n&&r.tt[0][o].block_type!=L.SHORT_TYPE&&r.tt[1][o].block_type!=L.SHORT_TYPE&&(function(e,t){for(var n,o=t.tt[1][e],r=t.tt[0][e],a=0;a<k.scfsi_band.length-1;a++){for(n=k.scfsi_band[a];n<k.scfsi_band[a+1]&&!(r.scalefac[n]!=o.scalefac[n]&&o.scalefac[n]>=0);n++);if(n==k.scfsi_band[a+1]){for(n=k.scfsi_band[a];n<k.scfsi_band[a+1];n++)o.scalefac[n]=-1;t.scfsi[e][a]=1}}var i=0,l=0;for(n=0;n<11;n++)-1!=o.scalefac[n]&&(l++,i<o.scalefac[n]&&(i=o.scalefac[n]));for(var s=0,c=0;n<L.SBPSY_l;n++)-1!=o.scalefac[n]&&(c++,s<o.scalefac[n]&&(s=o.scalefac[n]));for(a=0;a<16;a++)if(i<u[a]&&s<m[a]){var d=f[a]*l+p[a]*c;o.part2_length>d&&(o.part2_length=d,o.scalefac_compress=a)}}(o,r),d=0),a=0;a<c.sfbmax;a++)-2==c.scalefac[a]&&(c.scalefac[a]=0);0!=d&&(2==t.mode_gr?this.scale_bitcount(c):this.scale_bitcount_lsf(t,c))};var _=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],v=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],g=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(t){var n,o,r,a=0,i=0,l=t.scalefac;if(t.block_type==L.SHORT_TYPE)r=_,0!=t.mixed_block_flag&&(r=v);else if(r=g,0==t.preflag){for(o=11;o<L.SBPSY_l&&!(l[o]<e.pretab[o]);o++);if(o==L.SBPSY_l)for(t.preflag=1,o=11;o<L.SBPSY_l;o++)l[o]-=e.pretab[o]}for(o=0;o<t.sfbdivide;o++)a<l[o]&&(a=l[o]);for(;o<t.sfbmax;o++)i<l[o]&&(i=l[o]);for(t.part2_length=M.LARGE_BITS,n=0;n<16;n++)a<u[n]&&i<m[n]&&t.part2_length>r[n]&&(t.part2_length=r[n],t.scalefac_compress=n);return t.part2_length==M.LARGE_BITS};var b=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(n,o){var r,a,i,l,c,d,u,m,f=t(4),p=o.scalefac;for(r=0!=o.preflag?2:0,u=0;u<4;u++)f[u]=0;if(o.block_type==L.SHORT_TYPE){a=1;var _=e.nr_of_sfb_block[r][a];for(m=0,i=0;i<4;i++)for(l=_[i]/3,u=0;u<l;u++,m++)for(c=0;c<3;c++)p[3*m+c]>f[i]&&(f[i]=p[3*m+c])}else for(a=0,_=e.nr_of_sfb_block[r][a],m=0,i=0;i<4;i++)for(l=_[i],u=0;u<l;u++,m++)p[m]>f[i]&&(f[i]=p[m]);for(d=!1,i=0;i<4;i++)f[i]>b[r][i]&&(d=!0);if(!d){var v,h,g,S;for(o.sfb_partition_table=e.nr_of_sfb_block[r][a],i=0;i<4;i++)o.slen[i]=E[f[i]];switch(v=o.slen[0],h=o.slen[1],g=o.slen[2],S=o.slen[3],r){case 0:o.scalefac_compress=(5*v+h<<4)+(g<<2)+S;break;case 1:o.scalefac_compress=400+(5*v+h<<2)+g;break;case 2:o.scalefac_compress=500+3*v+h;break;default:s.err.printf("intensity stereo not implemented yet\n")}}if(!d)for(o.part2_length=0,i=0;i<4;i++)o.part2_length+=o.slen[i]*o.sfb_partition_table[i];return d};var E=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var n,r=0;e.scalefac_band.l[++r]<t;);for(n=o[r][0];e.scalefac_band.l[n+1]>t;)n--;for(n<0&&(n=o[r][0]),e.bv_scf[t-2]=n,n=o[r][1];e.scalefac_band.l[n+e.bv_scf[t-2]+2]>t;)n--;n<0&&(n=o[r][1]),e.bv_scf[t-1]=n}}}function g(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var o,r=t.internal_flags,a=r.l3_side,i=e.getframebits(t);n.bits=(i-8*r.sideinfo_len)/r.mode_gr;var l=2048*r.mode_gr-8;t.brate>320?o=8*int(1e3*t.brate/(t.out_samplerate/1152)/8+.5):(o=11520,t.strict_ISO&&(o=8*int(32e4/(t.out_samplerate/1152)/8+.5))),r.ResvMax=o-i,r.ResvMax>l&&(r.ResvMax=l),(r.ResvMax<0||t.disable_reservoir)&&(r.ResvMax=0);var s=n.bits*r.mode_gr+Math.min(r.ResvSize,r.ResvMax);return s>o&&(s=o),a.resvDrain_pre=0,null!=r.pinfo&&(r.pinfo.mean_bits=n.bits/2,r.pinfo.resvsize=r.ResvSize),s},this.ResvMaxBits=function(e,t,n,o){var r,a=e.internal_flags,i=a.ResvSize,l=a.ResvMax;0!=o&&(i+=t),0!=(1&a.substep_shaping)&&(l*=.9),n.bits=t,10*i>9*l?(r=i-9*l/10,n.bits+=r,a.substep_shaping|=128):(r=0,a.substep_shaping&=127,e.disable_reservoir||0!=(1&a.substep_shaping)||(n.bits-=.1*t));var s=i<6*a.ResvMax/10?i:6*a.ResvMax/10;return(s-=r)<0&&(s=0),s},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n,o=e.l3_side;e.ResvSize+=t*e.mode_gr;var r=0;o.resvDrain_post=0,o.resvDrain_pre=0,0!=(n=e.ResvSize%8)&&(r+=n),(n=e.ResvSize-r-e.ResvMax)>0&&(r+=n);var a=Math.min(8*o.main_data_begin,r)/8;o.resvDrain_pre+=8*a,r-=8*a,e.ResvSize-=8*a,o.main_data_begin-=a,o.resvDrain_post+=r,e.ResvSize-=r}}function b(){var n=this,r=null,a=null,i=null,c=null;this.setModules=function(e,t,n,o){r=e,a=t,i=n,c=o};var d=null,u=0,m=0,f=0;function p(e){s.arraycopy(e.header[e.w_ptr].buf,0,d,m,e.sideinfo_len),m+=e.sideinfo_len,u+=8*e.sideinfo_len,e.w_ptr=e.w_ptr+1&$.MAX_HEADER_BUF-1}function v(e,t,n){for(;n>0;){var o;0==f&&(f=8,m++,e.header[e.w_ptr].write_timing==u&&p(e),d[m]=0),n-=o=Math.min(n,f),f-=o,d[m]|=t>>n<<f,u+=o}}function g(e,t,n){for(;n>0;){var o;0==f&&(f=8,d[++m]=0),n-=o=Math.min(n,f),f-=o,d[m]|=t>>n<<f,u+=o}}function b(e,t){var n,o=e.internal_flags;if(t>=8&&(v(o,76,8),t-=8),t>=8&&(v(o,65,8),t-=8),t>=8&&(v(o,77,8),t-=8),t>=8&&(v(o,69,8),t-=8),t>=32){var r=i.getLameShortVersion();if(t>=32)for(n=0;n<r.length&&t>=8;++n)t-=8,v(o,r.charAt(n),8)}for(;t>=1;t-=1)v(o,o.ancillary_flag,1),o.ancillary_flag^=e.disable_reservoir?0:1}function E(e,t,n){for(var o=e.header[e.h_ptr].ptr;n>0;){var r=Math.min(n,8-(7&o));n-=r,e.header[e.h_ptr].buf[o>>3]|=t>>n<<8-(7&o)-r,o+=r}e.header[e.h_ptr].ptr=o}function S(e,t){e<<=8;for(var n=0;n<8;n++)0!=(65536&((t<<=1)^(e<<=1)))&&(t^=32773);return t}function y(e,t){var n,o=k.ht[t.count1table_select+32],r=0,a=t.big_values,i=t.big_values;for(n=(t.count1-t.big_values)/4;n>0;--n){var l=0,s=0;0!=t.l3_enc[a+0]&&(s+=8,t.xr[i+0]<0&&l++),0!=t.l3_enc[a+1]&&(s+=4,l*=2,t.xr[i+1]<0&&l++),0!=t.l3_enc[a+2]&&(s+=2,l*=2,t.xr[i+2]<0&&l++),0!=t.l3_enc[a+3]&&(s++,l*=2,t.xr[i+3]<0&&l++),a+=4,i+=4,v(e,l+o.table[s],o.hlen[s]),r+=o.hlen[s]}return r}function T(e,t,n,o,r){var a=k.ht[t],i=0;if(0==t)return i;for(var l=n;l<o;l+=2){var s=0,c=0,d=a.xlen,u=a.xlen,m=0,f=r.l3_enc[l],p=r.l3_enc[l+1];0!=f&&(r.xr[l]<0&&m++,s--),t>15&&(f>14&&(m|=f-15<<1,c=d,f=15),p>14&&(m<<=d,m|=p-15,c+=d,p=15),u=16),0!=p&&(m<<=1,r.xr[l+1]<0&&m++,s--),f=f*u+p,c-=s,s+=a.hlen[f],v(e,a.table[f],s),v(e,m,c),i+=s+c}return i}function B(e,t){var n=3*e.scalefac_band.s[3];return n>t.big_values&&(n=t.big_values),T(e,t.table_select[0],0,n,t)+T(e,t.table_select[1],n,t.big_values,t)}function I(e,t){var n,o,r,a;n=t.big_values;var i=t.region0_count+1;return r=e.scalefac_band.l[i],i+=t.region1_count+1,r>n&&(r=n),(a=e.scalefac_band.l[i])>n&&(a=n),o=T(e,t.table_select[0],0,r,t),(o+=T(e,t.table_select[1],r,a,t))+T(e,t.table_select[2],a,n,t)}function A(){this.total=0}function C(e,t){var o,r,a,i,l,c=e.internal_flags;return l=c.w_ptr,-1==(i=c.h_ptr-1)&&(i=$.MAX_HEADER_BUF-1),o=c.header[i].write_timing-u,t.total=o,o>=0&&(r=1+i-l,i<l&&(r=1+i-l+$.MAX_HEADER_BUF),o-=8*r*c.sideinfo_len),o+=a=n.getframebits(e),t.total+=a,t.total%8!=0?t.total=1+t.total/8:t.total=t.total/8,t.total+=m+1,o<0&&s.err.println("strange error flushing buffer ... \n"),o}this.getframebits=function(e){var t,n=e.internal_flags;return t=0!=n.bitrate_index?k.bitrate_table[e.version][n.bitrate_index]:e.brate,8*(0|72e3*(e.version+1)*t/e.out_samplerate+n.padding)},this.CRC_writeheader=function(e,t){var n=65535;n=S(255&t[2],n),n=S(255&t[3],n);for(var o=6;o<e.sideinfo_len;o++)n=S(255&t[o],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var t,n,o=e.internal_flags;if(o.h_ptr,t=o.l3_side,!((n=C(e,new A))<0)){if(b(e,n),o.ResvSize=0,t.main_data_begin=0,o.findReplayGain){var a=r.GetTitleGain(o.rgdata);o.RadioGain=0|Math.floor(10*a+.5)}o.findPeakSample&&(o.noclipGainChange=0|Math.ceil(20*Math.log10(o.PeakSample/32767)*10),o.noclipGainChange>0&&(EQ(e.scale,1)||EQ(e.scale,0))?o.noclipScale=Math.floor(32767/o.PeakSample*100)/100:o.noclipScale=-1)}},this.add_dummy_byte=function(e,t,n){for(var o,r=e.internal_flags;n-- >0;)for(g(0,t,8),o=0;o<$.MAX_HEADER_BUF;++o)r.header[o].write_timing+=8},this.format_bitstream=function(e){var t,n=e.internal_flags;t=n.l3_side;var o=this.getframebits(e);b(e,t.resvDrain_pre),function(e,t){var n,o,r,a=e.internal_flags;if(n=a.l3_side,a.header[a.h_ptr].ptr=0,l.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),e.out_samplerate<16e3?E(a,4094,12):E(a,4095,12),E(a,e.version,1),E(a,1,2),E(a,e.error_protection?0:1,1),E(a,a.bitrate_index,4),E(a,a.samplerate_index,2),E(a,a.padding,1),E(a,e.extension,1),E(a,e.mode.ordinal(),2),E(a,a.mode_ext,2),E(a,e.copyright,1),E(a,e.original,1),E(a,e.emphasis,2),e.error_protection&&E(a,0,16),1==e.version){for(E(a,n.main_data_begin,9),2==a.channels_out?E(a,n.private_bits,3):E(a,n.private_bits,5),r=0;r<a.channels_out;r++){var i;for(i=0;i<4;i++)E(a,n.scfsi[r][i],1)}for(o=0;o<2;o++)for(r=0;r<a.channels_out;r++)E(a,(c=n.tt[o][r]).part2_3_length+c.part2_length,12),E(a,c.big_values/2,9),E(a,c.global_gain,8),E(a,c.scalefac_compress,4),c.block_type!=L.NORM_TYPE?(E(a,1,1),E(a,c.block_type,2),E(a,c.mixed_block_flag,1),14==c.table_select[0]&&(c.table_select[0]=16),E(a,c.table_select[0],5),14==c.table_select[1]&&(c.table_select[1]=16),E(a,c.table_select[1],5),E(a,c.subblock_gain[0],3),E(a,c.subblock_gain[1],3),E(a,c.subblock_gain[2],3)):(E(a,0,1),14==c.table_select[0]&&(c.table_select[0]=16),E(a,c.table_select[0],5),14==c.table_select[1]&&(c.table_select[1]=16),E(a,c.table_select[1],5),14==c.table_select[2]&&(c.table_select[2]=16),E(a,c.table_select[2],5),E(a,c.region0_count,4),E(a,c.region1_count,3)),E(a,c.preflag,1),E(a,c.scalefac_scale,1),E(a,c.count1table_select,1)}else for(E(a,n.main_data_begin,8),E(a,n.private_bits,a.channels_out),o=0,r=0;r<a.channels_out;r++){var c;E(a,(c=n.tt[o][r]).part2_3_length+c.part2_length,12),E(a,c.big_values/2,9),E(a,c.global_gain,8),E(a,c.scalefac_compress,9),c.block_type!=L.NORM_TYPE?(E(a,1,1),E(a,c.block_type,2),E(a,c.mixed_block_flag,1),14==c.table_select[0]&&(c.table_select[0]=16),E(a,c.table_select[0],5),14==c.table_select[1]&&(c.table_select[1]=16),E(a,c.table_select[1],5),E(a,c.subblock_gain[0],3),E(a,c.subblock_gain[1],3),E(a,c.subblock_gain[2],3)):(E(a,0,1),14==c.table_select[0]&&(c.table_select[0]=16),E(a,c.table_select[0],5),14==c.table_select[1]&&(c.table_select[1]=16),E(a,c.table_select[1],5),14==c.table_select[2]&&(c.table_select[2]=16),E(a,c.table_select[2],5),E(a,c.region0_count,4),E(a,c.region1_count,3)),E(a,c.scalefac_scale,1),E(a,c.count1table_select,1)}e.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);var d=a.h_ptr;a.h_ptr=d+1&$.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[d].write_timing+t,a.h_ptr==a.w_ptr&&s.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}(e,o);var r=8*n.sideinfo_len;if(r+=function(e){var t,n,o,r,a=0,i=e.internal_flags,l=i.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<i.channels_out;n++){var s=l.tt[t][n],c=h.slen1_tab[s.scalefac_compress],d=h.slen2_tab[s.scalefac_compress];for(r=0,o=0;o<s.sfbdivide;o++)-1!=s.scalefac[o]&&(v(i,s.scalefac[o],c),r+=c);for(;o<s.sfbmax;o++)-1!=s.scalefac[o]&&(v(i,s.scalefac[o],d),r+=d);s.block_type==L.SHORT_TYPE?r+=B(i,s):r+=I(i,s),a+=r+=y(i,s)}else for(t=0,n=0;n<i.channels_out;n++){var u,m,f=0;if(r=0,o=0,m=0,(s=l.tt[t][n]).block_type==L.SHORT_TYPE){for(;m<4;m++){var p=s.sfb_partition_table[m]/3,_=s.slen[m];for(u=0;u<p;u++,o++)v(i,Math.max(s.scalefac[3*o+0],0),_),v(i,Math.max(s.scalefac[3*o+1],0),_),v(i,Math.max(s.scalefac[3*o+2],0),_),f+=3*_}r+=B(i,s)}else{for(;m<4;m++)for(p=s.sfb_partition_table[m],_=s.slen[m],u=0;u<p;u++,o++)v(i,Math.max(s.scalefac[o],0),_),f+=_;r+=I(i,s)}a+=f+(r+=y(i,s))}return a}(e),b(e,t.resvDrain_post),r+=t.resvDrain_post,t.main_data_begin+=(o-r)/8,C(e,new A)!=n.ResvSize&&s.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*t.main_data_begin!=n.ResvSize&&(s.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*t.main_data_begin,n.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*n.sideinfo_len,r-t.resvDrain_post-8*n.sideinfo_len,r,r%8,o),s.err.println("This is a fatal error.  It has several possible causes:"),s.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),s.err.println(" 9%%  Your system is overclocked"),s.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=8*t.main_data_begin),u>1e9){var a;for(a=0;a<$.MAX_HEADER_BUF;++a)n.header[a].write_timing-=u;u=0}return 0},this.copy_buffer=function(e,n,i,l,u){var p=m+1;if(p<=0)return 0;if(0!=l&&p>l)return-1;if(s.arraycopy(d,0,n,i,p),m=-1,f=0,0!=u){var v=t(1);if(v[0]=e.nMusicCRC,c.updateMusicCRC(v,n,i,p),e.nMusicCRC=v[0],p>0&&(e.VBR_seek_table.nBytesWritten+=p),e.decode_on_the_fly)for(var h,g=o([2,1152]),b=p,E=-1;0!=E;)if(E=a.hip_decode1_unclipped(e.hip,n,i,b,g[0],g[1]),b=0,-1==E&&(E=0),E>0){if(e.findPeakSample){for(h=0;h<E;h++)g[0][h]>e.PeakSample?e.PeakSample=g[0][h]:-g[0][h]>e.PeakSample&&(e.PeakSample=-g[0][h]);if(e.channels_out>1)for(h=0;h<E;h++)g[1][h]>e.PeakSample?e.PeakSample=g[1][h]:-g[1][h]>e.PeakSample&&(e.PeakSample=-g[1][h])}if(e.findReplayGain&&r.AnalyzeSamples(e.rgdata,g[0],0,g[1],0,E,e.channels_out)==_.GAIN_ANALYSIS_ERROR)return-6}}return p},this.init_bit_stream_w=function(t){d=e(G.LAME_MAXMP3BUFFER),t.h_ptr=t.w_ptr=0,t.header[t.h_ptr].write_timing=0,m=-1,f=0,u=0}}function E(){var t,n,o;this.setModules=function(e,r,a){t=e,n=r,o=a};var r=E.NUMTOCENTRIES,a=E.MAXFRAMESIZE,i=r+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,c="Xing",u="Info",f=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function p(e,t){var n=255&e[t+0];return n<<=8,n|=255&e[t+1],n<<=8,n|=255&e[t+2],(n<<=8)|255&e[t+3]}function _(e,t,n){e[t+0]=255&n>>24,e[t+1]=255&n>>16,e[t+2]=255&n>>8,e[t+3]=255&n}function v(e,t,n){e[t+0]=255&n>>8,e[t+1]=255&n}function h(e,t,n){return 255&(e<<t|n&~(-1<<t))}function g(e,n){var o=e.internal_flags;n[0]=h(n[0],8,255),n[1]=h(n[1],3,7),n[1]=h(n[1],1,e.out_samplerate<16e3?0:1),n[1]=h(n[1],1,e.version),n[1]=h(n[1],2,1),n[1]=h(n[1],1,e.error_protection?0:1),n[2]=h(n[2],4,o.bitrate_index),n[2]=h(n[2],2,o.samplerate_index),n[2]=h(n[2],1,0),n[2]=h(n[2],1,e.extension),n[3]=h(n[3],2,e.mode.ordinal()),n[3]=h(n[3],2,o.mode_ext),n[3]=h(n[3],1,e.copyright),n[3]=h(n[3],1,e.original),n[3]=h(n[3],2,e.emphasis),n[0]=255;var r,a,i=241&n[1];r=1==e.version?128:e.out_samplerate<16e3?32:64,e.VBR==m.vbr_off&&(r=e.brate),a=e.free_format?0:255&16*t.BitrateIndex(r,e.version,e.out_samplerate),1==e.version?(n[1]=255&(10|i),i=13&n[2],n[2]=255&(a|i)):(n[1]=255&(2|i),i=13&n[2],n[2]=255&(a|i))}function b(e,t){return t>>8^f[255&(t^e)]}this.addVbrFrame=function(e){var t=e.internal_flags,n=k.bitrate_table[e.version][t.bitrate_index];!function(e,t){if(e.nVbrNumFrames++,e.sum+=t,e.seen++,!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(var n=1;n<e.size;n+=2)e.bag[n/2]=e.bag[n];e.want*=2,e.pos/=2}}(t.VBR_seek_table,n)},this.getVbrTag=function(e){var t=new VBRTagData,n=0;t.flags=0;var o=e[n+1]>>3&1,a=e[n+2]>>2&3,i=e[n+3]>>6&3,l=e[n+2]>>4&15;if(l=k.bitrate_table[o][l],e[n+1]>>4==14?t.samprate=k.samplerate_table[2][a]:t.samprate=k.samplerate_table[o][a],!function(e,t){return new String(e,t,c.length(),null).equals(c)||new String(e,t,u.length(),null).equals(u)}(e,n+=0!=o?3!=i?36:21:3!=i?21:13))return null;n+=4,t.hId=o;var s=t.flags=p(e,n);if(n+=4,0!=(1&s)&&(t.frames=p(e,n),n+=4),0!=(2&s)&&(t.bytes=p(e,n),n+=4),0!=(4&s)){if(null!=t.toc)for(var d=0;d<r;d++)t.toc[d]=e[n+d];n+=r}t.vbrScale=-1,0!=(8&s)&&(t.vbrScale=p(e,n),n+=4),t.headersize=72e3*(o+1)*l/t.samprate;var m=e[(n+=21)+0]<<4;m+=e[n+1]>>4;var f=(15&e[n+1])<<8;return(m<0||m>3e3)&&(m=-1),((f+=255&e[n+2])<0||f>3e3)&&(f=-1),t.encDelay=m,t.encPadding=f,t},this.InitVbrTag=function(t){var o,r=t.internal_flags;o=1==t.version?128:t.out_samplerate<16e3?32:64,t.VBR==m.vbr_off&&(o=t.brate);var l=72e3*(t.version+1)*o/t.out_samplerate,s=r.sideinfo_len+i;if(r.VBR_seek_table.TotalFrameSize=l,l<s||l>a)t.bWriteVbrTag=!1;else{r.VBR_seek_table.nVbrNumFrames=0,r.VBR_seek_table.nBytesWritten=0,r.VBR_seek_table.sum=0,r.VBR_seek_table.seen=0,r.VBR_seek_table.want=1,r.VBR_seek_table.pos=0,null==r.VBR_seek_table.bag&&(r.VBR_seek_table.bag=new int[400],r.VBR_seek_table.size=400);var c=e(a);g(t,c);for(var d=r.VBR_seek_table.TotalFrameSize,u=0;u<d;++u)n.add_dummy_byte(t,255&c[u],1)}},this.updateMusicCRC=function(e,t,n,o){for(var r=0;r<o;++r)e[0]=b(t[n+r],e[0])},this.getLameTagFrame=function(t,a){var i=t.internal_flags;if(!t.bWriteVbrTag)return 0;if(i.Class_ID!=G.LAME_ID)return 0;if(i.VBR_seek_table.pos<=0)return 0;if(a.length<i.VBR_seek_table.TotalFrameSize)return i.VBR_seek_table.TotalFrameSize;l.fill(a,0,i.VBR_seek_table.TotalFrameSize,0),g(t,a);var f=e(r);if(t.free_format)for(var p=1;p<r;++p)f[p]=255&255*p/100;else!function(e,t){if(!(e.pos<=0))for(var n=1;n<r;++n){var o=n/r,a=0|Math.floor(o*e.pos);a>e.pos-1&&(a=e.pos-1);var i=0|256*e.bag[a]/e.sum;i>255&&(i=255),t[n]=255&i}}(i.VBR_seek_table,f);var h=i.sideinfo_len;t.error_protection&&(h-=2),t.VBR==m.vbr_off?(a[h++]=255&u.charAt(0),a[h++]=255&u.charAt(1),a[h++]=255&u.charAt(2),a[h++]=255&u.charAt(3)):(a[h++]=255&c.charAt(0),a[h++]=255&c.charAt(1),a[h++]=255&c.charAt(2),a[h++]=255&c.charAt(3)),_(a,h,15),_(a,h+=4,i.VBR_seek_table.nVbrNumFrames),h+=4;var E=i.VBR_seek_table.nBytesWritten+i.VBR_seek_table.TotalFrameSize;_(a,h,0|E),h+=4,s.arraycopy(f,0,a,h,f.length),h+=f.length,t.error_protection&&n.CRC_writeheader(i,a);var S=0;for(p=0;p<h;p++)S=b(a[p],S);return h+=function(e,t,n,r,a){var i,l,s,c,u,m,f=e.internal_flags,p=0,h=e.encoder_delay,g=e.encoder_padding,E=100-10*e.VBR_q-e.quality,S=o.getLameVeryShortVersion(),k=[1,5,3,2,4,0,3],y=0|(e.lowpassfreq/100+.5>255?255:e.lowpassfreq/100+.5),T=0,B=0,I=e.internal_flags.noise_shaping,A=0,C=0,R=0!=(1&e.exp_nspsytune),x=0!=(2&e.exp_nspsytune),M=!1,w=!1,F=e.internal_flags.nogap_total,N=e.internal_flags.nogap_current,D=e.ATHtype;switch(e.VBR){case vbr_abr:u=e.VBR_mean_bitrate_kbps;break;case vbr_off:u=e.brate;break;default:u=e.VBR_min_bitrate_kbps}switch(i=0+(e.VBR.ordinal()<k.length?k[e.VBR.ordinal()]:0),f.findReplayGain&&(f.RadioGain>510&&(f.RadioGain=510),f.RadioGain<-510&&(f.RadioGain=-510),B=8192,B|=3072,f.RadioGain>=0?B|=f.RadioGain:(B|=512,B|=-f.RadioGain)),f.findPeakSample&&(T=Math.abs(0|f.PeakSample/32767*Math.pow(2,23)+.5)),-1!=F&&(N>0&&(w=!0),N<F-1&&(M=!0)),c=D+((R?1:0)<<4)+((x?1:0)<<5)+((M?1:0)<<6)+((w?1:0)<<7),E<0&&(E=0),e.mode){case MONO:A=0;break;case STEREO:A=1;break;case DUAL_CHANNEL:A=2;break;case JOINT_STEREO:A=e.force_ms?4:3;break;case NOT_SET:default:A=7}m=e.in_samplerate<=32e3?0:48e3==e.in_samplerate?2:e.in_samplerate>48e3?3:1,(e.short_blocks==d.short_block_forced||e.short_blocks==d.short_block_dispensed||-1==e.lowpassfreq&&-1==e.highpassfreq||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||0==D||e.in_samplerate<=32e3)&&(C=1),l=I+(A<<2)+(C<<5)+(m<<6),s=f.nMusicCRC,_(n,r+p,E),p+=4;for(var V=0;V<9;V++)n[r+p+V]=255&S.charAt(V);n[r+(p+=9)]=255&i,n[r+ ++p]=255&y,_(n,r+ ++p,T),v(n,r+(p+=4),B),v(n,r+(p+=2),0),n[r+(p+=2)]=255&c,n[r+ ++p]=u>=255?255:255&u,n[r+ ++p]=255&h>>4,n[r+p+1]=255&(h<<4)+(g>>8),n[r+p+2]=255&g,n[r+(p+=3)]=255&l,p++,n[r+p++]=0,v(n,r+p,e.preset),_(n,r+(p+=2),t),v(n,r+(p+=4),s),p+=2;for(var O=0;O<p;O++)a=b(n[r+O],a);return v(n,r+p,a),p+2}(t,E,a,h,S),i.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(t,n){if(t.internal_flags.VBR_seek_table.pos<=0)return-1;if(n.seek(n.length()),0==n.length())return-1;var o=function(t){t.seek(0);var n=e(10);return t.readFully(n),new String(n,"ISO-8859-1").startsWith("ID3")?0:((127&n[6])<<21|(127&n[7])<<14|(127&n[8])<<7|127&n[9])+n.length}(n);n.seek(o);var r=e(a),i=getLameTagFrame(t,r);return i>r.length?-1:(i<1||n.write(r,0,i),0)}}function S(e,t,n,o){this.xlen=e,this.linmax=t,this.table=n,this.hlen=o}u.MAX_VALUE=34028235e31,m.vbr_off=new m(0),m.vbr_mt=new m(1),m.vbr_rh=new m(2),m.vbr_abr=new m(3),m.vbr_mtrh=new m(4),m.vbr_default=m.vbr_mtrh,f.STEREO=new f(0),f.JOINT_STEREO=new f(1),f.DUAL_CHANNEL=new f(2),f.MONO=new f(3),f.NOT_SET=new f(4),_.STEPS_per_dB=100,_.MAX_dB=120,_.GAIN_NOT_ENOUGH_SAMPLES=-24601,_.GAIN_ANALYSIS_ERROR=0,_.GAIN_ANALYSIS_OK=1,_.INIT_GAIN_ANALYSIS_ERROR=0,_.INIT_GAIN_ANALYSIS_OK=1,_.YULE_ORDER=10,_.MAX_ORDER=_.YULE_ORDER,_.MAX_SAMP_FREQ=48e3,_.RMS_WINDOW_TIME_NUMERATOR=1,_.RMS_WINDOW_TIME_DENOMINATOR=20,_.MAX_SAMPLES_PER_WINDOW=_.MAX_SAMP_FREQ*_.RMS_WINDOW_TIME_NUMERATOR/_.RMS_WINDOW_TIME_DENOMINATOR+1,b.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},b.NEQ=function(e,t){return!b.EQ(e,t)},E.NUMTOCENTRIES=100,E.MAXFRAMESIZE=2880;var k={};function y(e){this.bits=e}function T(){this.setModules=function(e,t){}}function B(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function I(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=f.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function A(){this.linprebuf=n(2*_.MAX_ORDER),this.linpre=0,this.lstepbuf=n(_.MAX_SAMPLES_PER_WINDOW+_.MAX_ORDER),this.lstep=0,this.loutbuf=n(_.MAX_SAMPLES_PER_WINDOW+_.MAX_ORDER),this.lout=0,this.rinprebuf=n(2*_.MAX_ORDER),this.rinpre=0,this.rstepbuf=n(_.MAX_SAMPLES_PER_WINDOW+_.MAX_ORDER),this.rstep=0,this.routbuf=n(_.MAX_SAMPLES_PER_WINDOW+_.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=t(0|_.STEPS_per_dB*_.MAX_dB),this.B=t(0|_.STEPS_per_dB*_.MAX_dB)}function C(e){var o=e;this.quantize=o,this.iteration_loop=function(e,o,r,a){var i,l=e.internal_flags,s=n(N.SFBMAX),c=n(576),d=t(2),u=0,m=l.l3_side,f=new y(u);this.quantize.rv.ResvFrameBegin(e,f),u=f.bits;for(var p=0;p<l.mode_gr;p++){i=this.quantize.qupvt.on_pe(e,o,d,u,p,p),l.mode_ext==L.MPG_MD_MS_LR&&(this.quantize.ms_convert(l.l3_side,p),this.quantize.qupvt.reduce_side(d,r[p],u,i));for(var _=0;_<l.channels_out;_++){var v,h,g=m.tt[p][_];g.block_type!=L.SHORT_TYPE?(v=0,h=l.PSY.mask_adjust-v):(v=0,h=l.PSY.mask_adjust_short-v),l.masking_lower=Math.pow(10,.1*h),this.quantize.init_outer_loop(l,g),this.quantize.init_xrpow(l,g,c)&&(this.quantize.qupvt.calc_xmin(e,a[p][_],g,s),this.quantize.outer_loop(e,g,s,c,_,d[_])),this.quantize.iteration_finish_one(l,p,_)}}this.quantize.rv.ResvFrameEnd(l,u)}}function R(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=n(L.SBMAX_l),this.s=n(L.SBMAX_s),this.psfb21=n(L.PSFB21),this.psfb12=n(L.PSFB12),this.cb_l=n(L.CBANDS),this.cb_s=n(L.CBANDS),this.eql_w=n(L.BLKSIZE/2)}function x(e,n,o,r){this.l=t(1+L.SBMAX_l),this.s=t(1+L.SBMAX_s),this.psfb21=t(1+L.PSFB21),this.psfb12=t(1+L.PSFB12);var a=this.l,i=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],s.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),s.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),s.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),s.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function M(){var e=null,o=null,r=null;this.setModules=function(t,n,a){e=t,o=n,r=a},this.IPOW20=function(e){return f[e]};var a=M.IXMAX_VAL+2,i=M.Q_MAX,l=M.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var s=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=s,this.sfBandIndex=[new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var d=n(i+l+1),f=n(i),p=n(a),_=n(a);function v(e,t){var n=r.ATHformula(t,e);return n-=100,Math.pow(10,n/10+e.ATHlower)}function h(e){this.s=e}this.adj43=_,this.iteration_init=function(t){var n,o=t.internal_flags,r=o.l3_side;if(0==o.iteration_init_init){for(o.iteration_init_init=1,r.main_data_begin=0,function(e){for(var t=e.internal_flags.ATH.l,n=e.internal_flags.ATH.psfb21,o=e.internal_flags.ATH.s,r=e.internal_flags.ATH.psfb12,a=e.internal_flags,i=e.out_samplerate,l=0;l<L.SBMAX_l;l++){var s=a.scalefac_band.l[l],c=a.scalefac_band.l[l+1];t[l]=u.MAX_VALUE;for(var d=s;d<c;d++){var m=v(e,d*i/1152);t[l]=Math.min(t[l],m)}}for(l=0;l<L.PSFB21;l++)for(s=a.scalefac_band.psfb21[l],c=a.scalefac_band.psfb21[l+1],n[l]=u.MAX_VALUE,d=s;d<c;d++)m=v(e,d*i/1152),n[l]=Math.min(n[l],m);for(l=0;l<L.SBMAX_s;l++){for(s=a.scalefac_band.s[l],c=a.scalefac_band.s[l+1],o[l]=u.MAX_VALUE,d=s;d<c;d++)m=v(e,d*i/384),o[l]=Math.min(o[l],m);o[l]*=a.scalefac_band.s[l+1]-a.scalefac_band.s[l]}for(l=0;l<L.PSFB12;l++){for(s=a.scalefac_band.psfb12[l],c=a.scalefac_band.psfb12[l+1],r[l]=u.MAX_VALUE,d=s;d<c;d++)m=v(e,d*i/384),r[l]=Math.min(r[l],m);r[l]*=a.scalefac_band.s[13]-a.scalefac_band.s[12]}if(e.noATH){for(l=0;l<L.SBMAX_l;l++)t[l]=1e-20;for(l=0;l<L.PSFB21;l++)n[l]=1e-20;for(l=0;l<L.SBMAX_s;l++)o[l]=1e-20;for(l=0;l<L.PSFB12;l++)r[l]=1e-20}a.ATH.floor=10*Math.log10(v(e,-1))}(t),p[0]=0,n=1;n<a;n++)p[n]=Math.pow(n,4/3);for(n=0;n<a-1;n++)_[n]=n+1-Math.pow(.5*(p[n]+p[n+1]),.75);for(_[n]=.5,n=0;n<i;n++)f[n]=Math.pow(2,-.1875*(n-210));for(n=0;n<=i+l;n++)d[n]=Math.pow(2,.25*(n-210-l));var s,c,m,h;for(e.huffman_init(o),(n=t.exp_nspsytune>>2&63)>=32&&(n-=64),s=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>8&63)>=32&&(n-=64),c=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>14&63)>=32&&(n-=64),m=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>20&63)>=32&&(n-=64),h=m*Math.pow(10,n/4/10),n=0;n<L.SBMAX_l;n++)g=n<=6?s:n<=13?c:n<=20?m:h,o.nsPsy.longfact[n]=g;for(n=0;n<L.SBMAX_s;n++){var g;g=n<=5?s:n<=10?c:n<=11?m:h,o.nsPsy.shortfact[n]=g}}},this.on_pe=function(e,n,r,a,i,l){var s,c,d=e.internal_flags,u=0,m=t(2),f=new y(u),p=o.ResvMaxBits(e,a,f,l),_=(u=f.bits)+p;for(_>$.MAX_BITS_PER_GRANULE&&(_=$.MAX_BITS_PER_GRANULE),s=0,c=0;c<d.channels_out;++c)r[c]=Math.min($.MAX_BITS_PER_CHANNEL,u/d.channels_out),m[c]=0|r[c]*n[i][c]/700-r[c],m[c]>3*a/4&&(m[c]=3*a/4),m[c]<0&&(m[c]=0),m[c]+r[c]>$.MAX_BITS_PER_CHANNEL&&(m[c]=Math.max(0,$.MAX_BITS_PER_CHANNEL-r[c])),s+=m[c];if(s>p)for(c=0;c<d.channels_out;++c)m[c]=p*m[c]/s;for(c=0;c<d.channels_out;++c)r[c]+=m[c],p-=m[c];for(s=0,c=0;c<d.channels_out;++c)s+=r[c];if(s>$.MAX_BITS_PER_GRANULE)for(c=0;c<d.channels_out;++c)r[c]*=$.MAX_BITS_PER_GRANULE,r[c]/=s,r[c];return _},this.reduce_side=function(e,t,n,o){var r=.33*(.5-t)/.5;r<0&&(r=0),r>.5&&(r=.5);var a=0|.5*r*(e[0]+e[1]);a>$.MAX_BITS_PER_CHANNEL-e[0]&&(a=$.MAX_BITS_PER_CHANNEL-e[0]),a<0&&(a=0),e[1]>=125&&(e[1]-a>125?(e[0]<n&&(e[0]+=a),e[1]-=a):(e[0]+=e[1]-125,e[1]=125)),(a=e[0]+e[1])>o&&(e[0]=o*e[0]/a,e[1]=o*e[1]/a)},this.athAdjust=function(e,t,n){var o=90.30873362,r=c.FAST_LOG10_X(t,10),a=e*e,i=0;return r-=n,a>1e-20&&(i=1+c.FAST_LOG10_X(a,10/o)),i<0&&(i=0),r*=i,r+=n+o-94.82444863,Math.pow(10,.1*r)},this.calc_xmin=function(e,t,n,o){var r,a=0,i=e.internal_flags,l=0,s=0,c=i.ATH,d=n.xr,u=e.VBR==m.vbr_mtrh?1:0,f=i.masking_lower;for(e.VBR!=m.vbr_mtrh&&e.VBR!=m.vbr_mt||(f=1),r=0;r<n.psy_lmax;r++){k=(S=e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh?athAdjust(c.adjust,c.l[r],c.floor):c.adjust*c.l[r])/(h=n.width[r]),y=2220446049250313e-31,A=h>>1,I=0;do{I+=C=d[l]*d[l],y+=C<k?C:k,I+=R=d[++l]*d[l],y+=R<k?R:k,l++}while(--A>0);I>S&&s++,r==L.SBPSY_l&&y<(B=S*i.nsPsy.longfact[r])&&(y=B),0!=u&&(S=y),e.ATHonly||(T=t.en.l[r])>0&&(B=I*t.thm.l[r]*f/T,0!=u&&(B*=i.nsPsy.longfact[r]),S<B&&(S=B)),o[a++]=0!=u?S:S*i.nsPsy.longfact[r]}var p=575;if(n.block_type!=L.SHORT_TYPE)for(var _=576;0!=_--&&b.EQ(d[_],0);)p=_;n.max_nonzero_coeff=p;for(var v=n.sfb_smin;r<n.psymax;v++,r+=3){var h,g,E;for(E=e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh?athAdjust(c.adjust,c.s[v],c.floor):c.adjust*c.s[v],h=n.width[r],g=0;g<3;g++){var S,k,y,T,B,I=0,A=h>>1;k=E/h,y=2220446049250313e-31;do{var C,R;I+=C=d[l]*d[l],y+=C<k?C:k,I+=R=d[++l]*d[l],y+=R<k?R:k,l++}while(--A>0);I>E&&s++,v==L.SBPSY_s&&y<(B=E*i.nsPsy.shortfact[v])&&(y=B),S=0!=u?y:E,e.ATHonly||e.ATHshort||(T=t.en.s[v][g])>0&&(B=I*t.thm.s[v][g]*f/T,0!=u&&(B*=i.nsPsy.shortfact[v]),S<B&&(S=B)),o[a++]=0!=u?S:S*i.nsPsy.shortfact[v]}e.useTemporal&&(o[a-3]>o[a-3+1]&&(o[a-3+1]+=(o[a-3]-o[a-3+1])*i.decay),o[a-3+1]>o[a-3+2]&&(o[a-3+2]+=(o[a-3+1]-o[a-3+2])*i.decay))}return s},this.calc_noise_core=function(e,t,o,r){var a=0,i=t.s,l=e.l3_enc;if(i>e.count1)for(;0!=o--;)c=e.xr[i],i++,a+=c*c,c=e.xr[i],i++,a+=c*c;else if(i>e.big_values){var s=n(2);for(s[0]=0,s[1]=r;0!=o--;)c=Math.abs(e.xr[i])-s[l[i]],i++,a+=c*c,c=Math.abs(e.xr[i])-s[l[i]],i++,a+=c*c}else for(;0!=o--;){var c;c=Math.abs(e.xr[i])-p[l[i]]*r,i++,a+=c*c,c=Math.abs(e.xr[i])-p[l[i]]*r,i++,a+=c*c}return t.s=i,a},this.calc_noise=function(e,t,n,o,r){var a,i,l=0,u=0,m=0,f=0,p=0,_=-20,v=0,g=e.scalefac,b=0;for(o.over_SSD=0,a=0;a<e.psymax;a++){var E,S=e.global_gain-(g[b++]+(0!=e.preflag?s[a]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[a]],k=0;if(null!=r&&r.step[a]==S)k=r.noise[a],v+=e.width[a],n[l++]=k/t[u++],k=r.noise_log[a];else{var y,T=d[S+M.Q_MAX2];i=e.width[a]>>1,v+e.width[a]>e.max_nonzero_coeff&&(i=(y=e.max_nonzero_coeff-v+1)>0?y>>1:0);var B=new h(v);k=this.calc_noise_core(e,B,i,T),v=B.s,null!=r&&(r.step[a]=S,r.noise[a]=k),k=n[l++]=k/t[u++],k=c.FAST_LOG10(Math.max(k,1e-20)),null!=r&&(r.noise_log[a]=k)}null!=r&&(r.global_gain=e.global_gain),p+=k,k>0&&(E=Math.max(0|10*k+.5,1),o.over_SSD+=E*E,m++,f+=k),_=Math.max(_,k)}return o.over_count=m,o.tot_noise=p,o.over_noise=f,o.max_noise=_,m},this.set_pinfo=function(e,t,o,r,a){var i,l,c,d,u,m=e.internal_flags,f=0==t.scalefac_scale?.5:1,p=t.scalefac,_=n(N.SFBMAX),v=n(N.SFBMAX),h=new B;calc_xmin(e,o,t,_),calc_noise(t,_,v,h,null);var g=0;for(l=t.sfb_lmax,t.block_type!=L.SHORT_TYPE&&0==t.mixed_block_flag&&(l=22),i=0;i<l;i++){var b=m.scalefac_band.l[i],E=(S=m.scalefac_band.l[i+1])-b;for(d=0;g<S;g++)d+=t.xr[g]*t.xr[g];d/=E,u=1e15,m.pinfo.en[r][a][i]=u*d,m.pinfo.xfsf[r][a][i]=u*_[i]*v[i]/E,o.en.l[i]>0&&!e.ATHonly?d/=o.en.l[i]:d=0,m.pinfo.thr[r][a][i]=u*Math.max(d*o.thm.l[i],m.ATH.l[i]),m.pinfo.LAMEsfb[r][a][i]=0,0!=t.preflag&&i>=11&&(m.pinfo.LAMEsfb[r][a][i]=-f*s[i]),i<L.SBPSY_l&&(m.pinfo.LAMEsfb[r][a][i]-=f*p[i])}if(t.block_type==L.SHORT_TYPE)for(l=i,i=t.sfb_smin;i<L.SBMAX_s;i++){b=m.scalefac_band.s[i],E=(S=m.scalefac_band.s[i+1])-b;for(var S,k=0;k<3;k++){for(d=0,c=b;c<S;c++)d+=t.xr[g]*t.xr[g],g++;d=Math.max(d/E,1e-20),u=1e15,m.pinfo.en_s[r][a][3*i+k]=u*d,m.pinfo.xfsf_s[r][a][3*i+k]=u*_[l]*v[l]/E,o.en.s[i][k]>0?d/=o.en.s[i][k]:d=0,(e.ATHonly||e.ATHshort)&&(d=0),m.pinfo.thr_s[r][a][3*i+k]=u*Math.max(d*o.thm.s[i][k],m.ATH.s[i]),m.pinfo.LAMEsfb_s[r][a][3*i+k]=-2*t.subblock_gain[k],i<L.SBPSY_s&&(m.pinfo.LAMEsfb_s[r][a][3*i+k]-=f*p[l]),l++}}m.pinfo.LAMEqss[r][a]=t.global_gain,m.pinfo.LAMEmainbits[r][a]=t.part2_3_length+t.part2_length,m.pinfo.LAMEsfbits[r][a]=t.part2_length,m.pinfo.over[r][a]=h.over_count,m.pinfo.max_noise[r][a]=10*h.max_noise,m.pinfo.over_noise[r][a]=10*h.over_noise,m.pinfo.tot_noise[r][a]=10*h.tot_noise,m.pinfo.over_SSD[r][a]=h.over_SSD}}function w(){this.global_gain=0,this.sfb_count1=0,this.step=t(39),this.noise=n(39),this.noise_log=n(39)}function F(){this.xr=n(576),this.l3_enc=t(576),this.scalefac=t(N.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=t(3),this.subblock_gain=t(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=t(N.SFBMAX),this.window=t(N.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=t(4),this.max_nonzero_coeff=0;var e=this;function o(e){return new Int32Array(e)}this.assign=function(t){var n;e.xr=(n=t.xr,new Float32Array(n)),e.l3_enc=o(t.l3_enc),e.scalefac=o(t.scalefac),e.xrpow_max=t.xrpow_max,e.part2_3_length=t.part2_3_length,e.big_values=t.big_values,e.count1=t.count1,e.global_gain=t.global_gain,e.scalefac_compress=t.scalefac_compress,e.block_type=t.block_type,e.mixed_block_flag=t.mixed_block_flag,e.table_select=o(t.table_select),e.subblock_gain=o(t.subblock_gain),e.region0_count=t.region0_count,e.region1_count=t.region1_count,e.preflag=t.preflag,e.scalefac_scale=t.scalefac_scale,e.count1table_select=t.count1table_select,e.part2_length=t.part2_length,e.sfb_lmax=t.sfb_lmax,e.sfb_smin=t.sfb_smin,e.psy_lmax=t.psy_lmax,e.sfbmax=t.sfbmax,e.psymax=t.psymax,e.sfbdivide=t.sfbdivide,e.width=o(t.width),e.window=o(t.window),e.count1bits=t.count1bits,e.sfb_partition_table=t.sfb_partition_table.slice(0),e.slen=o(t.slen),e.max_nonzero_coeff=t.max_nonzero_coeff}}k.t1HB=[1,1,1,0],k.t2HB=[1,2,1,3,1,1,3,2,0],k.t3HB=[3,2,1,1,1,1,3,2,0],k.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],k.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],k.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],k.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],k.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],k.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],k.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],k.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],k.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],k.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],k.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],k.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],k.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],k.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],k.t1l=[1,4,3,5],k.t2l=[1,4,7,4,5,7,6,7,8],k.t3l=[2,3,7,4,4,7,6,7,8],k.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],k.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],k.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],k.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],k.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],k.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],k.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],k.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],k.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],k.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],k.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],k.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],k.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],k.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],k.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],k.ht=[new S(0,0,null,null),new S(2,0,k.t1HB,k.t1l),new S(3,0,k.t2HB,k.t2l),new S(3,0,k.t3HB,k.t3l),new S(0,0,null,null),new S(4,0,k.t5HB,k.t5l),new S(4,0,k.t6HB,k.t6l),new S(6,0,k.t7HB,k.t7l),new S(6,0,k.t8HB,k.t8l),new S(6,0,k.t9HB,k.t9l),new S(8,0,k.t10HB,k.t10l),new S(8,0,k.t11HB,k.t11l),new S(8,0,k.t12HB,k.t12l),new S(16,0,k.t13HB,k.t13l),new S(0,0,null,k.t16_5l),new S(16,0,k.t15HB,k.t15l),new S(1,1,k.t16HB,k.t16l),new S(2,3,k.t16HB,k.t16l),new S(3,7,k.t16HB,k.t16l),new S(4,15,k.t16HB,k.t16l),new S(6,63,k.t16HB,k.t16l),new S(8,255,k.t16HB,k.t16l),new S(10,1023,k.t16HB,k.t16l),new S(13,8191,k.t16HB,k.t16l),new S(4,15,k.t24HB,k.t24l),new S(5,31,k.t24HB,k.t24l),new S(6,63,k.t24HB,k.t24l),new S(7,127,k.t24HB,k.t24l),new S(8,255,k.t24HB,k.t24l),new S(9,511,k.t24HB,k.t24l),new S(11,2047,k.t24HB,k.t24l),new S(13,8191,k.t24HB,k.t24l),new S(0,0,k.t32HB,k.t32l),new S(0,0,k.t33HB,k.t33l)],k.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],k.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],k.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],k.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],k.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],k.scfsi_band=[0,6,11,16,21],M.Q_MAX=257,M.Q_MAX2=116,M.LARGE_BITS=1e5,M.IXMAX_VAL=8206;var N={};function D(){var e,t,o;this.rv=null,this.qupvt=null;var r,a=new T;function i(e){this.ordinal=e}function d(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function u(e,t,n,o,r){var a;switch(e){default:t.over_count>0?(a=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(a=n.bits<t.bits)):a=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:a=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&b.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=function(e,t){for(var n,o=1e-37,r=0;r<t.psymax;r++)o+=(n=e[r],c.FAST_LOG10(.368+.632*n*n*n));return Math.max(1e-20,o)}(r,o);case 1:a=n.max_noise<t.max_noise;break;case 2:a=n.tot_noise<t.tot_noise;break;case 3:a=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:a=n.max_noise<=0&&t.max_noise>.2||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&t.max_noise>0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.05&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.1&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:a=n.over_noise<t.over_noise||b.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:a=n.over_noise<t.over_noise||b.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||b.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:a=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(a=a&&n.bits<t.bits),a}function f(e,t,n,a,i){var s=e.internal_flags;!function(e,t,n,o,r){var a,i=e.internal_flags;a=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var l=0,s=0;s<t.sfbmax;s++)l<n[s]&&(l=n[s]);var c=i.noise_shaping_amp;switch(3==c&&(c=r?2:1),c){case 2:break;case 1:l>1?l=Math.pow(l,.5):l*=.95;break;default:l>1?l=1:l*=.95}var d=0;for(s=0;s<t.sfbmax;s++){var u,m=t.width[s];if(d+=m,!(n[s]<l)){if(0!=(2&i.substep_shaping)&&(i.pseudohalf[s]=0==i.pseudohalf[s]?1:0,0==i.pseudohalf[s]&&2==i.noise_shaping_amp))return;for(t.scalefac[s]++,u=-m;u<0;u++)o[d+u]*=a,o[d+u]>t.xrpow_max&&(t.xrpow_max=o[d+u]);if(2==i.noise_shaping_amp)return}}}(e,t,n,a,i);var c=d(t);return!(c||(c=2==s.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(s,t))&&(s.noise_shaping>1&&(l.fill(s.pseudohalf,0),0==t.scalefac_scale?(function(e,t){for(var n=0,r=0;r<e.sfbmax;r++){var a=e.width[r],i=e.scalefac[r];if(0!=e.preflag&&(i+=o.pretab[r]),n+=a,0!=(1&i)){i++;for(var l=-a;l<0;l++)t[n+l]*=1.2968395546510096,t[n+l]>e.xrpow_max&&(e.xrpow_max=t[n+l])}e.scalefac[r]=i>>1}e.preflag=0,e.scalefac_scale=1}(t,a),c=!1):t.block_type==L.SHORT_TYPE&&s.subblock_gain>0&&(c=function(e,t,n){var r,a=t.scalefac;for(r=0;r<t.sfb_lmax;r++)if(a[r]>=16)return!0;for(var i=0;i<3;i++){var l=0,s=0;for(r=t.sfb_lmax+i;r<t.sfbdivide;r+=3)l<a[r]&&(l=a[r]);for(;r<t.sfbmax;r+=3)s<a[r]&&(s=a[r]);if(!(l<16&&s<8)){if(t.subblock_gain[i]>=7)return!0;t.subblock_gain[i]++;var c=e.scalefac_band.l[t.sfb_lmax];for(r=t.sfb_lmax+i;r<t.sfbmax;r+=3){var d=t.width[r],u=a[r];if((u-=4>>t.scalefac_scale)>=0)a[r]=u,c+=3*d;else{a[r]=0;var m=210+(u<<t.scalefac_scale+1);p=o.IPOW20(m),c+=d*(i+1);for(var f=-d;f<0;f++)n[c+f]*=p,n[c+f]>t.xrpow_max&&(t.xrpow_max=n[c+f]);c+=d*(3-i-1)}}var p=o.IPOW20(202);for(c+=t.width[r]*(i+1),f=-t.width[r];f<0;f++)n[c+f]*=p,n[c+f]>t.xrpow_max&&(t.xrpow_max=n[c+f])}}return!1}(s,t,a)||d(t))),c||(c=2==s.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(s,t)),c))}this.setModules=function(n,i,l,s){e=n,t=i,this.rv=i,o=l,this.qupvt=l,r=s,a.setModules(o,r)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var o=e.tt[t][0].xr[n],r=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(o+r)*(.5*c.SQRT2),e.tt[t][1].xr[n]=(o-r)*(.5*c.SQRT2)}},this.init_xrpow=function(e,t,n){var o=0,r=0|t.max_nonzero_coeff;if(t.xrpow_max=0,l.fill(n,r,576,0),(o=function(e,t,n,o){o=0;for(var r=0;r<=n;++r){var a=Math.abs(e.xr[r]);o+=a,t[r]=Math.sqrt(a*Math.sqrt(a)),t[r]>e.xrpow_max&&(e.xrpow_max=t[r])}return o}(t,n,r,o))>1e-20){var a=0;0!=(2&e.substep_shaping)&&(a=1);for(var i=0;i<t.psymax;i++)e.pseudohalf[i]=a;return!0}return l.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=L.SBPSY_l,t.sfb_smin=L.SBPSY_s,t.psy_lmax=e.sfb21_extra?L.SBMAX_l:L.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var r=0;r<L.SBMAX_l;r++)t.width[r]=e.scalefac_band.l[r+1]-e.scalefac_band.l[r],t.window[r]=3;if(t.block_type==L.SHORT_TYPE){var a=n(576);t.sfb_smin=0,t.sfb_lmax=0,0!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?L.SBMAX_s:L.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(L.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var i=e.scalefac_band.l[t.sfb_lmax];for(s.arraycopy(t.xr,0,a,0,576),r=t.sfb_smin;r<L.SBMAX_s;r++)for(var c=e.scalefac_band.s[r],d=e.scalefac_band.s[r+1],u=0;u<3;u++)for(var m=c;m<d;m++)t.xr[i++]=a[3*m+u];var f=t.sfb_lmax;for(r=t.sfb_smin;r<L.SBMAX_s;r++)t.width[f]=t.width[f+1]=t.width[f+2]=e.scalefac_band.s[r+1]-e.scalefac_band.s[r],t.window[f]=0,t.window[f+1]=1,t.window[f+2]=2,f+=3}t.count1bits=0,t.sfb_partition_table=o.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,l.fill(t.scalefac,0),function(e,t){var n=e.ATH,r=t.xr;if(t.block_type!=L.SHORT_TYPE)for(var a=!1,i=L.PSFB21-1;i>=0&&!a;i--){var l=e.scalefac_band.psfb21[i],s=e.scalefac_band.psfb21[i+1],c=o.athAdjust(n.adjust,n.psfb21[i],n.floor);e.nsPsy.longfact[21]>1e-12&&(c*=e.nsPsy.longfact[21]);for(var d=s-1;d>=l;d--){if(!(Math.abs(r[d])<c)){a=!0;break}r[d]=0}}else for(var u=0;u<3;u++)for(a=!1,i=L.PSFB12-1;i>=0&&!a;i--){s=(l=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*u+(e.scalefac_band.psfb12[i]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[i+1]-e.scalefac_band.psfb12[i]);var m=o.athAdjust(n.adjust,n.psfb12[i],n.floor);for(e.nsPsy.shortfact[12]>1e-12&&(m*=e.nsPsy.shortfact[12]),d=s-1;d>=l;d--){if(!(Math.abs(r[d])<m)){a=!0;break}r[d]=0}}}(e,t)},i.BINSEARCH_NONE=new i(0),i.BINSEARCH_UP=new i(1),i.BINSEARCH_DOWN=new i(2),this.trancate_smallspectrums=function(e,t,a,i){var s=n(N.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=L.SHORT_TYPE)&&0==(128&e.substep_shaping)){o.calc_noise(t,a,s,new B,null);for(var c=0;c<576;c++){var d=0;0!=t.l3_enc[c]&&(d=Math.abs(t.xr[c])),i[c]=d}c=0;var u=8;t.block_type==L.SHORT_TYPE&&(u=6);do{var m,f,p,_,v=t.width[u];if(c+=v,!(s[u]>=1||(l.sort(i,c-v,v),b.EQ(i[c-1],0)))){m=(1-s[u])*a[u],f=0,_=0;do{var h;for(p=1;_+p<v&&!b.NEQ(i[_+c-v],i[_+c+p-v]);p++);if(m<(h=i[_+c-v]*i[_+c-v]*p)){0!=_&&(f=i[_+c-v-1]);break}m-=h,_+=p}while(_<v);if(!b.EQ(f,0))do{Math.abs(t.xr[c-v])<=f&&(t.l3_enc[c-v]=0)}while(--v>0)}}while(++u<t.psymax);t.part2_3_length=r.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,a,l,c,d){var p=e.internal_flags,_=new F,v=n(576),h=n(N.SFBMAX),g=new B,b=new w,E=9999999,S=!1,k=!1,y=0;if(function(e,t,n,o,a){var l,s=e.CurrentStep[o],c=!1,d=e.OldValue[o],u=i.BINSEARCH_NONE;for(t.global_gain=d,n-=t.part2_length;;){var m;if(l=r.count_bits(e,a,t,null),1==s||l==n)break;l>n?(u==i.BINSEARCH_DOWN&&(c=!0),c&&(s/=2),u=i.BINSEARCH_UP,m=s):(u==i.BINSEARCH_UP&&(c=!0),c&&(s/=2),u=i.BINSEARCH_DOWN,m=-s),t.global_gain+=m,t.global_gain<0&&(t.global_gain=0,c=!0),t.global_gain>255&&(t.global_gain=255,c=!0)}for(;l>n&&t.global_gain<255;)t.global_gain++,l=r.count_bits(e,a,t,null);e.CurrentStep[o]=d-t.global_gain>=4?4:2,e.OldValue[o]=t.global_gain,t.part2_3_length=l}(p,t,d,c,l),0==p.noise_shaping)return 100;o.calc_noise(t,a,h,g,b),g.bits=t.part2_3_length,_.assign(t);var T=0;for(s.arraycopy(l,0,v,0,576);!S;){do{var I,A=new B,C=255;if(I=0!=(2&p.substep_shaping)?20:3,p.sfb21_extra){if(h[_.sfbmax]>1)break;if(_.block_type==L.SHORT_TYPE&&(h[_.sfbmax+1]>1||h[_.sfbmax+2]>1))break}if(!f(e,_,h,l,k))break;0!=_.scalefac_scale&&(C=254);var R=d-_.part2_length;if(R<=0)break;for(;(_.part2_3_length=r.count_bits(p,l,_,b))>R&&_.global_gain<=C;)_.global_gain++;if(_.global_gain>C)break;if(0==g.over_count){for(;(_.part2_3_length=r.count_bits(p,l,_,b))>E&&_.global_gain<=C;)_.global_gain++;if(_.global_gain>C)break}if(o.calc_noise(_,a,h,A,b),A.bits=_.part2_3_length,0!=(u(t.block_type!=L.SHORT_TYPE?e.quant_comp:e.quant_comp_short,g,A,_,h)?1:0))E=t.part2_3_length,g=A,t.assign(_),T=0,s.arraycopy(l,0,v,0,576);else if(0==p.full_outer_loop){if(++T>I&&0==g.over_count)break;if(3==p.noise_shaping_amp&&k&&T>30)break;if(3==p.noise_shaping_amp&&k&&_.global_gain-y>15)break}}while(_.global_gain+_.scalefac_scale<255);3==p.noise_shaping_amp?k?S=!0:(_.assign(t),s.arraycopy(v,0,l,0,576),T=0,y=_.global_gain,k=!0):S=!0}return e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh?s.arraycopy(v,0,l,0,576):0!=(1&p.substep_shaping)&&trancate_smallspectrums(p,t,a,l),g.over_count},this.iteration_finish_one=function(e,n,o){var a=e.l3_side,i=a.tt[n][o];r.best_scalefac_store(e,n,o,a),1==e.use_best_huffman&&r.best_huffman_divide(e,i),t.ResvAdjust(e,i)},this.VBR_encode_granule=function(e,t,o,r,a,i,c){var d,u=e.internal_flags,m=new F,f=n(576),p=c,_=c+1,v=(c+i)/2,h=0,g=u.sfb21_extra;l.fill(m.l3_enc,0);do{u.sfb21_extra=!(v>p-42)&&g,outer_loop(e,t,o,r,a,v)<=0?(h=1,_=t.part2_3_length,m.assign(t),s.arraycopy(r,0,f,0,576),d=(c=_-32)-i,v=(c+i)/2):(d=c-(i=v+32),v=(c+i)/2,0!=h&&(h=2,t.assign(m),s.arraycopy(f,0,r,0,576)))}while(d>12);u.sfb21_extra=g,2==h&&s.arraycopy(m.l3_enc,0,t.l3_enc,0,576)},this.get_framebits=function(n,o){var r=n.internal_flags;r.bitrate_index=r.VBR_min_bitrate;var a=e.getframebits(n);r.bitrate_index=1,a=e.getframebits(n);for(var i=1;i<=r.VBR_max_bitrate;i++){r.bitrate_index=i;var l=new y(a);o[i]=t.ResvFrameBegin(n,l),a=l.bits}},this.VBR_old_prepare=function(e,n,r,a,i,l,s,c,d){var u,m=e.internal_flags,f=0,p=1,_=0;m.bitrate_index=m.VBR_max_bitrate;var v=t.ResvFrameBegin(e,new y(0))/m.mode_gr;get_framebits(e,l);for(var h=0;h<m.mode_gr;h++){var g=o.on_pe(e,n,c[h],v,h,0);m.mode_ext==L.MPG_MD_MS_LR&&(ms_convert(m.l3_side,h),o.reduce_side(c[h],r[h],v,g));for(var b=0;b<m.channels_out;++b){var E=m.l3_side.tt[h][b];E.block_type!=L.SHORT_TYPE?(f=1.28/(1+Math.exp(3.5-n[h][b]/300))-.05,u=m.PSY.mask_adjust-f):(f=2.56/(1+Math.exp(3.5-n[h][b]/300))-.14,u=m.PSY.mask_adjust_short-f),m.masking_lower=Math.pow(10,.1*u),init_outer_loop(m,E),d[h][b]=o.calc_xmin(e,a[h][b],E,i[h][b]),0!=d[h][b]&&(p=0),s[h][b]=126,_+=c[h][b]}}for(h=0;h<m.mode_gr;h++)for(b=0;b<m.channels_out;b++)_>l[m.VBR_max_bitrate]&&(c[h][b]*=l[m.VBR_max_bitrate],c[h][b]/=_),s[h][b]>c[h][b]&&(s[h][b]=c[h][b]);return p},this.bitpressure_strategy=function(e,t,n,o){for(var r=0;r<e.mode_gr;r++)for(var a=0;a<e.channels_out;a++){for(var i=e.l3_side.tt[r][a],l=t[r][a],s=0,c=0;c<i.psy_lmax;c++)l[s++]*=1+.029*c*c/L.SBMAX_l/L.SBMAX_l;if(i.block_type==L.SHORT_TYPE)for(c=i.sfb_smin;c<L.SBMAX_s;c++)l[s++]*=1+.029*c*c/L.SBMAX_s/L.SBMAX_s,l[s++]*=1+.029*c*c/L.SBMAX_s/L.SBMAX_s,l[s++]*=1+.029*c*c/L.SBMAX_s/L.SBMAX_s;o[r][a]=0|Math.max(n[r][a],.9*o[r][a])}},this.VBR_new_prepare=function(e,n,r,a,i,l){var s,c=e.internal_flags,d=1,u=0,m=0;if(e.free_format)c.bitrate_index=0,f=new y(u),s=t.ResvFrameBegin(e,f),u=f.bits,i[0]=s;else{c.bitrate_index=c.VBR_max_bitrate;var f=new y(u);t.ResvFrameBegin(e,f),u=f.bits,get_framebits(e,i),s=i[c.VBR_max_bitrate]}for(var p=0;p<c.mode_gr;p++){o.on_pe(e,n,l[p],u,p,0),c.mode_ext==L.MPG_MD_MS_LR&&ms_convert(c.l3_side,p);for(var _=0;_<c.channels_out;++_){var v=c.l3_side.tt[p][_];c.masking_lower=Math.pow(10,.1*c.PSY.mask_adjust),init_outer_loop(c,v),0!=o.calc_xmin(e,r[p][_],v,a[p][_])&&(d=0),m+=l[p][_]}}for(p=0;p<c.mode_gr;p++)for(_=0;_<c.channels_out;_++)m>s&&(l[p][_]*=s,l[p][_]/=m);return d},this.calc_target_bits=function(n,r,a,i,l,s){var c,d,u,m,f=n.internal_flags,p=f.l3_side,_=0;f.bitrate_index=f.VBR_max_bitrate;var v=new y(_);for(s[0]=t.ResvFrameBegin(n,v),_=v.bits,f.bitrate_index=1,_=e.getframebits(n)-8*f.sideinfo_len,l[0]=_/(f.mode_gr*f.channels_out),_=n.VBR_mean_bitrate_kbps*n.framesize*1e3,0!=(1&f.substep_shaping)&&(_*=1.09),_/=n.out_samplerate,_-=8*f.sideinfo_len,_/=f.mode_gr*f.channels_out,(c=.93+.07*(11-n.compression_ratio)/5.5)<.9&&(c=.9),c>1&&(c=1),d=0;d<f.mode_gr;d++){var h=0;for(u=0;u<f.channels_out;u++){if(i[d][u]=int(c*_),r[d][u]>700){var g=int((r[d][u]-700)/1.4),b=p.tt[d][u];i[d][u]=int(c*_),b.block_type==L.SHORT_TYPE&&g<_/2&&(g=_/2),g>3*_/2?g=3*_/2:g<0&&(g=0),i[d][u]+=g}i[d][u]>$.MAX_BITS_PER_CHANNEL&&(i[d][u]=$.MAX_BITS_PER_CHANNEL),h+=i[d][u]}if(h>$.MAX_BITS_PER_GRANULE)for(u=0;u<f.channels_out;++u)i[d][u]*=$.MAX_BITS_PER_GRANULE,i[d][u]/=h}if(f.mode_ext==L.MPG_MD_MS_LR)for(d=0;d<f.mode_gr;d++)o.reduce_side(i[d],a[d],_*f.channels_out,$.MAX_BITS_PER_GRANULE);for(m=0,d=0;d<f.mode_gr;d++)for(u=0;u<f.channels_out;u++)i[d][u]>$.MAX_BITS_PER_CHANNEL&&(i[d][u]=$.MAX_BITS_PER_CHANNEL),m+=i[d][u];if(m>s[0])for(d=0;d<f.mode_gr;d++)for(u=0;u<f.channels_out;u++)i[d][u]*=s[0],i[d][u]/=m}}function V(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*c.SQRT2*.5/2384e-9,.017876148*c.SQRT2*.5/2384e-9,.003134727*c.SQRT2*.5/2384e-9,.002457142*c.SQRT2*.5/2384e-9,971317e-9*c.SQRT2*.5/2384e-9,218868e-9*c.SQRT2*.5/2384e-9,101566e-9*c.SQRT2*.5/2384e-9,13828e-9*c.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],o=t[L.SHORT_TYPE],r=t[L.SHORT_TYPE],a=t[L.SHORT_TYPE],i=t[L.SHORT_TYPE],d=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function u(t,n,o){for(var r,a,i,l=10,s=n+238-14-286,d=-15;d<0;d++){var u,m,f;u=e[l+-10],m=t[s+-224]*u,f=t[n+224]*u,u=e[l+-9],m+=t[s+-160]*u,f+=t[n+160]*u,u=e[l+-8],m+=t[s+-96]*u,f+=t[n+96]*u,u=e[l+-7],m+=t[s+-32]*u,f+=t[n+32]*u,u=e[l+-6],m+=t[s+32]*u,f+=t[n+-32]*u,u=e[l+-5],m+=t[s+96]*u,f+=t[n+-96]*u,u=e[l+-4],m+=t[s+160]*u,f+=t[n+-160]*u,u=e[l+-3],m+=t[s+224]*u,f+=t[n+-224]*u,u=e[l+-2],m+=t[n+-256]*u,f-=t[s+256]*u,u=e[l+-1],m+=t[n+-192]*u,f-=t[s+192]*u,u=e[l+0],m+=t[n+-128]*u,f-=t[s+128]*u,u=e[l+1],m+=t[n+-64]*u,f-=t[s+64]*u,u=e[l+2],m+=t[n+0]*u,f-=t[s+0]*u,u=e[l+3],m+=t[n+64]*u,f-=t[s+-64]*u,u=e[l+4],m+=t[n+128]*u,f-=t[s+-128]*u,u=e[l+5],m+=t[n+192]*u,u=(f-=t[s+-192]*u)-(m*=e[l+6]),o[30+2*d]=f+m,o[31+2*d]=e[l+7]*u,l+=18,n--,s++}f=t[n+-16]*e[l+-10],m=t[n+-32]*e[l+-2],f+=(t[n+-48]-t[n+16])*e[l+-9],m+=t[n+-96]*e[l+-1],f+=(t[n+-80]+t[n+48])*e[l+-8],m+=t[n+-160]*e[l+0],f+=(t[n+-112]-t[n+80])*e[l+-7],m+=t[n+-224]*e[l+1],f+=(t[n+-144]+t[n+112])*e[l+-6],m-=t[n+32]*e[l+2],f+=(t[n+-176]-t[n+144])*e[l+-5],m-=t[n+96]*e[l+3],f+=(t[n+-208]+t[n+176])*e[l+-4],m-=t[n+160]*e[l+4],f+=(t[n+-240]-t[n+208])*e[l+-3],r=(m-=t[n+224])-f,a=m+f,f=o[14],m=o[15]-f,o[31]=a+f,o[30]=r+m,o[15]=r-m,o[14]=a-f,i=o[28]-o[0],o[0]+=o[28],o[28]=i*e[l+-36+7],i=o[29]-o[1],o[1]+=o[29],o[29]=i*e[l+-36+7],i=o[26]-o[2],o[2]+=o[26],o[26]=i*e[l+-72+7],i=o[27]-o[3],o[3]+=o[27],o[27]=i*e[l+-72+7],i=o[24]-o[4],o[4]+=o[24],o[24]=i*e[l+-108+7],i=o[25]-o[5],o[5]+=o[25],o[25]=i*e[l+-108+7],i=o[22]-o[6],o[6]+=o[22],o[22]=i*c.SQRT2,i=o[23]-o[7],o[7]+=o[23],o[23]=i*c.SQRT2-o[7],o[7]-=o[6],o[22]-=o[7],o[23]-=o[22],i=o[6],o[6]=o[31]-i,o[31]=o[31]+i,i=o[7],o[7]=o[30]-i,o[30]=o[30]+i,i=o[22],o[22]=o[15]-i,o[15]=o[15]+i,i=o[23],o[23]=o[14]-i,o[14]=o[14]+i,i=o[20]-o[8],o[8]+=o[20],o[20]=i*e[l+-180+7],i=o[21]-o[9],o[9]+=o[21],o[21]=i*e[l+-180+7],i=o[18]-o[10],o[10]+=o[18],o[18]=i*e[l+-216+7],i=o[19]-o[11],o[11]+=o[19],o[19]=i*e[l+-216+7],i=o[16]-o[12],o[12]+=o[16],o[16]=i*e[l+-252+7],i=o[17]-o[13],o[13]+=o[17],o[17]=i*e[l+-252+7],i=-o[20]+o[24],o[20]+=o[24],o[24]=i*e[l+-216+7],i=-o[21]+o[25],o[21]+=o[25],o[25]=i*e[l+-216+7],i=o[4]-o[8],o[4]+=o[8],o[8]=i*e[l+-216+7],i=o[5]-o[9],o[5]+=o[9],o[9]=i*e[l+-216+7],i=o[0]-o[12],o[0]+=o[12],o[12]=i*e[l+-72+7],i=o[1]-o[13],o[1]+=o[13],o[13]=i*e[l+-72+7],i=o[16]-o[28],o[16]+=o[28],o[28]=i*e[l+-72+7],i=-o[17]+o[29],o[17]+=o[29],o[29]=i*e[l+-72+7],i=c.SQRT2*(o[2]-o[10]),o[2]+=o[10],o[10]=i,i=c.SQRT2*(o[3]-o[11]),o[3]+=o[11],o[11]=i,i=c.SQRT2*(-o[18]+o[26]),o[18]+=o[26],o[26]=i-o[18],i=c.SQRT2*(-o[19]+o[27]),o[19]+=o[27],o[27]=i-o[19],i=o[2],o[19]-=o[3],o[3]-=i,o[2]=o[31]-i,o[31]+=i,i=o[3],o[11]-=o[19],o[18]-=i,o[3]=o[30]-i,o[30]+=i,i=o[18],o[27]-=o[11],o[19]-=i,o[18]=o[15]-i,o[15]+=i,i=o[19],o[10]-=i,o[19]=o[14]-i,o[14]+=i,i=o[10],o[11]-=i,o[10]=o[23]-i,o[23]+=i,i=o[11],o[26]-=i,o[11]=o[22]-i,o[22]+=i,i=o[26],o[27]-=i,o[26]=o[7]-i,o[7]+=i,i=o[27],o[27]=o[6]-i,o[6]+=i,i=c.SQRT2*(o[0]-o[4]),o[0]+=o[4],o[4]=i,i=c.SQRT2*(o[1]-o[5]),o[1]+=o[5],o[5]=i,i=c.SQRT2*(o[16]-o[20]),o[16]+=o[20],o[20]=i,i=c.SQRT2*(o[17]-o[21]),o[17]+=o[21],o[21]=i,i=-c.SQRT2*(o[8]-o[12]),o[8]+=o[12],o[12]=i-o[8],i=-c.SQRT2*(o[9]-o[13]),o[9]+=o[13],o[13]=i-o[9],i=-c.SQRT2*(o[25]-o[29]),o[25]+=o[29],o[29]=i-o[25],i=-c.SQRT2*(o[24]+o[28]),o[24]-=o[28],o[28]=i-o[24],i=o[24]-o[16],o[24]=i,i=o[20]-i,o[20]=i,i=o[28]-i,o[28]=i,i=o[25]-o[17],o[25]=i,i=o[21]-i,o[21]=i,i=o[29]-i,o[29]=i,i=o[17]-o[1],o[17]=i,i=o[9]-i,o[9]=i,i=o[25]-i,o[25]=i,i=o[5]-i,o[5]=i,i=o[21]-i,o[21]=i,i=o[13]-i,o[13]=i,i=o[29]-i,o[29]=i,i=o[1]-o[0],o[1]=i,i=o[16]-i,o[16]=i,i=o[17]-i,o[17]=i,i=o[8]-i,o[8]=i,i=o[9]-i,o[9]=i,i=o[24]-i,o[24]=i,i=o[25]-i,o[25]=i,i=o[4]-i,o[4]=i,i=o[5]-i,o[5]=i,i=o[20]-i,o[20]=i,i=o[21]-i,o[21]=i,i=o[12]-i,o[12]=i,i=o[13]-i,o[13]=i,i=o[28]-i,o[28]=i,i=o[29]-i,o[29]=i,i=o[0],o[0]+=o[31],o[31]-=i,i=o[1],o[1]+=o[30],o[30]-=i,i=o[16],o[16]+=o[15],o[15]-=i,i=o[17],o[17]+=o[14],o[14]-=i,i=o[8],o[8]+=o[23],o[23]-=i,i=o[9],o[9]+=o[22],o[22]-=i,i=o[24],o[24]+=o[7],o[7]-=i,i=o[25],o[25]+=o[6],o[6]-=i,i=o[4],o[4]+=o[27],o[27]-=i,i=o[5],o[5]+=o[26],o[26]-=i,i=o[20],o[20]+=o[11],o[11]-=i,i=o[21],o[21]+=o[10],o[10]-=i,i=o[12],o[12]+=o[19],o[19]-=i,i=o[13],o[13]+=o[18],o[18]-=i,i=o[28],o[28]+=o[3],o[3]-=i,i=o[29],o[29]+=o[2],o[2]-=i}function m(e,n){for(var o=0;o<3;o++){var r,a,i,l,s,c;a=(l=e[n+6]*t[L.SHORT_TYPE][0]-e[n+15])+(r=e[n+0]*t[L.SHORT_TYPE][2]-e[n+9]),i=l-r,s=(l=e[n+15]*t[L.SHORT_TYPE][0]+e[n+6])+(r=e[n+9]*t[L.SHORT_TYPE][2]+e[n+0]),c=-l+r,r=2069978111953089e-26*(e[n+3]*t[L.SHORT_TYPE][1]-e[n+12]),l=2069978111953089e-26*(e[n+12]*t[L.SHORT_TYPE][1]+e[n+3]),e[n+0]=190752519173728e-25*a+r,e[n+15]=190752519173728e-25*-s+l,i=.8660254037844387*i*1907525191737281e-26,s=.5*s*1907525191737281e-26+l,e[n+3]=i-s,e[n+6]=i+s,a=.5*a*1907525191737281e-26-r,c=.8660254037844387*c*1907525191737281e-26,e[n+9]=a+c,e[n+12]=a-c,n++}}this.mdct_sub48=function(e,c,f){for(var p,_,v,h,g,b,E,S,k,y,T,B,I,A,C,R,x,M,w,F,N,D=c,V=286,O=0;O<e.channels_out;O++){for(var P=0;P<e.mode_gr;P++){for(var H,U=e.l3_side.tt[P][O],q=U.xr,$=0,j=e.sb_sample[O][1-P],Y=0,G=0;G<9;G++)for(u(D,V,j[Y]),u(D,V+32,j[Y+1]),Y+=2,V+=64,H=1;H<32;H+=2)j[Y-1][H]*=-1;for(H=0;H<32;H++,$+=18){var X=U.block_type,z=e.sb_sample[O][P],K=e.sb_sample[O][1-P];if(0!=U.mixed_block_flag&&H<2&&(X=0),e.amp_filter[H]<1e-12)l.fill(q,$+0,$+18,0);else{if(e.amp_filter[H]<1)for(G=0;G<18;G++)K[G][d[H]]*=e.amp_filter[H];if(X==L.SHORT_TYPE){for(G=-3;G<0;G++){var W=t[L.SHORT_TYPE][G+3];q[$+3*G+9]=z[9+G][d[H]]*W-z[8-G][d[H]],q[$+3*G+18]=z[14-G][d[H]]*W+z[15+G][d[H]],q[$+3*G+10]=z[15+G][d[H]]*W-z[14-G][d[H]],q[$+3*G+19]=K[2-G][d[H]]*W+K[3+G][d[H]],q[$+3*G+11]=K[3+G][d[H]]*W-K[2-G][d[H]],q[$+3*G+20]=K[8-G][d[H]]*W+K[9+G][d[H]]}m(q,$)}else{var Q=n(18);for(G=-9;G<0;G++){var Z,J;Z=t[X][G+27]*K[G+9][d[H]]+t[X][G+36]*K[8-G][d[H]],J=t[X][G+9]*z[G+9][d[H]]-t[X][G+18]*z[8-G][d[H]],Q[G+9]=Z-J*o[3+G+9],Q[G+18]=Z*o[3+G+9]+J}p=q,_=$,h=void 0,g=void 0,void 0,void 0,void 0,void 0,void 0,T=void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,w=void 0,void 0,void 0,b=(v=Q)[17]-v[9],S=v[15]-v[11],k=v[14]-v[12],y=v[0]+v[8],T=v[1]+v[7],B=v[2]+v[6],I=v[3]+v[5],p[_+17]=y+B-I-(T-v[4]),g=(y+B-I)*r[19]+(T-v[4]),h=(b-S-k)*r[18],p[_+5]=h+g,p[_+6]=h-g,E=(v[16]-v[10])*r[18],T=T*r[19]+v[4],h=b*r[12]+E+S*r[13]+k*r[14],g=-y*r[16]+T-B*r[17]+I*r[15],p[_+1]=h+g,p[_+2]=h-g,h=b*r[13]-E-S*r[14]+k*r[12],g=-y*r[17]+T-B*r[15]+I*r[16],p[_+9]=h+g,p[_+10]=h-g,h=b*r[14]-E+S*r[12]-k*r[13],g=y*r[15]-T+B*r[16]-I*r[17],p[_+13]=h+g,p[_+14]=h-g,A=v[8]-v[0],R=v[6]-v[2],x=v[5]-v[3],M=v[17]+v[9],w=v[16]+v[10],F=v[15]+v[11],N=v[14]+v[12],p[_+0]=M+F+N+(w+v[13]),h=(M+F+N)*r[19]-(w+v[13]),g=(A-R+x)*r[18],p[_+11]=h+g,p[_+12]=h-g,C=(v[7]-v[1])*r[18],w=v[13]-w*r[19],h=M*r[15]-w+F*r[16]+N*r[17],g=A*r[14]+C+R*r[12]+x*r[13],p[_+3]=h+g,p[_+4]=h-g,h=-M*r[17]+w-F*r[15]-N*r[16],g=A*r[13]+C-R*r[14]-x*r[12],p[_+7]=h+g,p[_+8]=h-g,h=-M*r[16]+w-F*r[17]-N*r[15],g=A*r[12]-C+R*r[13]-x*r[14],p[_+15]=h+g,p[_+16]=h-g}}if(X!=L.SHORT_TYPE&&0!=H)for(G=7;G>=0;--G){var ee,te;ee=q[$+G]*a[20+G]+q[$+-1-G]*i[28+G],te=q[$+G]*i[28+G]-q[$+-1-G]*a[20+G],q[$+-1-G]=ee,q[$+G]=te}}}if(D=f,V=286,1==e.mode_gr)for(var ne=0;ne<18;ne++)s.arraycopy(e.sb_sample[O][1][ne],0,e.sb_sample[O][0][ne],0,32)}}}function O(){this.thm=new q,this.en=new q}function L(){var e=L.FFTOFFSET,r=L.MPG_MD_MS_LR,a=null;this.psy=null;var l=null,c=null,d=null;this.setModules=function(e,t,n,o){a=e,this.psy=t,l=t,c=o,d=n};var u=new V;this.lame_encode_mp3_frame=function(p,_,v,h,g,b){var E,S=i([2,2]);S[0][0]=new O,S[0][1]=new O,S[1][0]=new O,S[1][1]=new O;var k,y=i([2,2]);y[0][0]=new O,y[0][1]=new O,y[1][0]=new O,y[1][1]=new O;var T,B,I,A=[null,null],C=p.internal_flags,R=o([2,4]),x=[.5,.5],M=[[0,0],[0,0]],w=[[0,0],[0,0]];if(A[0]=_,A[1]=v,0==C.lame_encode_frame_init&&function(e,t){var o,r,a=e.internal_flags;if(0==a.lame_encode_frame_init){var i,l,s=n(2014),c=n(2014);for(a.lame_encode_frame_init=1,i=0,l=0;i<286+576*(1+a.mode_gr);++i)i<576*a.mode_gr?(s[i]=0,2==a.channels_out&&(c[i]=0)):(s[i]=t[0][l],2==a.channels_out&&(c[i]=t[1][l]),++l);for(r=0;r<a.mode_gr;r++)for(o=0;o<a.channels_out;o++)a.l3_side.tt[r][o].block_type=L.SHORT_TYPE;u.mdct_sub48(a,s,c)}}(p,A),C.padding=0,(C.slot_lag-=C.frac_SpF)<0&&(C.slot_lag+=p.out_samplerate,C.padding=1),0!=C.psymodel){var F=[null,null],N=0,D=t(2);for(I=0;I<C.mode_gr;I++){for(B=0;B<C.channels_out;B++)F[B]=A[B],N=576+576*I-L.FFTOFFSET;if(0!=(p.VBR==m.vbr_mtrh||p.VBR==m.vbr_mt?l.L3psycho_anal_vbr(p,F,N,I,S,y,M[I],w[I],R[I],D):l.L3psycho_anal_ns(p,F,N,I,S,y,M[I],w[I],R[I],D)))return-4;for(p.mode==f.JOINT_STEREO&&(x[I]=R[I][2]+R[I][3],x[I]>0&&(x[I]=R[I][3]/x[I])),B=0;B<C.channels_out;B++){var V=C.l3_side.tt[I][B];V.block_type=D[B],V.mixed_block_flag=0}}}else for(I=0;I<C.mode_gr;I++)for(B=0;B<C.channels_out;B++)C.l3_side.tt[I][B].block_type=L.NORM_TYPE,C.l3_side.tt[I][B].mixed_block_flag=0,w[I][B]=M[I][B]=700;if(function(e){var t,n;if(0!=e.ATH.useAdjust)if(n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,(n*=e.ATH.aaSensitivityP)>.03125)e.ATH.adjust>=1?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var o=31.98*n+625e-6;e.ATH.adjust>=o?(e.ATH.adjust*=.075*o+.925,e.ATH.adjust<o&&(e.ATH.adjust=o)):e.ATH.adjustLimit>=o?e.ATH.adjust=o:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=o}else e.ATH.adjust=1}(C),u.mdct_sub48(C,A[0],A[1]),C.mode_ext=L.MPG_MD_LR_LR,p.force_ms)C.mode_ext=L.MPG_MD_MS_LR;else if(p.mode==f.JOINT_STEREO){var P=0,H=0;for(I=0;I<C.mode_gr;I++)for(B=0;B<C.channels_out;B++)P+=w[I][B],H+=M[I][B];if(P<=1*H){var U=C.l3_side.tt[0],q=C.l3_side.tt[C.mode_gr-1];U[0].block_type==U[1].block_type&&q[0].block_type==q[1].block_type&&(C.mode_ext=L.MPG_MD_MS_LR)}}if(C.mode_ext==r?(k=y,T=w):(k=S,T=M),p.analysis&&null!=C.pinfo)for(I=0;I<C.mode_gr;I++)for(B=0;B<C.channels_out;B++)C.pinfo.ms_ratio[I]=C.ms_ratio[I],C.pinfo.ms_ener_ratio[I]=x[I],C.pinfo.blocktype[I][B]=C.l3_side.tt[I][B].block_type,C.pinfo.pe[I][B]=T[I][B],s.arraycopy(C.l3_side.tt[I][B].xr,0,C.pinfo.xr[I][B],0,576),C.mode_ext==r&&(C.pinfo.ers[I][B]=C.pinfo.ers[I][B+2],s.arraycopy(C.pinfo.energy[I][B+2],0,C.pinfo.energy[I][B],0,C.pinfo.energy[I][B].length));if(p.VBR==m.vbr_off||p.VBR==m.vbr_abr){var $,j;for($=0;$<18;$++)C.nsPsy.pefirbuf[$]=C.nsPsy.pefirbuf[$+1];for(j=0,I=0;I<C.mode_gr;I++)for(B=0;B<C.channels_out;B++)j+=T[I][B];for(C.nsPsy.pefirbuf[18]=j,j=C.nsPsy.pefirbuf[9],$=0;$<9;$++)j+=(C.nsPsy.pefirbuf[$]+C.nsPsy.pefirbuf[18-$])*L.fircoef[$];for(j=3350*C.mode_gr*C.channels_out/j,I=0;I<C.mode_gr;I++)for(B=0;B<C.channels_out;B++)T[I][B]*=j}if(C.iteration_loop.iteration_loop(p,T,x,k),a.format_bitstream(p),E=a.copy_buffer(C,h,g,b,1),p.bWriteVbrTag&&c.addVbrFrame(p),p.analysis&&null!=C.pinfo){for(B=0;B<C.channels_out;B++){var Y;for(Y=0;Y<e;Y++)C.pinfo.pcmdata[B][Y]=C.pinfo.pcmdata[B][Y+p.framesize];for(Y=e;Y<1600;Y++)C.pinfo.pcmdata[B][Y]=A[B][Y-e]}d.set_frame_pinfo(p,k)}return function(e){var t,n;for(e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var o=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(o=4),e.bitrate_blockType_Hist[e.bitrate_index][o]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][o]++,e.bitrate_blockType_Hist[15][5]++}}(C),E}}function P(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function H(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[t(4),t(4)];for(var e=0;e<2;e++)for(var n=0;n<2;n++)this.tt[e][n]=new F}function U(){this.last_en_subshort=o([4,9]),this.lastAttacks=t(4),this.pefirbuf=n(19),this.longfact=n(L.SBMAX_l),this.shortfact=n(L.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function q(){this.l=n(L.SBMAX_l),this.s=o([L.SBMAX_s,3]);var e=this;this.assign=function(t){s.arraycopy(t.l,0,e.l,0,L.SBMAX_l);for(var n=0;n<L.SBMAX_s;n++)for(var o=0;o<3;o++)e.s[n][o]=t.s[n][o]}}function $(){function a(){this.write_timing=0,this.ptr=0,this.buf=e(40)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=o([2,$.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new H,this.ms_ratio=n(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=t(2),this.CurrentStep=t(2),this.masking_lower=0,this.bv_scf=t(576),this.pseudohalf=t(N.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*$.BPC+1),this.itime=function(e){return new Float64Array(e)}(2),this.sideinfo_len=0,this.sb_sample=o([2,2,18,L.SBLIMIT]),this.amp_filter=n(32),this.header=new Array($.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new x,this.minval_l=n(L.CBANDS),this.minval_s=n(L.CBANDS),this.nb_1=o([4,L.CBANDS]),this.nb_2=o([4,L.CBANDS]),this.nb_s1=o([4,L.CBANDS]),this.nb_s2=o([4,L.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=n(4),this.loudness_sq=o([2,2]),this.loudness_sq_save=n(2),this.mld_l=n(L.SBMAX_l),this.mld_s=n(L.SBMAX_s),this.bm_l=t(L.SBMAX_l),this.bo_l=t(L.SBMAX_l),this.bm_s=t(L.SBMAX_s),this.bo_s=t(L.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=r([L.CBANDS,2]),this.s3ind_s=r([L.CBANDS,2]),this.numlines_s=t(L.CBANDS),this.numlines_l=t(L.CBANDS),this.rnumlines_l=n(L.CBANDS),this.mld_cb_l=n(L.CBANDS),this.mld_cb_s=n(L.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=n(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=t(2),this.nsPsy=new U,this.VBR_seek_table=new P,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=r([16,5]),this.bitrate_blockType_Hist=r([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var i=0;i<this.en.length;i++)this.en[i]=new q;for(i=0;i<this.thm.length;i++)this.thm[i]=new q;for(i=0;i<this.header.length;i++)this.header[i]=new a}function j(){var e=n(L.BLKSIZE),t=n(L.BLKSIZE_s/2),o=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(e,t,n){var r,a,i,l=0,s=t+(n<<=1);r=4;do{var d,u,m,f,p,_,v;v=r>>1,_=(p=r<<1)+(f=r),r=p<<1,i=(a=t)+v;do{y=e[a+0]-e[a+f],k=e[a+0]+e[a+f],A=e[a+p]-e[a+_],B=e[a+p]+e[a+_],e[a+p]=k-B,e[a+0]=k+B,e[a+_]=y-A,e[a+f]=y+A,y=e[i+0]-e[i+f],k=e[i+0]+e[i+f],A=c.SQRT2*e[i+_],B=c.SQRT2*e[i+p],e[i+p]=k-B,e[i+0]=k+B,e[i+_]=y-A,e[i+f]=y+A,i+=r,a+=r}while(a<s);for(u=o[l+0],d=o[l+1],m=1;m<v;m++){var h,g;h=1-2*d*d,g=2*d*u,a=t+m,i=t+f-m;do{var b,E,S,k,y,T,B,I,A,C;E=g*e[a+f]-h*e[i+f],b=h*e[a+f]+g*e[i+f],y=e[a+0]-b,k=e[a+0]+b,T=e[i+0]-E,S=e[i+0]+E,E=g*e[a+_]-h*e[i+_],b=h*e[a+_]+g*e[i+_],A=e[a+p]-b,B=e[a+p]+b,C=e[i+p]-E,I=e[i+p]+E,E=d*B-u*C,b=u*B+d*C,e[a+p]=k-b,e[a+0]=k+b,e[i+_]=T-E,e[i+f]=T+E,E=u*I-d*A,b=d*I+u*A,e[i+p]=S-b,e[i+0]=S+b,e[a+_]=y-E,e[a+f]=y+E,i+=r,a+=r}while(a<s);u=(h=u)*o[l+0]-d*o[l+1],d=h*o[l+1]+d*o[l+0]}l+=2}while(r<n)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,n,o,i,l){for(var s=0;s<3;s++){var c=L.BLKSIZE_s/2,d=65535&192*(s+1),u=L.BLKSIZE_s/8-1;do{var m,f,p,_,v,h=255&a[u<<2];f=(m=t[h]*i[o][l+h+d])-(v=t[127-h]*i[o][l+h+d+128]),m+=v,_=(p=t[h+64]*i[o][l+h+d+64])-(v=t[63-h]*i[o][l+h+d+192]),p+=v,c-=4,n[s][c+0]=m+p,n[s][c+2]=m-p,n[s][c+1]=f+_,n[s][c+3]=f-_,f=(m=t[h+1]*i[o][l+h+d+1])-(v=t[126-h]*i[o][l+h+d+129]),m+=v,_=(p=t[h+65]*i[o][l+h+d+65])-(v=t[62-h]*i[o][l+h+d+193]),p+=v,n[s][c+L.BLKSIZE_s/2+0]=m+p,n[s][c+L.BLKSIZE_s/2+2]=m-p,n[s][c+L.BLKSIZE_s/2+1]=f+_,n[s][c+L.BLKSIZE_s/2+3]=f-_}while(--u>=0);r(n[s],c,L.BLKSIZE_s/2)}},this.fft_long=function(t,n,o,i,l){var s=L.BLKSIZE/8-1,c=L.BLKSIZE/2;do{var d,u,m,f,p,_=255&a[s];u=(d=e[_]*i[o][l+_])-(p=e[_+512]*i[o][l+_+512]),d+=p,f=(m=e[_+256]*i[o][l+_+256])-(p=e[_+768]*i[o][l+_+768]),m+=p,n[0+(c-=4)]=d+m,n[c+2]=d-m,n[c+1]=u+f,n[c+3]=u-f,u=(d=e[_+1]*i[o][l+_+1])-(p=e[_+513]*i[o][l+_+513]),d+=p,f=(m=e[_+257]*i[o][l+_+257])-(p=e[_+769]*i[o][l+_+769]),m+=p,n[c+L.BLKSIZE/2+0]=d+m,n[c+L.BLKSIZE/2+2]=d-m,n[c+L.BLKSIZE/2+1]=u+f,n[c+L.BLKSIZE/2+3]=u-f}while(--s>=0);r(n,c,L.BLKSIZE/2)},this.init_fft=function(n){for(var o=0;o<L.BLKSIZE;o++)e[o]=.42-.5*Math.cos(2*Math.PI*(o+.5)/L.BLKSIZE)+.08*Math.cos(4*Math.PI*(o+.5)/L.BLKSIZE);for(o=0;o<L.BLKSIZE_s/2;o++)t[o]=.5*(1-Math.cos(2*Math.PI*(o+.5)/L.BLKSIZE_s))}}function Y(){var e=new j,r=2.302585092994046,a=1/217621504/(L.BLKSIZE/2),i=.3,s=21,p=.2302585093;function _(e,t){for(var n=0,o=0;o<L.BLKSIZE/2;++o)n+=e[o]*t.ATH.eql_w[o];return n*a}function v(t,n,o,r,a,i,l,s,d,u,m){var f=t.internal_flags;if(d<2)e.fft_long(f,r[a],d,u,m),e.fft_short(f,i[l],d,u,m);else if(2==d){for(var p=L.BLKSIZE-1;p>=0;--p){var v=r[a+0][p],h=r[a+1][p];r[a+0][p]=(v+h)*c.SQRT2*.5,r[a+1][p]=(v-h)*c.SQRT2*.5}for(var g=2;g>=0;--g)for(p=L.BLKSIZE_s-1;p>=0;--p)v=i[l+0][g][p],h=i[l+1][g][p],i[l+0][g][p]=(v+h)*c.SQRT2*.5,i[l+1][g][p]=(v-h)*c.SQRT2*.5}for(n[0]=r[a+0][0],n[0]*=n[0],p=L.BLKSIZE/2-1;p>=0;--p){var b=r[a+0][L.BLKSIZE/2-p],E=r[a+0][L.BLKSIZE/2+p];n[L.BLKSIZE/2-p]=.5*(b*b+E*E)}for(g=2;g>=0;--g)for(o[g][0]=i[l+0][g][0],o[g][0]*=o[g][0],p=L.BLKSIZE_s/2-1;p>=0;--p)b=i[l+0][g][L.BLKSIZE_s/2-p],E=i[l+0][g][L.BLKSIZE_s/2+p],o[g][L.BLKSIZE_s/2-p]=.5*(b*b+E*E);var S=0;for(p=11;p<L.HBLKSIZE;p++)S+=n[p];if(f.tot_ener[d]=S,t.analysis){for(p=0;p<L.HBLKSIZE;p++)f.pinfo.energy[s][d][p]=f.pinfo.energy_save[d][p],f.pinfo.energy_save[d][p]=n[p];f.pinfo.pe[s][d]=f.pe[d]}2==t.athaa_loudapprox&&d<2&&(f.loudness_sq[s][d]=f.loudness_sq_save[d],f.loudness_sq_save[d]=_(n,f))}var h,g,b,E=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],S=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],k=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],y=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function T(e,t,n,o,r,a){var i,l,s;if(t>e){if(!(t<e*g))return e+t;i=t/e}else{if(e>=t*g)return e+t;i=e/t}if(e+=t,o+3<=6){if(i>=h)return e;var d=0|c.FAST_LOG10_X(i,16);return e*k[d]}return d=0|c.FAST_LOG10_X(i,16),t=0!=a?r.ATH.cb_s[n]*r.ATH.adjust:r.ATH.cb_l[n]*r.ATH.adjust,e<b*t?e>t?(l=1,d<=13&&(l=y[d]),s=c.FAST_LOG10_X(e/t,10/15),e*((S[d]-l)*s+l)):d>13?e:e*y[d]:e*S[d]}var B=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function I(e,t,n){var o;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(o=t>e?t/e:e/t,-2<=n&&n<=2){if(o>=h)return e+t;var r=0|c.FAST_LOG10_X(o,16);return(e+t)*B[r]}return o<g?e+t:(e<t&&(e=t),e)}function A(e,t,n,o,r){var a,i,l=0,s=0;for(a=i=0;a<L.SBMAX_s;++i,++a){for(var c=e.bo_s[a],d=e.npart_s,u=c<d?c:d;i<u;)l+=t[i],s+=n[i],i++;if(e.en[o].s[a][r]=l,e.thm[o].s[a][r]=s,i>=d){++a;break}var m=e.PSY.bo_s_weight[a],f=1-m;l=m*t[i],s=m*n[i],e.en[o].s[a][r]+=l,e.thm[o].s[a][r]+=s,l=f*t[i],s=f*n[i]}for(;a<L.SBMAX_s;++a)e.en[o].s[a][r]=0,e.thm[o].s[a][r]=0}function C(e,t,n,o){var r,a,i=0,l=0;for(r=a=0;r<L.SBMAX_l;++a,++r){for(var s=e.bo_l[r],c=e.npart_l,d=s<c?s:c;a<d;)i+=t[a],l+=n[a],a++;if(e.en[o].l[r]=i,e.thm[o].l[r]=l,a>=c){++r;break}var u=e.PSY.bo_l_weight[r],m=1-u;i=u*t[a],l=u*n[a],e.en[o].l[r]+=i,e.thm[o].l[r]+=l,i=m*t[a],l=m*n[a]}for(;r<L.SBMAX_l;++r)e.en[o].l[r]=0,e.thm[o].l[r]=0}function R(e,t,n,o,r,a){var i,l,s=e.internal_flags;for(l=i=0;l<s.npart_s;++l){for(var c=0,d=s.numlines_s[l],u=0;u<d;++u,++i){c+=t[a][i]}n[l]=c}for(i=l=0;l<s.npart_s;l++){var m=s.s3ind_s[l][0],f=s.s3_ss[i++]*n[m];for(++m;m<=s.s3ind_s[l][1];)f+=s.s3_ss[i]*n[m],++i,++m;var p=2*s.nb_s1[r][l];if(o[l]=Math.min(f,p),s.blocktype_old[1&r]==L.SHORT_TYPE){p=16*s.nb_s2[r][l];var _=o[l];o[l]=Math.min(p,_)}s.nb_s2[r][l]=s.nb_s1[r][l],s.nb_s1[r][l]=f}for(;l<=L.CBANDS;++l)n[l]=0,o[l]=0}function x(e,t,n){return n>=1?e:n<=0?t:t>0?Math.pow(e/t,n)*t:0}var M=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function w(e,t){for(var n=309.07,o=0;o<L.SBMAX_s-1;o++)for(var a=0;a<3;a++){var i=e.thm.s[o][a];if(i>0){var l=i*t,s=e.en.s[o][a];s>l&&(n+=s>1e10*l?M[o]*(10*r):M[o]*c.FAST_LOG10(s/l))}}return n}var F=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function N(e,t){for(var n=281.0575,o=0;o<L.SBMAX_l-1;o++){var a=e.thm.l[o];if(a>0){var i=a*t,l=e.en.l[o];l>i&&(n+=l>1e10*i?F[o]*(10*r):F[o]*c.FAST_LOG10(l/i))}}return n}function D(e,t,n,o,r){var a,i;for(a=i=0;a<e.npart_l;++a){var l,s=0,c=0;for(l=0;l<e.numlines_l[a];++l,++i){var d=t[i];s+=d,c<d&&(c=d)}n[a]=s,o[a]=c,r[a]=s*e.rnumlines_l[a]}}function V(e,t,n,o){var r=E.length-1,a=0,i=n[a]+n[a+1];for(i>0?((l=t[a])<t[a+1]&&(l=t[a+1]),(s=0|(i=20*(2*l-i)/(i*(e.numlines_l[a]+e.numlines_l[a+1]-1))))>r&&(s=r),o[a]=s):o[a]=0,a=1;a<e.npart_l-1;a++){var l,s;(i=n[a-1]+n[a]+n[a+1])>0?((l=t[a-1])<t[a]&&(l=t[a]),l<t[a+1]&&(l=t[a+1]),(s=0|(i=20*(3*l-i)/(i*(e.numlines_l[a-1]+e.numlines_l[a]+e.numlines_l[a+1]-1))))>r&&(s=r),o[a]=s):o[a]=0}(i=n[a-1]+n[a])>0?((l=t[a-1])<t[a]&&(l=t[a]),(s=0|(i=20*(2*l-i)/(i*(e.numlines_l[a-1]+e.numlines_l[a]-1))))>r&&(s=r),o[a]=s):o[a]=0}var O=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function P(t,n,o,r,a,i,l,s){var d=t.internal_flags;if(r<2)e.fft_long(d,l[s],r,n,o);else if(2==r)for(var u=L.BLKSIZE-1;u>=0;--u){var m=l[s+0][u],f=l[s+1][u];l[s+0][u]=(m+f)*c.SQRT2*.5,l[s+1][u]=(m-f)*c.SQRT2*.5}for(i[0]=l[s+0][0],i[0]*=i[0],u=L.BLKSIZE/2-1;u>=0;--u){var p=l[s+0][L.BLKSIZE/2-u],_=l[s+0][L.BLKSIZE/2+u];i[L.BLKSIZE/2-u]=.5*(p*p+_*_)}var v=0;for(u=11;u<L.HBLKSIZE;u++)v+=i[u];if(d.tot_ener[r]=v,t.analysis){for(u=0;u<L.HBLKSIZE;u++)d.pinfo.energy[a][r][u]=d.pinfo.energy_save[r][u],d.pinfo.energy_save[r][u]=i[u];d.pinfo.pe[a][r]=d.pe[r]}}function H(t,n,o,r,a,i,l,s){var d=t.internal_flags;if(0==a&&r<2&&e.fft_short(d,l[s],r,n,o),2==r)for(var u=L.BLKSIZE_s-1;u>=0;--u){var m=l[s+0][a][u],f=l[s+1][a][u];l[s+0][a][u]=(m+f)*c.SQRT2*.5,l[s+1][a][u]=(m-f)*c.SQRT2*.5}for(i[a][0]=l[s+0][a][0],i[a][0]*=i[a][0],u=L.BLKSIZE_s/2-1;u>=0;--u){var p=l[s+0][a][L.BLKSIZE_s/2-u],_=l[s+0][a][L.BLKSIZE_s/2+u];i[a][L.BLKSIZE_s/2-u]=.5*(p*p+_*_)}}function U(e,t,n,o){var r=e.internal_flags;2==e.athaa_loudapprox&&n<2&&(r.loudness_sq[t][n]=r.loudness_sq_save[n],r.loudness_sq_save[n]=_(o,r))}this.L3psycho_anal_ns=function(e,r,a,c,u,p,_,h,g,b){var S,k,y,B,I,M,F,P,H,U,q=e.internal_flags,$=o([2,L.BLKSIZE]),j=o([2,3,L.BLKSIZE_s]),Y=n(L.CBANDS+1),G=n(L.CBANDS+1),X=n(L.CBANDS+2),z=t(2),K=t(2),W=o([2,576]),Q=t(L.CBANDS+2),Z=t(L.CBANDS+2);for(l.fill(Z,0),S=q.channels_out,e.mode==f.JOINT_STEREO&&(S=4),H=e.VBR==m.vbr_off?0==q.ResvMax?0:q.ResvSize/q.ResvMax*.5:e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh||e.VBR==m.vbr_mt?.6:1,k=0;k<q.channels_out;k++){var J=r[k],ee=a+576-350-s+192;for(B=0;B<576;B++){var te,ne;for(te=J[ee+B+10],ne=0,I=0;I<9;I+=2)te+=O[I]*(J[ee+B+I]+J[ee+B+s-I]),ne+=O[I+1]*(J[ee+B+I+1]+J[ee+B+s-I-1]);W[k][B]=te+ne}u[c][k].en.assign(q.en[k]),u[c][k].thm.assign(q.thm[k]),S>2&&(p[c][k].en.assign(q.en[k+2]),p[c][k].thm.assign(q.thm[k+2]))}for(k=0;k<S;k++){var oe,re=n(12),ae=[0,0,0,0],ie=n(12),le=1,se=n(L.CBANDS),ce=n(L.CBANDS),de=[0,0,0,0],ue=n(L.HBLKSIZE),me=o([3,L.HBLKSIZE_s]);for(B=0;B<3;B++)re[B]=q.nsPsy.last_en_subshort[k][B+6],ie[B]=re[B]/q.nsPsy.last_en_subshort[k][B+4],ae[0]+=re[B];if(2==k)for(B=0;B<576;B++){var fe,pe;fe=W[0][B],pe=W[1][B],W[0][B]=fe+pe,W[1][B]=fe-pe}var _e=W[1&k],ve=0;for(B=0;B<9;B++){for(var he=ve+64,ge=1;ve<he;ve++)ge<Math.abs(_e[ve])&&(ge=Math.abs(_e[ve]));q.nsPsy.last_en_subshort[k][B]=re[B+3]=ge,ae[1+B/3]+=ge,ge>re[B+3-2]?ge/=re[B+3-2]:ge=re[B+3-2]>10*ge?re[B+3-2]/(10*ge):0,ie[B+3]=ge}if(e.analysis){var be=ie[0];for(B=1;B<12;B++)be<ie[B]&&(be=ie[B]);q.pinfo.ers[c][k]=q.pinfo.ers_save[k],q.pinfo.ers_save[k]=be}for(oe=3==k?q.nsPsy.attackthre_s:q.nsPsy.attackthre,B=0;B<12;B++)0==de[B/3]&&ie[B]>oe&&(de[B/3]=B%3+1);for(B=1;B<4;B++)(ae[B-1]>ae[B]?ae[B-1]/ae[B]:ae[B]/ae[B-1])<1.7&&(de[B]=0,1==B&&(de[0]=0));for(0!=de[0]&&0!=q.nsPsy.lastAttacks[k]&&(de[0]=0),3!=q.nsPsy.lastAttacks[k]&&de[0]+de[1]+de[2]+de[3]==0||(le=0,0!=de[1]&&0!=de[0]&&(de[1]=0),0!=de[2]&&0!=de[1]&&(de[2]=0),0!=de[3]&&0!=de[2]&&(de[3]=0)),k<2?K[k]=le:0==le&&(K[0]=K[1]=0),g[k]=q.tot_ener[k],v(e,ue,me,$,1&k,j,1&k,c,k,r,a),D(q,ue,Y,se,ce),V(q,se,ce,Q),P=0;P<3;P++){var Ee,Se;for(R(e,me,G,X,k,P),A(q,G,X,k,P),F=0;F<L.SBMAX_s;F++){if(Se=q.thm[k].s[F][P],Se*=.8,de[P]>=2||1==de[P+1]){var ke=0!=P?P-1:2;ge=x(q.thm[k].s[F][ke],Se,.6*H),Se=Math.min(Se,ge)}1==de[P]?(ke=0!=P?P-1:2,ge=x(q.thm[k].s[F][ke],Se,i*H),Se=Math.min(Se,ge)):(0!=P&&3==de[P-1]||0==P&&3==q.nsPsy.lastAttacks[k])&&(ke=2!=P?P+1:0,ge=x(q.thm[k].s[F][ke],Se,i*H),Se=Math.min(Se,ge)),Ee=re[3*P+3]+re[3*P+4]+re[3*P+5],6*re[3*P+5]<Ee&&(Se*=.5,6*re[3*P+4]<Ee&&(Se*=.5)),q.thm[k].s[F][P]=Se}}for(q.nsPsy.lastAttacks[k]=de[2],M=0,y=0;y<q.npart_l;y++){for(var ye=q.s3ind[y][0],Te=Y[ye]*E[Q[ye]],Be=q.s3_ll[M++]*Te;++ye<=q.s3ind[y][1];)Te=Y[ye]*E[Q[ye]],Be=T(Be,q.s3_ll[M++]*Te,ye,ye-y,q,0);Be*=.158489319246111,q.blocktype_old[1&k]==L.SHORT_TYPE?X[y]=Be:X[y]=x(Math.min(Be,Math.min(2*q.nb_1[k][y],16*q.nb_2[k][y])),Be,H),q.nb_2[k][y]=q.nb_1[k][y],q.nb_1[k][y]=Be}for(;y<=L.CBANDS;++y)Y[y]=0,X[y]=0;C(q,Y,X,k)}for(e.mode!=f.STEREO&&e.mode!=f.JOINT_STEREO||e.interChRatio>0&&function(e,t){var n=e.internal_flags;if(n.channels_out>1){for(var o=0;o<L.SBMAX_l;o++){var r=n.thm[0].l[o],a=n.thm[1].l[o];n.thm[0].l[o]+=a*t,n.thm[1].l[o]+=r*t}for(o=0;o<L.SBMAX_s;o++)for(var i=0;i<3;i++)r=n.thm[0].s[o][i],a=n.thm[1].s[o][i],n.thm[0].s[o][i]+=a*t,n.thm[1].s[o][i]+=r*t}}(e,e.interChRatio),e.mode==f.JOINT_STEREO&&(function(e){for(var t=0;t<L.SBMAX_l;t++)if(!(e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t])){var n=e.mld_l[t]*e.en[3].l[t],o=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n));n=e.mld_l[t]*e.en[2].l[t];var r=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n));e.thm[2].l[t]=o,e.thm[3].l[t]=r}for(t=0;t<L.SBMAX_s;t++)for(var a=0;a<3;a++)e.thm[0].s[t][a]>1.58*e.thm[1].s[t][a]||e.thm[1].s[t][a]>1.58*e.thm[0].s[t][a]||(n=e.mld_s[t]*e.en[3].s[t][a],o=Math.max(e.thm[2].s[t][a],Math.min(e.thm[3].s[t][a],n)),n=e.mld_s[t]*e.en[2].s[t][a],r=Math.max(e.thm[3].s[t][a],Math.min(e.thm[2].s[t][a],n)),e.thm[2].s[t][a]=o,e.thm[3].s[t][a]=r)}(q),U=e.msfix,Math.abs(U)>0&&function(e,t,n){var o=t,r=Math.pow(10,n);t*=2,o*=2;for(var a=0;a<L.SBMAX_l;a++)d=e.ATH.cb_l[e.bm_l[a]]*r,(l=Math.min(Math.max(e.thm[0].l[a],d),Math.max(e.thm[1].l[a],d)))*t<(s=Math.max(e.thm[2].l[a],d))+(c=Math.max(e.thm[3].l[a],d))&&(s*=u=l*o/(s+c),c*=u),e.thm[2].l[a]=Math.min(s,e.thm[2].l[a]),e.thm[3].l[a]=Math.min(c,e.thm[3].l[a]);for(r*=L.BLKSIZE_s/L.BLKSIZE,a=0;a<L.SBMAX_s;a++)for(var i=0;i<3;i++){var l,s,c,d,u;d=e.ATH.cb_s[e.bm_s[a]]*r,(l=Math.min(Math.max(e.thm[0].s[a][i],d),Math.max(e.thm[1].s[a][i],d)))*t<(s=Math.max(e.thm[2].s[a][i],d))+(c=Math.max(e.thm[3].s[a][i],d))&&(s*=u=l*t/(s+c),c*=u),e.thm[2].s[a][i]=Math.min(e.thm[2].s[a][i],s),e.thm[3].s[a][i]=Math.min(e.thm[3].s[a][i],c)}}(q,U,e.ATHlower*q.ATH.adjust)),function(e,t,n,o){var r=e.internal_flags;e.short_blocks!=d.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var a=0;a<r.channels_out;a++)o[a]=L.NORM_TYPE,e.short_blocks==d.short_block_dispensed&&(t[a]=1),e.short_blocks==d.short_block_forced&&(t[a]=0),0!=t[a]?r.blocktype_old[a]==L.SHORT_TYPE&&(o[a]=L.STOP_TYPE):(o[a]=L.SHORT_TYPE,r.blocktype_old[a]==L.NORM_TYPE&&(r.blocktype_old[a]=L.START_TYPE),r.blocktype_old[a]==L.STOP_TYPE&&(r.blocktype_old[a]=L.SHORT_TYPE)),n[a]=r.blocktype_old[a],r.blocktype_old[a]=o[a]}(e,K,b,z),k=0;k<S;k++){var Ie,Ae,Ce,Re=0;k>1?(Ie=h,Re=-2,Ae=L.NORM_TYPE,b[0]!=L.SHORT_TYPE&&b[1]!=L.SHORT_TYPE||(Ae=L.SHORT_TYPE),Ce=p[c][k-2]):(Ie=_,Re=0,Ae=b[k],Ce=u[c][k]),Ae==L.SHORT_TYPE?Ie[Re+k]=w(Ce,q.masking_lower):Ie[Re+k]=N(Ce,q.masking_lower),e.analysis&&(q.pinfo.pe[c][k]=Ie[Re+k])}return 0};var q=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function $(e,t,n){if(0==n)for(var o=0;o<e.npart_s;o++)e.nb_s2[t][o]=e.nb_s1[t][o],e.nb_s1[t][o]=0}function Y(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}function G(e,t,o,r,a,i){var l,s,c,d=e.internal_flags,u=new float[L.CBANDS],m=n(L.CBANDS),f=new int[L.CBANDS];for(c=s=0;c<d.npart_s;++c){var p=0,_=0,v=d.numlines_s[c];for(l=0;l<v;++l,++s){var h=t[i][s];p+=h,_<h&&(_=h)}o[c]=p,u[c]=_,m[c]=p/v}for(;c<L.CBANDS;++c)u[c]=0,m[c]=0;for(function(e,t,n,o){var r=E.length-1,a=0,i=n[a]+n[a+1];for(i>0?((l=t[a])<t[a+1]&&(l=t[a+1]),(s=0|(i=20*(2*l-i)/(i*(e.numlines_s[a]+e.numlines_s[a+1]-1))))>r&&(s=r),o[a]=s):o[a]=0,a=1;a<e.npart_s-1;a++){var l,s;(i=n[a-1]+n[a]+n[a+1])>0?((l=t[a-1])<t[a]&&(l=t[a]),l<t[a+1]&&(l=t[a+1]),(s=0|(i=20*(3*l-i)/(i*(e.numlines_s[a-1]+e.numlines_s[a]+e.numlines_s[a+1]-1))))>r&&(s=r),o[a]=s):o[a]=0}(i=n[a-1]+n[a])>0?((l=t[a-1])<t[a]&&(l=t[a]),(s=0|(i=20*(2*l-i)/(i*(e.numlines_s[a-1]+e.numlines_s[a]-1))))>r&&(s=r),o[a]=s):o[a]=0}(d,u,m,f),s=c=0;c<d.npart_s;c++){var g,b,S,k,y,T=d.s3ind_s[c][0],B=d.s3ind_s[c][1];for(g=f[T],b=1,k=d.s3_ss[s]*o[T]*E[f[T]],++s,++T;T<=B;)g+=f[T],b+=1,k=I(k,S=d.s3_ss[s]*o[T]*E[f[T]],T-c),++s,++T;k*=y=.5*E[g=(1+2*g)/(2*b)],r[c]=k,d.nb_s2[a][c]=d.nb_s1[a][c],d.nb_s1[a][c]=k,S=u[c],S*=d.minval_s[c],S*=y,r[c]>S&&(r[c]=S),d.masking_lower>1&&(r[c]*=d.masking_lower),r[c]>o[c]&&(r[c]=o[c]),d.masking_lower<1&&(r[c]*=d.masking_lower)}for(;c<L.CBANDS;++c)o[c]=0,r[c]=0}function X(e,o,r,a,l){var s,c=n(L.CBANDS),d=n(L.CBANDS),u=t(L.CBANDS+2);D(e,o,r,c,d),V(e,c,d,u);var m=0;for(s=0;s<e.npart_l;s++){var f,p,_,v=e.s3ind[s][0],h=e.s3ind[s][1],g=0,b=0;for(g=u[v],b+=1,p=e.s3_ll[m]*r[v]*E[u[v]],++m,++v;v<=h;)g+=u[v],b+=1,p=I(p,f=e.s3_ll[m]*r[v]*E[u[v]],v-s),++m,++v;if(p*=_=.5*E[g=(1+2*g)/(2*b)],e.blocktype_old[1&l]==L.SHORT_TYPE){var S=2*e.nb_1[l][s];a[s]=S>0?Math.min(p,S):Math.min(p,r[s]*i)}else{var k=16*e.nb_2[l][s],y=2*e.nb_1[l][s];k<=0&&(k=p),y<=0&&(y=p),S=e.blocktype_old[1&l]==L.NORM_TYPE?Math.min(y,k):y,a[s]=Math.min(p,S)}e.nb_2[l][s]=e.nb_1[l][s],e.nb_1[l][s]=p,f=c[s],f*=e.minval_l[s],f*=_,a[s]>f&&(a[s]=f),e.masking_lower>1&&(a[s]*=e.masking_lower),a[s]>r[s]&&(a[s]=r[s]),e.masking_lower<1&&(a[s]*=e.masking_lower)}for(;s<L.CBANDS;++s)r[s]=0,a[s]=0}function z(e,t,n,o,r,a,i){for(var l,s,c=2*a,d=a>0?Math.pow(10,r):1,u=0;u<i;++u){var m=e[2][u],f=e[3][u],p=t[0][u],_=t[1][u],v=t[2][u],h=t[3][u];if(p<=1.58*_&&_<=1.58*p){var g=n[u]*f,b=n[u]*m;s=Math.max(v,Math.min(h,g)),l=Math.max(h,Math.min(v,b))}else s=v,l=h;if(a>0){var E,S,k=o[u]*d;if(E=Math.min(Math.max(p,k),Math.max(_,k)),(S=(v=Math.max(s,k))+(h=Math.max(l,k)))>0&&E*c<S){var y=E*c/S;v*=y,h*=y}s=Math.min(v,s),l=Math.min(h,l)}s>m&&(s=m),l>f&&(l=f),t[2][u]=s,t[3][u]=l}}function K(e,t){var n;return(n=e>=0?27*-e:e*t)<=-72?0:Math.exp(n*p)}function W(e){var t,n,o,r,a=0;for(a=0;K(a,e)>1e-20;a-=1);for(o=a,r=0;Math.abs(r-o)>1e-12;)K(a=(r+o)/2,e)>0?r=a:o=a;for(t=o,a=0,a=0;K(a,e)>1e-20;a+=1);for(o=0,r=a;Math.abs(r-o)>1e-12;)K(a=(r+o)/2,e)>0?o=a:r=a;n=r;var i,l=0;for(i=0;i<=1e3;++i)l+=K(a=t+i*(n-t)/1e3,e);return 1001/(l*(n-t))}function Q(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function Z(e,o,r,a,i,l,s,c,d,u,m,f){var p,_=n(L.CBANDS+1),v=c/(f>15?1152:384),h=t(L.HBLKSIZE);c/=d;var g=0,b=0;for(p=0;p<L.CBANDS;p++){var E;for(R=Q(c*g),_[p]=c*g,E=g;Q(c*E)-R<.34&&E<=d/2;E++);for(e[p]=E-g,b=p+1;g<E;)h[g++]=p;if(g>d/2){g=d/2,++p;break}}_[p]=c*g;for(var S=0;S<f;S++){var k,y,T,B,I;T=u[S],B=u[S+1],(k=0|Math.floor(.5+m*(T-.5)))<0&&(k=0),(y=0|Math.floor(.5+m*(B-.5)))>d/2&&(y=d/2),r[S]=(h[k]+h[y])/2,o[S]=h[y];var A=v*B;s[S]=(A-_[o[S]])/(_[o[S]+1]-_[o[S]]),s[S]<0?s[S]=0:s[S]>1&&(s[S]=1),I=Q(c*u[S]*m),I=Math.min(I,15.5)/15.5,l[S]=Math.pow(10,1.25*(1-Math.cos(Math.PI*I))-2.5)}g=0;for(var C=0;C<b;C++){var R,x,M=e[C];R=Q(c*g),x=Q(c*(g+M-1)),a[C]=.5*(R+x),R=Q(c*(g-.5)),x=Q(c*(g+M-.5)),i[C]=x-R,g+=M}return b}function J(e,t,r,a,i,l){var s,c,d,u,m,f=o([L.CBANDS,L.CBANDS]),_=0;if(l)for(var v=0;v<t;v++)for(s=0;s<t;s++){var h=(c=void 0,void 0,void 0,m=void 0,c=r[v]-r[s],d=(c*=c>=0?3:1.5)>=.5&&c<=2.5?8*((m=c-.5)*m-2*m):0,((u=15.811389+7.5*(c+=.474)-17.5*Math.sqrt(1+c*c))<=-60?0:(c=Math.exp((d+u)*p),c/=.6609193))*a[s]);f[v][s]=h*i[v]}else for(s=0;s<t;s++){var g=15+Math.min(21/r[s],12),b=W(g);for(v=0;v<t;v++)h=b*K(r[v]-r[s],g)*a[s],f[v][s]=h*i[v]}for(v=0;v<t;v++){for(s=0;s<t&&!(f[v][s]>0);s++);for(e[v][0]=s,s=t-1;s>0&&!(f[v][s]>0);s--);e[v][1]=s,_+=e[v][1]-e[v][0]+1}var E=n(_),S=0;for(v=0;v<t;v++)for(s=e[v][0];s<=e[v][1];s++)E[S++]=f[v][s];return E}function ee(e){var t=Q(e);return t=Math.min(t,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*t))-2.5)}function te(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}this.L3psycho_anal_vbr=function(e,r,a,i,l,c,u,m,p,_){var v=e.internal_flags,h=n(L.HBLKSIZE),g=o([3,L.HBLKSIZE_s]),b=o([2,L.BLKSIZE]),E=o([2,3,L.BLKSIZE_s]),S=o([4,L.CBANDS]),k=o([4,L.CBANDS]),y=o([4,3]),T=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],B=t(2),I=e.mode==f.JOINT_STEREO?4:v.channels_out;!function(e,t,r,a,i,l,c,d,u,m){for(var p=o([2,576]),_=e.internal_flags,v=_.channels_out,h=e.mode==f.JOINT_STEREO?4:v,g=0;g<v;g++){firbuf=t[g];for(var b=r+576-350-s+192,E=0;E<576;E++){var S,k;S=firbuf[b+E+10],k=0;for(var y=0;y<9;y+=2)S+=q[y]*(firbuf[b+E+y]+firbuf[b+E+s-y]),k+=q[y+1]*(firbuf[b+E+y+1]+firbuf[b+E+s-y-1]);p[g][E]=S+k}i[a][g].en.assign(_.en[g]),i[a][g].thm.assign(_.thm[g]),h>2&&(l[a][g].en.assign(_.en[g+2]),l[a][g].thm.assign(_.thm[g+2]))}for(g=0;g<h;g++){var T=n(12),B=n(12),I=[0,0,0,0],A=p[1&g],C=0,R=3==g?_.nsPsy.attackthre_s:_.nsPsy.attackthre,x=1;if(2==g)for(E=0,y=576;y>0;++E,--y){var M=p[0][E],w=p[1][E];p[0][E]=M+w,p[1][E]=M-w}for(E=0;E<3;E++)B[E]=_.nsPsy.last_en_subshort[g][E+6],T[E]=B[E]/_.nsPsy.last_en_subshort[g][E+4],I[0]+=B[E];for(E=0;E<9;E++){for(var F=C+64,N=1;C<F;C++)N<Math.abs(A[C])&&(N=Math.abs(A[C]));_.nsPsy.last_en_subshort[g][E]=B[E+3]=N,I[1+E/3]+=N,N>B[E+3-2]?N/=B[E+3-2]:N=B[E+3-2]>10*N?B[E+3-2]/(10*N):0,T[E+3]=N}for(E=0;E<3;++E){var D=B[3*E+3]+B[3*E+4]+B[3*E+5],V=1;6*B[3*E+5]<D&&(V*=.5,6*B[3*E+4]<D&&(V*=.5)),d[g][E]=V}if(e.analysis){var O=T[0];for(E=1;E<12;E++)O<T[E]&&(O=T[E]);_.pinfo.ers[a][g]=_.pinfo.ers_save[g],_.pinfo.ers_save[g]=O}for(E=0;E<12;E++)0==u[g][E/3]&&T[E]>R&&(u[g][E/3]=E%3+1);for(E=1;E<4;E++){var L=I[E-1],P=I[E];Math.max(L,P)<4e4&&L<1.7*P&&P<1.7*L&&(1==E&&u[g][0]<=u[g][E]&&(u[g][0]=0),u[g][E]=0)}u[g][0]<=_.nsPsy.lastAttacks[g]&&(u[g][0]=0),3!=_.nsPsy.lastAttacks[g]&&u[g][0]+u[g][1]+u[g][2]+u[g][3]==0||(x=0,0!=u[g][1]&&0!=u[g][0]&&(u[g][1]=0),0!=u[g][2]&&0!=u[g][1]&&(u[g][2]=0),0!=u[g][3]&&0!=u[g][2]&&(u[g][3]=0)),g<2?m[g]=x:0==x&&(m[0]=m[1]=0),c[g]=_.tot_ener[g]}}(e,r,a,i,l,c,p,y,T,B),function(e,t){var n=e.internal_flags;e.short_blocks!=d.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var o=0;o<n.channels_out;o++)e.short_blocks==d.short_block_dispensed&&(t[o]=1),e.short_blocks==d.short_block_forced&&(t[o]=0)}(e,B);for(var R=0;R<I;R++)P(e,r,a,R,i,h,b,F=1&R),U(e,i,R,h),0!=B[F]?X(v,h,S[R],k[R],R):Y(v,R);for(B[0]+B[1]==2&&e.mode==f.JOINT_STEREO&&z(S,k,v.mld_cb_l,v.ATH.cb_l,e.ATHlower*v.ATH.adjust,e.msfix,v.npart_l),R=0;R<I;R++)0!=B[F=1&R]&&C(v,S[R],k[R],R);for(var M=0;M<3;M++){for(R=0;R<I;++R)0!=B[F=1&R]?$(v,R,M):(H(e,r,a,R,M,g,E,F),G(e,g,S[R],k[R],R,M));for(B[0]+B[1]==0&&e.mode==f.JOINT_STEREO&&z(S,k,v.mld_cb_s,v.ATH.cb_s,e.ATHlower*v.ATH.adjust,e.msfix,v.npart_s),R=0;R<I;++R)0==B[F=1&R]&&A(v,S[R],k[R],R,M)}for(R=0;R<I;R++){var F;if(0==B[F=1&R])for(var D=0;D<L.SBMAX_s;D++){var V=n(3);for(M=0;M<3;M++){var O=v.thm[R].s[D][M];if(O*=.8,T[R][M]>=2||1==T[R][M+1]){var j=0!=M?M-1:2,K=x(v.thm[R].s[D][j],O,.36);O=Math.min(O,K)}else 1==T[R][M]?(j=0!=M?M-1:2,K=x(v.thm[R].s[D][j],O,.18),O=Math.min(O,K)):(0!=M&&3==T[R][M-1]||0==M&&3==v.nsPsy.lastAttacks[R])&&(j=2!=M?M+1:0,K=x(v.thm[R].s[D][j],O,.18),O=Math.min(O,K));O*=y[R][M],V[M]=O}for(M=0;M<3;M++)v.thm[R].s[D][M]=V[M]}}for(R=0;R<I;R++)v.nsPsy.lastAttacks[R]=T[R][2];for(function(e,t,n){for(var o=e.internal_flags,r=0;r<o.channels_out;r++){var a=L.NORM_TYPE;0!=t[r]?o.blocktype_old[r]==L.SHORT_TYPE&&(a=L.STOP_TYPE):(a=L.SHORT_TYPE,o.blocktype_old[r]==L.NORM_TYPE&&(o.blocktype_old[r]=L.START_TYPE),o.blocktype_old[r]==L.STOP_TYPE&&(o.blocktype_old[r]=L.SHORT_TYPE)),n[r]=o.blocktype_old[r],o.blocktype_old[r]=a}}(e,B,_),R=0;R<I;R++){var W,Q,Z,J;R>1?(W=m,Q=-2,Z=L.NORM_TYPE,_[0]!=L.SHORT_TYPE&&_[1]!=L.SHORT_TYPE||(Z=L.SHORT_TYPE),J=c[i][R-2]):(W=u,Q=0,Z=_[R],J=l[i][R]),Z==L.SHORT_TYPE?W[Q+R]=w(J,v.masking_lower):W[Q+R]=N(J,v.masking_lower),e.analysis&&(v.pinfo.pe[i][R]=W[Q+R])}return 0},this.psymodel_init=function(t){var o,a,i=t.internal_flags,l=!0,s=13,c=0,d=0,f=-8.25,p=-4.5,_=n(L.CBANDS),v=n(L.CBANDS),E=n(L.CBANDS),S=t.out_samplerate;switch(t.experimentalZ){default:l=!0;break;case 1:l=t.VBR!=m.vbr_mtrh&&t.VBR!=m.vbr_mt;break;case 2:l=!1;break;case 3:s=8,c=-1.75,d=-.0125,f=-8.25,p=-2.25}for(i.ms_ener_ratio_old=.25,i.blocktype_old[0]=i.blocktype_old[1]=L.NORM_TYPE,o=0;o<4;++o){for(var k=0;k<L.CBANDS;++k)i.nb_1[o][k]=1e20,i.nb_2[o][k]=1e20,i.nb_s1[o][k]=i.nb_s2[o][k]=1;for(var y=0;y<L.SBMAX_l;y++)i.en[o].l[y]=1e20,i.thm[o].l[y]=1e20;for(k=0;k<3;++k){for(y=0;y<L.SBMAX_s;y++)i.en[o].s[y][k]=1e20,i.thm[o].s[y][k]=1e20;i.nsPsy.lastAttacks[o]=0}for(k=0;k<9;k++)i.nsPsy.last_en_subshort[o][k]=10}for(i.loudness_sq_save[0]=i.loudness_sq_save[1]=0,i.npart_l=Z(i.numlines_l,i.bo_l,i.bm_l,_,v,i.mld_l,i.PSY.bo_l_weight,S,L.BLKSIZE,i.scalefac_band.l,L.BLKSIZE/1152,L.SBMAX_l),o=0;o<i.npart_l;o++){var T=c;_[o]>=s&&(T=d*(_[o]-s)/(24-s)+c*(24-_[o])/(24-s)),E[o]=Math.pow(10,T/10),i.numlines_l[o]>0?i.rnumlines_l[o]=1/i.numlines_l[o]:i.rnumlines_l[o]=0}for(i.s3_ll=J(i.s3ind,i.npart_l,_,v,E,l),k=0,o=0;o<i.npart_l;o++){A=u.MAX_VALUE;for(var B=0;B<i.numlines_l[o];B++,k++){var I=S*k/(1e3*L.BLKSIZE);C=this.ATHformula(1e3*I,t)-20,C=Math.pow(10,.1*C),A>(C*=i.numlines_l[o])&&(A=C)}i.ATH.cb_l[o]=A,(A=20*_[o]/10-20)>6&&(A=100),A<-15&&(A=-15),A-=8,i.minval_l[o]=Math.pow(10,A/10)*i.numlines_l[o]}for(i.npart_s=Z(i.numlines_s,i.bo_s,i.bm_s,_,v,i.mld_s,i.PSY.bo_s_weight,S,L.BLKSIZE_s,i.scalefac_band.s,L.BLKSIZE_s/384,L.SBMAX_s),k=0,o=0;o<i.npart_s;o++){var A;for(T=f,_[o]>=s&&(T=p*(_[o]-s)/(24-s)+f*(24-_[o])/(24-s)),E[o]=Math.pow(10,T/10),A=u.MAX_VALUE,B=0;B<i.numlines_s[o];B++,k++){var C;I=S*k/(1e3*L.BLKSIZE_s),C=this.ATHformula(1e3*I,t)-20,C=Math.pow(10,.1*C),A>(C*=i.numlines_s[o])&&(A=C)}i.ATH.cb_s[o]=A,A=7*_[o]/12-7,_[o]>12&&(A*=1+3.1*Math.log(1+A)),_[o]<12&&(A*=1+2.3*Math.log(1-A)),A<-15&&(A=-15),A-=8,i.minval_s[o]=Math.pow(10,A/10)*i.numlines_s[o]}i.s3_ss=J(i.s3ind_s,i.npart_s,_,v,E,l),h=Math.pow(10,9/16),g=Math.pow(10,1.5),b=Math.pow(10,1.5),e.init_fft(i),i.decay=Math.exp(-1*r/(.01*S/192)),a=3.5,0!=(2&t.exp_nspsytune)&&(a=1),Math.abs(t.msfix)>0&&(a=t.msfix),t.msfix=a;for(var R=0;R<i.npart_l;R++)i.s3ind[R][1]>i.npart_l-1&&(i.s3ind[R][1]=i.npart_l-1);var x=576*i.mode_gr/S;if(i.ATH.decay=Math.pow(10,-1.2*x),i.ATH.adjust=.01,i.ATH.adjustLimit=1,-1!=t.ATHtype){var M=t.out_samplerate/L.BLKSIZE,w=0;for(I=0,o=0;o<L.BLKSIZE/2;++o)I+=M,i.ATH.eql_w[o]=1/Math.pow(10,this.ATHformula(I,t)/10),w+=i.ATH.eql_w[o];for(w=1/w,o=L.BLKSIZE/2;--o>=0;)i.ATH.eql_w[o]*=w}for(R=k=0;R<i.npart_s;++R)for(o=0;o<i.numlines_s[R];++o)++k;for(R=k=0;R<i.npart_l;++R)for(o=0;o<i.numlines_l[R];++o)++k;for(k=0,o=0;o<i.npart_l;o++)I=S*(k+i.numlines_l[o]/2)/(1*L.BLKSIZE),i.mld_cb_l[o]=ee(I),k+=i.numlines_l[o];for(;o<L.CBANDS;++o)i.mld_cb_l[o]=1;for(k=0,o=0;o<i.npart_s;o++)I=S*(k+i.numlines_s[o]/2)/(1*L.BLKSIZE_s),i.mld_cb_s[o]=ee(I),k+=i.numlines_s[o];for(;o<L.CBANDS;++o)i.mld_cb_s[o]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=te(e,9);break;case 1:n=te(e,-1);break;default:n=te(e,0);break;case 3:n=te(e,1)+6;break;case 4:n=te(e,t.ATHcurve)}return n}}function G(){var e,t,o,i,l,c=this;G.V9=410,G.V8=420,G.V7=430,G.V6=440,G.V5=450,G.V4=460,G.V3=470,G.V2=480,G.V1=490,G.V0=500,G.R3MIX=1e3,G.STANDARD=1001,G.EXTREME=1002,G.INSANE=1003,G.STANDARD_FAST=1004,G.EXTREME_FAST=1005,G.MEDIUM=1006,G.MEDIUM_FAST=1007,G.LAME_MAXMP3BUFFER=147456;var u,p,v,h=new Y;function g(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=n(L.SBMAX_l),this.bo_s_weight=n(L.SBMAX_s)}function E(){this.lowerlimit=0}function S(e,t){this.lowpass=t}this.enc=new L,this.setModules=function(n,r,a,s,c,d,m,f,_){e=n,t=r,o=a,i=s,l=c,u=d,p=f,v=_,this.enc.setModules(t,h,i,u)};var y=4294479419;function T(e){return e>1?0:e<=0?1:Math.cos(Math.PI/2*e)}function B(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1,1;case 32e3:return t.version=1,2;case 22050:case 11025:return t.version=0,0;case 24e3:case 12e3:return t.version=0,1;case 16e3:case 8e3:return t.version=0,2;default:return t.version=0,-1}}function x(e,t,n){n<16e3&&(t=2);for(var o=k.bitrate_table[t][1],r=2;r<=14;r++)k.bitrate_table[t][r]>0&&Math.abs(k.bitrate_table[t][r]-e)<Math.abs(o-e)&&(o=k.bitrate_table[t][r]);return o}function M(e,t,n){n<16e3&&(t=2);for(var o=0;o<=14;o++)if(k.bitrate_table[t][o]>0&&k.bitrate_table[t][o]==e)return o;return-1}function w(e,t){var n=[new S(8,2e3),new S(16,3700),new S(24,3900),new S(32,5500),new S(40,7e3),new S(48,7500),new S(56,1e4),new S(64,11e3),new S(80,13500),new S(96,15100),new S(112,15600),new S(128,17e3),new S(160,17500),new S(192,18600),new S(224,19400),new S(256,19700),new S(320,20500)],o=c.nearestBitrateFullIndex(t);e.lowerlimit=n[o].lowpass}function F(e){var t=L.BLKSIZE+e.framesize-L.FFTOFFSET;return Math.max(t,512+e.framesize-32)}function N(e,t,n,o,r,a){var i=c.enc.lame_encode_mp3_frame(e,t,n,o,r,a);return e.frameNum++,i}function D(){this.n_in=0,this.n_out=0}function V(){this.num_used=0}function O(e,t,n){var o=Math.PI*t;(e/=n)<0&&(e=0),e>1&&(e=1);var r=e-.5,a=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(r)<1e-9?o/Math.PI:a*Math.sin(n*o*r)/(Math.PI*n*r)}function P(e,t,o,r,a,i,l,s,c){var d,u,m=e.internal_flags,f=0,p=e.out_samplerate/function e(t,n){return 0!=n?e(n,t%n):t}(e.out_samplerate,e.in_samplerate);p>$.BPC&&(p=$.BPC);var _=Math.abs(m.resample_ratio-Math.floor(.5+m.resample_ratio))<1e-4?1:0,v=1/m.resample_ratio;v>1&&(v=1);var h=31;0==h%2&&--h;var g=(h+=_)+1;if(0==m.fill_buffer_resample_init){for(m.inbuf_old[0]=n(g),m.inbuf_old[1]=n(g),d=0;d<=2*p;++d)m.blackfilt[d]=n(g);for(m.itime[0]=0,m.itime[1]=0,f=0;f<=2*p;f++){var b=0,E=(f-p)/(2*p);for(d=0;d<=h;d++)b+=m.blackfilt[f][d]=O(d-E,v,h);for(d=0;d<=h;d++)m.blackfilt[f][d]/=b}m.fill_buffer_resample_init=1}var S=m.inbuf_old[c];for(u=0;u<r;u++){var k,y;if(k=u*m.resample_ratio,h+(f=0|Math.floor(k-m.itime[c]))-h/2>=l)break;E=k-m.itime[c]-(f+h%2*.5),y=0|Math.floor(2*E*p+p+.5);var T=0;for(d=0;d<=h;++d){var B=0|d+f-h/2;T+=(B<0?S[g+B]:a[i+B])*m.blackfilt[y][d]}t[o+u]=T}if(s.num_used=Math.min(l,h+f-h/2),m.itime[c]+=s.num_used-u*m.resample_ratio,s.num_used>=g)for(d=0;d<g;d++)S[d]=a[i+s.num_used+d-g];else{var I=g-s.num_used;for(d=0;d<I;++d)S[d]=S[d+s.num_used];for(f=0;d<g;++d,++f)S[d]=a[i+f]}return u}function H(e,t,n,o,r,a){var i=e.internal_flags;if(i.resample_ratio<.9999||i.resample_ratio>1.0001)for(var l=0;l<i.channels_out;l++){var s=new V;a.n_out=P(e,t[l],i.mf_size,e.framesize,n[l],o,r,s,l),a.n_in=s.num_used}else{a.n_out=Math.min(e.framesize,r),a.n_in=a.n_out;for(var c=0;c<a.n_out;++c)t[0][i.mf_size+c]=n[0][o+c],2==i.channels_out&&(t[1][i.mf_size+c]=n[1][o+c])}}this.lame_init=function(){var e=new I;return 0!=function(e){var t;return e.class_id=y,t=e.internal_flags=new $,e.mode=f.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=m.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=L.ENCDELAY+L.POSTDELAY,e.encoder_padding=0,t.mf_size=L.ENCDELAY-L.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0,0}(e)?null:(e.lame_allocated_gfp=1,e)},this.nearestBitrateFullIndex=function(e){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,o=0,r=0,a=0;a=t[16],r=16,o=t[16],n=16;for(var i=0;i<16;i++)if(Math.max(e,t[i+1])!=e){a=t[i+1],r=i+1,o=t[i],n=i;break}return a-e>e-o?n:r},this.lame_init_params=function(n){var a,c,S,I=n.internal_flags;if(I.Class_ID=0,null==I.ATH&&(I.ATH=new R),null==I.PSY&&(I.PSY=new g),null==I.rgdata&&(I.rgdata=new A),I.channels_in=n.num_channels,1==I.channels_in&&(n.mode=f.MONO),I.channels_out=n.mode==f.MONO?1:2,I.mode_ext=L.MPG_MD_MS_LR,n.mode==f.MONO&&(n.force_ms=!1),n.VBR==m.vbr_off&&128!=n.VBR_mean_bitrate_kbps&&0==n.brate&&(n.brate=n.VBR_mean_bitrate_kbps),n.VBR==m.vbr_off||n.VBR==m.vbr_mtrh||n.VBR==m.vbr_mt||(n.free_format=!1),n.VBR==m.vbr_off&&0==n.brate&&b.EQ(n.compression_ratio,0)&&(n.compression_ratio=11.025),n.VBR==m.vbr_off&&n.compression_ratio>0&&(0==n.out_samplerate&&(n.out_samplerate=map2MP3Frequency(int(.97*n.in_samplerate))),n.brate=0|16*n.out_samplerate*I.channels_out/(1e3*n.compression_ratio),I.samplerate_index=B(n.out_samplerate,n),n.free_format||(n.brate=x(n.brate,n.version,n.out_samplerate))),0!=n.out_samplerate&&(n.out_samplerate<16e3?(n.VBR_mean_bitrate_kbps=Math.max(n.VBR_mean_bitrate_kbps,8),n.VBR_mean_bitrate_kbps=Math.min(n.VBR_mean_bitrate_kbps,64)):n.out_samplerate<32e3?(n.VBR_mean_bitrate_kbps=Math.max(n.VBR_mean_bitrate_kbps,8),n.VBR_mean_bitrate_kbps=Math.min(n.VBR_mean_bitrate_kbps,160)):(n.VBR_mean_bitrate_kbps=Math.max(n.VBR_mean_bitrate_kbps,32),n.VBR_mean_bitrate_kbps=Math.min(n.VBR_mean_bitrate_kbps,320))),0==n.lowpassfreq){var F=16e3;switch(n.VBR){case m.vbr_off:w(N=new E,n.brate),F=N.lowerlimit;break;case m.vbr_abr:var N;w(N=new E,n.VBR_mean_bitrate_kbps),F=N.lowerlimit;break;case m.vbr_rh:var D=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=n.VBR_q&&n.VBR_q<=9){var V=D[n.VBR_q],O=D[n.VBR_q+1],P=n.VBR_q_frac;F=linear_int(V,O,P)}else F=19500;break;default:D=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],0<=n.VBR_q&&n.VBR_q<=9?(V=D[n.VBR_q],O=D[n.VBR_q+1],P=n.VBR_q_frac,F=linear_int(V,O,P)):F=19500}n.mode!=f.MONO||n.VBR!=m.vbr_off&&n.VBR!=m.vbr_abr||(F*=1.5),n.lowpassfreq=0|F}if(0==n.out_samplerate&&(2*n.lowpassfreq>n.in_samplerate&&(n.lowpassfreq=n.in_samplerate/2),n.out_samplerate=(a=0|n.lowpassfreq,S=44100,(c=n.in_samplerate)>=48e3?S=48e3:c>=44100?S=44100:c>=32e3?S=32e3:c>=24e3?S=24e3:c>=22050?S=22050:c>=16e3?S=16e3:c>=12e3?S=12e3:c>=11025?S=11025:c>=8e3&&(S=8e3),-1==a?S:(a<=15960&&(S=44100),a<=15250&&(S=32e3),a<=11220&&(S=24e3),a<=9970&&(S=22050),a<=7230&&(S=16e3),a<=5420&&(S=12e3),a<=4510&&(S=11025),a<=3970&&(S=8e3),c<S?c>44100?48e3:c>32e3?44100:c>24e3?32e3:c>22050?24e3:c>16e3?22050:c>12e3?16e3:c>11025?12e3:c>8e3?11025:8e3:S))),n.lowpassfreq=Math.min(20500,n.lowpassfreq),n.lowpassfreq=Math.min(n.out_samplerate/2,n.lowpassfreq),n.VBR==m.vbr_off&&(n.compression_ratio=16*n.out_samplerate*I.channels_out/(1e3*n.brate)),n.VBR==m.vbr_abr&&(n.compression_ratio=16*n.out_samplerate*I.channels_out/(1e3*n.VBR_mean_bitrate_kbps)),n.bWriteVbrTag||(n.findReplayGain=!1,n.decode_on_the_fly=!1,I.findPeakSample=!1),I.findReplayGain=n.findReplayGain,I.decode_on_the_fly=n.decode_on_the_fly,I.decode_on_the_fly&&(I.findPeakSample=!0),I.findReplayGain&&e.InitGainAnalysis(I.rgdata,n.out_samplerate)==_.INIT_GAIN_ANALYSIS_ERROR)return n.internal_flags=null,-6;switch(I.decode_on_the_fly&&!n.decode_only&&(null!=I.hip&&v.hip_decode_exit(I.hip),I.hip=v.hip_decode_init()),I.mode_gr=n.out_samplerate<=24e3?1:2,n.framesize=576*I.mode_gr,n.encoder_delay=L.ENCDELAY,I.resample_ratio=n.in_samplerate/n.out_samplerate,n.VBR){case m.vbr_mt:case m.vbr_rh:case m.vbr_mtrh:n.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][n.VBR_q];break;case m.vbr_abr:n.compression_ratio=16*n.out_samplerate*I.channels_out/(1e3*n.VBR_mean_bitrate_kbps);break;default:n.compression_ratio=16*n.out_samplerate*I.channels_out/(1e3*n.brate)}if(n.mode==f.NOT_SET&&(n.mode=f.JOINT_STEREO),n.highpassfreq>0?(I.highpass1=2*n.highpassfreq,n.highpasswidth>=0?I.highpass2=2*(n.highpassfreq+n.highpasswidth):I.highpass2=2*n.highpassfreq,I.highpass1/=n.out_samplerate,I.highpass2/=n.out_samplerate):(I.highpass1=0,I.highpass2=0),n.lowpassfreq>0?(I.lowpass2=2*n.lowpassfreq,n.lowpasswidth>=0?(I.lowpass1=2*(n.lowpassfreq-n.lowpasswidth),I.lowpass1<0&&(I.lowpass1=0)):I.lowpass1=2*n.lowpassfreq,I.lowpass1/=n.out_samplerate,I.lowpass2/=n.out_samplerate):(I.lowpass1=0,I.lowpass2=0),function(e){var t=e.internal_flags,n=32,o=-1;if(t.lowpass1>0){for(var r=999,a=0;a<=31;a++)(d=a/31)>=t.lowpass2&&(n=Math.min(n,a)),t.lowpass1<d&&d<t.lowpass2&&(r=Math.min(r,a));t.lowpass1=999==r?(n-.75)/31:(r-.75)/31,t.lowpass2=n/31}if(t.highpass2>0&&t.highpass2<.75/31*.9&&(t.highpass1=0,t.highpass2=0,s.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),t.highpass2>0){var i=-1;for(a=0;a<=31;a++)(d=a/31)<=t.highpass1&&(o=Math.max(o,a)),t.highpass1<d&&d<t.highpass2&&(i=Math.max(i,a));t.highpass1=o/31,t.highpass2=-1==i?(o+.75)/31:(i+.75)/31}for(a=0;a<32;a++){var l,c,d=a/31;l=t.highpass2>t.highpass1?T((t.highpass2-d)/(t.highpass2-t.highpass1+1e-20)):1,c=t.lowpass2>t.lowpass1?T((d-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):1,t.amp_filter[a]=l*c}}(n),I.samplerate_index=B(n.out_samplerate,n),I.samplerate_index<0)return n.internal_flags=null,-1;if(n.VBR==m.vbr_off){if(n.free_format)I.bitrate_index=0;else if(n.brate=x(n.brate,n.version,n.out_samplerate),I.bitrate_index=M(n.brate,n.version,n.out_samplerate),I.bitrate_index<=0)return n.internal_flags=null,-1}else I.bitrate_index=1;n.analysis&&(n.bWriteVbrTag=!1),null!=I.pinfo&&(n.bWriteVbrTag=!1),t.init_bit_stream_w(I);for(var H,U=I.samplerate_index+3*n.version+6*(n.out_samplerate<16e3?1:0),q=0;q<L.SBMAX_l+1;q++)I.scalefac_band.l[q]=i.sfBandIndex[U].l[q];for(q=0;q<L.PSFB21+1;q++){var $=(I.scalefac_band.l[22]-I.scalefac_band.l[21])/L.PSFB21,j=I.scalefac_band.l[21]+q*$;I.scalefac_band.psfb21[q]=j}for(I.scalefac_band.psfb21[L.PSFB21]=576,q=0;q<L.SBMAX_s+1;q++)I.scalefac_band.s[q]=i.sfBandIndex[U].s[q];for(q=0;q<L.PSFB12+1;q++)$=(I.scalefac_band.s[13]-I.scalefac_band.s[12])/L.PSFB12,j=I.scalefac_band.s[12]+q*$,I.scalefac_band.psfb12[q]=j;for(I.scalefac_band.psfb12[L.PSFB12]=192,1==n.version?I.sideinfo_len=1==I.channels_out?21:36:I.sideinfo_len=1==I.channels_out?13:21,n.error_protection&&(I.sideinfo_len+=2),function(e){var t=e.internal_flags;e.frameNum=0,e.write_id3tag_automatic&&p.id3tag_write_v2(e),t.bitrate_stereoMode_Hist=r([16,5]),t.bitrate_blockType_Hist=r([16,6]),t.PeakSample=0,e.bWriteVbrTag&&u.InitVbrTag(e)}(n),I.Class_ID=y,H=0;H<19;H++)I.nsPsy.pefirbuf[H]=700*I.mode_gr*I.channels_out;switch(-1==n.ATHtype&&(n.ATHtype=4),n.VBR){case m.vbr_mt:n.VBR=m.vbr_mtrh;case m.vbr_mtrh:null==n.useTemporal&&(n.useTemporal=!1),o.apply_preset(n,500-10*n.VBR_q,0),n.quality<0&&(n.quality=LAME_DEFAULT_QUALITY),n.quality<5&&(n.quality=0),n.quality>5&&(n.quality=5),I.PSY.mask_adjust=n.maskingadjust,I.PSY.mask_adjust_short=n.maskingadjust_short,n.experimentalY?I.sfb21_extra=!1:I.sfb21_extra=n.out_samplerate>44e3,I.iteration_loop=new VBRNewIterationLoop(l);break;case m.vbr_rh:o.apply_preset(n,500-10*n.VBR_q,0),I.PSY.mask_adjust=n.maskingadjust,I.PSY.mask_adjust_short=n.maskingadjust_short,n.experimentalY?I.sfb21_extra=!1:I.sfb21_extra=n.out_samplerate>44e3,n.quality>6&&(n.quality=6),n.quality<0&&(n.quality=LAME_DEFAULT_QUALITY),I.iteration_loop=new VBROldIterationLoop(l);break;default:var G;I.sfb21_extra=!1,n.quality<0&&(n.quality=LAME_DEFAULT_QUALITY),(G=n.VBR)==m.vbr_off&&(n.VBR_mean_bitrate_kbps=n.brate),o.apply_preset(n,n.VBR_mean_bitrate_kbps,0),n.VBR=G,I.PSY.mask_adjust=n.maskingadjust,I.PSY.mask_adjust_short=n.maskingadjust_short,G==m.vbr_off?I.iteration_loop=new C(l):I.iteration_loop=new ABRIterationLoop(l)}if(n.VBR!=m.vbr_off){if(I.VBR_min_bitrate=1,I.VBR_max_bitrate=14,n.out_samplerate<16e3&&(I.VBR_max_bitrate=8),0!=n.VBR_min_bitrate_kbps&&(n.VBR_min_bitrate_kbps=x(n.VBR_min_bitrate_kbps,n.version,n.out_samplerate),I.VBR_min_bitrate=M(n.VBR_min_bitrate_kbps,n.version,n.out_samplerate),I.VBR_min_bitrate<0))return-1;if(0!=n.VBR_max_bitrate_kbps&&(n.VBR_max_bitrate_kbps=x(n.VBR_max_bitrate_kbps,n.version,n.out_samplerate),I.VBR_max_bitrate=M(n.VBR_max_bitrate_kbps,n.version,n.out_samplerate),I.VBR_max_bitrate<0))return-1;n.VBR_min_bitrate_kbps=k.bitrate_table[n.version][I.VBR_min_bitrate],n.VBR_max_bitrate_kbps=k.bitrate_table[n.version][I.VBR_max_bitrate],n.VBR_mean_bitrate_kbps=Math.min(k.bitrate_table[n.version][I.VBR_max_bitrate],n.VBR_mean_bitrate_kbps),n.VBR_mean_bitrate_kbps=Math.max(k.bitrate_table[n.version][I.VBR_min_bitrate],n.VBR_mean_bitrate_kbps)}return n.tune&&(I.PSY.mask_adjust+=n.tune_value_a,I.PSY.mask_adjust_short+=n.tune_value_a),function(e){var t=e.internal_flags;switch(e.quality){default:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}(n),n.athaa_type<0?I.ATH.useAdjust=3:I.ATH.useAdjust=n.athaa_type,I.ATH.aaSensitivityP=Math.pow(10,n.athaa_sensitivity/-10),null==n.short_blocks&&(n.short_blocks=d.short_block_allowed),n.short_blocks!=d.short_block_allowed||n.mode!=f.JOINT_STEREO&&n.mode!=f.STEREO||(n.short_blocks=d.short_block_coupled),n.quant_comp<0&&(n.quant_comp=1),n.quant_comp_short<0&&(n.quant_comp_short=0),n.msfix<0&&(n.msfix=0),n.exp_nspsytune=1|n.exp_nspsytune,n.internal_flags.nsPsy.attackthre<0&&(n.internal_flags.nsPsy.attackthre=Y.NSATTACKTHRE),n.internal_flags.nsPsy.attackthre_s<0&&(n.internal_flags.nsPsy.attackthre_s=Y.NSATTACKTHRE_S),n.scale<0&&(n.scale=1),n.ATHtype<0&&(n.ATHtype=4),n.ATHcurve<0&&(n.ATHcurve=4),n.athaa_loudapprox<0&&(n.athaa_loudapprox=2),n.interChRatio<0&&(n.interChRatio=0),null==n.useTemporal&&(n.useTemporal=!0),I.slot_lag=I.frac_SpF=0,n.VBR==m.vbr_off&&(I.slot_lag=I.frac_SpF=72e3*(n.version+1)*n.brate%n.out_samplerate|0),i.iteration_init(n),h.psymodel_init(n),0},this.lame_encode_flush=function(e,n,o,r){var i,l,s,c,d=e.internal_flags,u=a([2,1152]),m=0,f=d.mf_samples_to_encode-L.POSTDELAY,_=F(e);if(d.mf_samples_to_encode<1)return 0;for(i=0,e.in_samplerate!=e.out_samplerate&&(f+=16*e.out_samplerate/e.in_samplerate),(s=e.framesize-f%e.framesize)<576&&(s+=e.framesize),e.encoder_padding=s,c=(f+s)/e.framesize;c>0&&m>=0;){var v=_-d.mf_size,h=e.frameNum;v*=e.in_samplerate,(v/=e.out_samplerate)>1152&&(v=1152),v<1&&(v=1),l=r-i,0==r&&(l=0),o+=m=this.lame_encode_buffer(e,u[0],u[1],v,n,o,l),i+=m,c-=h!=e.frameNum?1:0}if(d.mf_samples_to_encode=0,m<0)return m;if(l=r-i,0==r&&(l=0),t.flush_bitstream(e),(m=t.copy_buffer(d,n,o,l,1))<0)return m;if(o+=m,l=r-(i+=m),0==r&&(l=0),e.write_id3tag_automatic){if(p.id3tag_write_v1(e),(m=t.copy_buffer(d,n,o,l,0))<0)return m;i+=m}return i},this.lame_encode_buffer=function(o,r,a,i,l,s,c){var d=o.internal_flags,u=[null,null];if(d.Class_ID!=y)return-3;if(0==i)return 0;!function(e,t){(null==e.in_buffer_0||e.in_buffer_nsamples<t)&&(e.in_buffer_0=n(t),e.in_buffer_1=n(t),e.in_buffer_nsamples=t)}(d,i),u[0]=d.in_buffer_0,u[1]=d.in_buffer_1;for(var m=0;m<i;m++)u[0][m]=r[m],d.channels_in>1&&(u[1][m]=a[m]);return function(n,o,r,a,i,l,s){var c,d,u,m,f,p=n.internal_flags,v=0,h=[null,null],g=[null,null];if(p.Class_ID!=y)return-3;if(0==a)return 0;if((f=t.copy_buffer(p,i,l,s,0))<0)return f;if(l+=f,v+=f,g[0]=o,g[1]=r,b.NEQ(n.scale,0)&&b.NEQ(n.scale,1))for(d=0;d<a;++d)g[0][d]*=n.scale,2==p.channels_out&&(g[1][d]*=n.scale);if(b.NEQ(n.scale_left,0)&&b.NEQ(n.scale_left,1))for(d=0;d<a;++d)g[0][d]*=n.scale_left;if(b.NEQ(n.scale_right,0)&&b.NEQ(n.scale_right,1))for(d=0;d<a;++d)g[1][d]*=n.scale_right;if(2==n.num_channels&&1==p.channels_out)for(d=0;d<a;++d)g[0][d]=.5*(g[0][d]+g[1][d]),g[1][d]=0;m=F(n),h[0]=p.mfbuf[0],h[1]=p.mfbuf[1];for(var E=0;a>0;){var S,k,T=[null,null];T[0]=g[0],T[1]=g[1];var B=new D;if(H(n,h,T,E,a,B),S=B.n_in,k=B.n_out,p.findReplayGain&&!p.decode_on_the_fly&&e.AnalyzeSamples(p.rgdata,h[0],p.mf_size,h[1],p.mf_size,k,p.channels_out)==_.GAIN_ANALYSIS_ERROR)return-6;if(a-=S,E+=S,p.channels_out,p.mf_size+=k,p.mf_samples_to_encode<1&&(p.mf_samples_to_encode=L.ENCDELAY+L.POSTDELAY),p.mf_samples_to_encode+=k,p.mf_size>=m){var I=s-v;if(0==s&&(I=0),(c=N(n,h[0],h[1],i,l,I))<0)return c;for(l+=c,v+=c,p.mf_size-=n.framesize,p.mf_samples_to_encode-=n.framesize,u=0;u<p.channels_out;u++)for(d=0;d<p.mf_size;d++)h[u][d]=h[u][d+n.framesize]}}return v}(o,u[0],u[1],i,l,s,c)}}function X(){this.setModules=function(e,t){}}function z(){this.setModules=function(e,t,n){}}function K(){}function W(){this.setModules=function(e,t){}}function Q(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Z(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}N.SFBMAX=3*L.SBMAX_s,L.ENCDELAY=576,L.POSTDELAY=1152,L.MDCTDELAY=48,L.FFTOFFSET=224+L.MDCTDELAY,L.DECDELAY=528,L.SBLIMIT=32,L.CBANDS=64,L.SBPSY_l=21,L.SBPSY_s=12,L.SBMAX_l=22,L.SBMAX_s=13,L.PSFB21=6,L.PSFB12=6,L.BLKSIZE=1024,L.HBLKSIZE=L.BLKSIZE/2+1,L.BLKSIZE_s=256,L.HBLKSIZE_s=L.BLKSIZE_s/2+1,L.NORM_TYPE=0,L.START_TYPE=1,L.SHORT_TYPE=2,L.STOP_TYPE=3,L.MPG_MD_LR_LR=0,L.MPG_MD_LR_I=1,L.MPG_MD_MS_LR=2,L.MPG_MD_MS_I=3,L.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],$.MFSIZE=3456+L.ENCDELAY-L.MDCTDELAY,$.MAX_HEADER_BUF=256,$.MAX_BITS_PER_CHANNEL=4095,$.MAX_BITS_PER_GRANULE=7680,$.BPC=320,Q.RIFF=Z("RIFF"),Q.WAVE=Z("WAVE"),Q.fmt_=Z("fmt "),Q.data=Z("data"),Q.readHeader=function(e){var t=new Q,n=e.getUint32(0,!1);if(Q.RIFF==n&&(e.getUint32(4,!0),Q.WAVE==e.getUint32(8,!1)&&Q.fmt_==e.getUint32(12,!1))){var o=e.getUint32(16,!0),r=20;switch(o){case 16:case 18:t.channels=e.getUint16(r+2,!0),t.sampleRate=e.getUint32(r+4,!0);break;default:throw"extended fmt chunk not implemented"}r+=o;for(var a=Q.data,i=0;a!=n&&(n=e.getUint32(r,!1),i=e.getUint32(r+4,!0),a!=n);)r+=i+8;return t.dataLen=i,t.dataOffset=r+8,t}},N.SFBMAX=3*L.SBMAX_s,Jr.Mp3Encoder=function(t,n,o){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),t=1,n=44100,o=128);var r=new G,a=new X,i=new _,l=new b,s=new v,c=new M,d=new D,u=new E,m=new p,S=new W,k=new g,y=new h,T=new z,B=new K;r.setModules(i,l,s,c,d,u,m,S,B),l.setModules(i,B,m,u),S.setModules(l,m),s.setModules(r),d.setModules(l,k,c,y),c.setModules(y,k,r.enc.psy),k.setModules(l),y.setModules(c),u.setModules(r,l,m),a.setModules(T,B),T.setModules(m,S,s);var I=r.lame_init();I.num_channels=t,I.in_samplerate=n,I.brate=o,I.mode=f.STEREO,I.quality=3,I.bWriteVbrTag=!1,I.disable_reservoir=!0,I.write_id3tag_automatic=!1,r.lame_init_params(I);var A=1152,C=0|1.25*A+7200,R=e(C);this.encodeBuffer=function(n,o){1==t&&(o=n),n.length>A&&(A=n.length,R=e(C=0|1.25*A+7200));var a=r.lame_encode_buffer(I,n,o,n.length,R,0,C);return new Int8Array(R.subarray(0,a))},this.flush=function(){var e=r.lame_encode_flush(I,R,0,C);return new Int8Array(R.subarray(0,e))}},Jr.WavHeader=Q}Zr.render=function(t,n,o,r,a,i){var l,s=e.resolveComponent("TextCollection");return e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model.values)||void 0===l?void 0:l.$values,(function(n){return e.openBlock(),e.createBlock(s,{model:n,"is-multiline":t.isMultiline,"is-rich-text":t.isRichText,"validation-status":t.validationStatus},null,8,["model","is-multiline","is-rich-text","validation-status"])})),256)),e.createElementVNode("span",{class:"fa fa-plus-circle",onClick:n[0]||(n[0]=function(e){return t.addText(t.store,t.model)})})],64)},Jr();var ea=function(){function e(t){o(this,e),this.bitRate=t.bitRate,this.sampleRate=t.sampleRate,this.dataBuffer=[],this.encoder=new Jr.Mp3Encoder(1,this.sampleRate,this.bitRate)}return a(e,[{key:"encode",value:function(e){for(var t=this._convertBuffer(e),n=t.length,o=0;n>=0;o+=1152){var r=t.subarray(o,o+1152),a=this.encoder.encodeBuffer(r);this.dataBuffer.push(new Int8Array(a)),n-=1152}}},{key:"finish",value:function(){this.dataBuffer.push(this.encoder.flush());var e=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:e,url:URL.createObjectURL(e)}}},{key:"_floatTo16BitPCM",value:function(e,t){for(var n=0;n<e.length;n++){var o=Math.max(-1,Math.min(1,e[n]));t[n]=o<0?32768*o:32767*o}}},{key:"_convertBuffer",value:function(e){var t=new Float32Array(e),n=new Int16Array(e.length);return this._floatTo16BitPCM(t,n),n}}]),e}(),ta=function(){function e(t){o(this,e),this.bufferSize=t.bufferSize||4096,this.sampleRate=t.sampleRate,this.samples=t.samples}return a(e,[{key:"finish",value:function(){this._joinSamples();var e=new ArrayBuffer(44+2*this.samples.length),t=new DataView(e);this._writeString(t,0,"RIFF"),t.setUint32(4,36+2*this.samples.length,!0),this._writeString(t,8,"WAVE"),this._writeString(t,12,"fmt "),t.setUint32(16,16,!0),t.setUint16(20,1,!0),t.setUint16(22,1,!0),t.setUint32(24,this.sampleRate,!0),t.setUint32(28,4*this.sampleRate,!0),t.setUint16(32,4,!0),t.setUint16(34,16,!0),this._writeString(t,36,"data"),t.setUint32(40,2*this.samples.length,!0),this._floatTo16BitPCM(t,44,this.samples);var n=new Blob([t],{type:"audio/wav"});return{id:Date.now(),blob:n,url:URL.createObjectURL(n)}}},{key:"_floatTo16BitPCM",value:function(e,t,n){for(var o=0;o<n.length;o++,t+=2){var r=Math.max(-1,Math.min(1,n[o]));e.setInt16(t,r<0?32768*r:32767*r,!0)}}},{key:"_joinSamples",value:function(){for(var e=this.samples.length*this.bufferSize,t=new Float64Array(e),n=0,o=0;o<this.samples.length;o++){var r=this.samples[o];t.set(r,n),n+=r.length}this.samples=t}},{key:"_writeString",value:function(e,t,n){for(var o=0;o<n.length;o++)e.setUint8(t+o,n.charCodeAt(o))}}]),e}();var na=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.format=t.format,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=1024,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this.wavSamples=[],this._duration=0}return a(e,[{key:"start",value:function(){this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia({video:!1,audio:{channelCount:1,echoCancellation:!1}}).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this._isMp3()&&!this.lameEncoder&&(this.lameEncoder=new ea(this.encoderOptions))}},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()})),this.input.disconnect(),this.processor.disconnect(),this.context.close();var e,t=null;this._isMp3()?t=this.lameEncoder.finish():(t=new ta({bufferSize:this.bufferSize,sampleRate:this.encoderOptions.sampleRate,samples:this.wavSamples}).finish(),this.wavSamples=[]),t.duration=(e=this.duration)?new Date(1e3*e).toISOString().substr(14,5):null,this.records.push(t),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(t)}},{key:"pause",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()})),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}},{key:"recordList",value:function(){return this.records}},{key:"lastRecord",value:function(){return this.records.slice(-1).pop()}},{key:"_micCaptured",value:function(e){var t=this;this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(e),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=e,this.processor.onaudioprocess=function(e){var n=e.inputBuffer.getChannelData(0),o=0;t._isMp3()?t.lameEncoder.encode(n):t.wavSamples.push(new Float32Array(n));for(var r=0;r<n.length;++r)o+=n[r]*n[r];t.duration=parseFloat(t._duration)+parseFloat(t.context.currentTime.toFixed(2)),t.volume=Math.sqrt(o/n.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"_micError",value:function(e){this.micFailed&&this.micFailed(e)}},{key:"_isMp3",value:function(){return"mp3"===this.format.toLowerCase()}}]),e}(),oa=e.defineComponent({name:"AudioRecorder",components:{},props:{model:{type:Object,required:!0}},methods:{},setup:function(){console.log("setup");var t="Click on record to start recording.",n=new na({micFailed:function(){o.recording=!1,o.instructionMessage=t,o.errorMessage="Failed to use microphone. Please refresh and try again and permit the use of a microphone."},bitRate:92,sampleRate:44100,format:"mp3"}),o=e.reactive({recording:!1,recordedAudio:void 0,recordedBlob:void 0,recorder:n,successMessage:"",errorMessage:"",instructionMessage:t});return{state:o,stopRecording:function(){o.recording=!1,console.log("stopRecording");var e=o.recorder;e.stop();var t=e.recordList();o.recordedAudio=t[t.length-1].url,console.log("recordedAudio",o.recordedAudio),o.recordedBlob=t[t.length-1].blob,console.log("recordedBlob",o.recordedAudio),o.recordedAudio&&(o.successMessage="Successfully recorded your story!",o.instructionMessage="")},initRecorder:function(){o.instructionMessage="Initializing...",o.recordedAudio=void 0,o.recording=!0,o.recorder.start(),o.successMessage="",o.errorMessage="",o.instructionMessage="Click stop to stop recording."}}}}),ra=function(t){return e.pushScopeId("data-v-702fccb1"),t=t(),e.popScopeId(),t},aa=ra((function(){return e.createElementVNode("br",null,null,-1)})),ia=e.createTextVNode("  "),la={key:2},sa={key:3},ca={class:"success"},da={key:4},ua={class:"danger"},ma=["src"],fa=[e.createTextVNode(" Your browser does not support the "),ra((function(){return e.createElementVNode("code",null,"audio",-1)})),e.createTextVNode(" element. ")];He("\n.success[data-v-702fccb1] {\r\n        color: green;\n}\n.danger[data-v-702fccb1] {\r\n        color: red;\n}\r\n"),oa.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",null,[aa,t.state.recording?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("button",{key:0,href:"#",onClick:n[0]||(n[0]=function(){return t.initRecorder&&t.initRecorder.apply(t,arguments)}),role:"button"},"record")),ia,t.state.recording?(e.openBlock(),e.createElementBlock("button",{key:1,class:"record-btn",href:"#",onClick:n[1]||(n[1]=function(){return t.stopRecording&&t.stopRecording.apply(t,arguments)}),role:"button"},"stop recording")):e.createCommentVNode("",!0),t.state.instructionMessage?(e.openBlock(),e.createElementBlock("div",la,[e.createElementVNode("p",null,e.toDisplayString(t.state.instructionMessage),1)])):e.createCommentVNode("",!0),t.state.successMessage?(e.openBlock(),e.createElementBlock("div",sa,[e.createElementVNode("p",ca,e.toDisplayString(t.state.successMessage),1)])):e.createCommentVNode("",!0),t.state.errorMessage?(e.openBlock(),e.createElementBlock("div",da,[e.createElementVNode("p",ua,e.toDisplayString(t.state.errorMessage),1)])):e.createCommentVNode("",!0),t.state.recordedAudio?(e.openBlock(),e.createElementBlock("audio",{key:5,controls:"",src:t.state.recordedAudio,type:"audio/mpeg",class:"mx-auto"},fa,8,ma)):e.createCommentVNode("",!0)])},oa.__scopeId="data-v-702fccb1";var pa=e.defineComponent({name:"FieldBase",props:{model:{type:null,required:!0}},components:{AttachmentField:vr,CheckboxField:hr,DateField:Or,DecimalField:Lr,EmailField:Pr,InfoField:Hr,IntegerField:qr,RadioField:$r,SelectField:Xr,MultilingualTextField:Zr,AudioRecorderField:oa},setup:function(e){var t=E(),n=Ho.getFieldType(e.model),o=Ho.cssClass(e.model),r=!1;return n!==En.EmailField&&n!==En.DateField&&n!==En.DecimalField&&n!==En.IntegerField&&n!==En.MonolingualTextField||(r=!0),{store:t,FieldTypes:En,ValidationStatus:Sn,fieldType:n,cssClass:o,isMonolingualField:r}},methods:{addMonoLingualField:function(e,t){e.commit(jo.APPEND_MONOLINGUAL_VALUE,t)}}}),_a={class:"col-md-3 field-name"},va={key:0,style:{color:"red"}},ha={class:"col-md-9 field-value"},ga={key:0,style:{color:"red"}},ba={key:1,style:{color:"red"}},Ea={key:13},Sa={key:14};pa.render=function(t,n,o,r,a,i){var l,s,c=e.resolveComponent("InfoField"),d=e.resolveComponent("AttachmentField"),u=e.resolveComponent("CheckboxField"),m=e.resolveComponent("DateField"),f=e.resolveComponent("DecimalField"),p=e.resolveComponent("EmailField"),_=e.resolveComponent("IntegerField"),v=e.resolveComponent("RadioField"),h=e.resolveComponent("SelectField"),g=e.resolveComponent("MultilingualTextField"),b=e.resolveComponent("AudioRecorderField");return t.fieldType===t.FieldTypes.InfoSection?(e.openBlock(),e.createBlock(c,{key:0,model:t.model,class:e.normalizeClass(t.cssClass)},null,8,["model","class"])):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(t.cssClass+" row")},[e.createElementVNode("div",_a,[e.createTextVNode(e.toDisplayString(t.model.name.concatenatedContent)+" ",1),this.model.required?(e.openBlock(),e.createElementBlock("span",va,"*")):e.createCommentVNode("",!0)]),e.createElementVNode("div",ha,[(null===(l=t.model)||void 0===l?void 0:l.validationStatus)===t.ValidationStatus.VALUE_REQUIRED?(e.openBlock(),e.createElementBlock("div",ga,"This field requires a value.")):e.createCommentVNode("",!0),(null===(s=t.model)||void 0===s?void 0:s.validationStatus)===t.ValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",ba,"This field has an invalid value.")):e.createCommentVNode("",!0),t.fieldType===t.FieldTypes.AttachmentField?(e.openBlock(),e.createBlock(d,{key:2,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.CheckboxField?(e.openBlock(),e.createBlock(u,{key:3,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.DateField?(e.openBlock(),e.createBlock(m,{key:4,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.DecimalField?(e.openBlock(),e.createBlock(f,{key:5,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.EmailField?(e.openBlock(),e.createBlock(p,{key:6,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.IntegerField?(e.openBlock(),e.createBlock(_,{key:7,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.RadioField?(e.openBlock(),e.createBlock(v,{key:8,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.SelectField?(e.openBlock(),e.createBlock(h,{key:9,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.TextArea?(e.openBlock(),e.createBlock(g,{key:10,model:t.model,"is-multiline":!0},null,8,["model"])):t.fieldType===t.FieldTypes.TextField?(e.openBlock(),e.createBlock(g,{key:11,model:t.model,"is-multiline":!1},null,8,["model"])):t.fieldType===t.FieldTypes.AudioRecorderField?(e.openBlock(),e.createBlock(b,{key:12,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.CompositeField?(e.openBlock(),e.createElementBlock("div",Ea," TODO: Implement editor template for the CompositeField")):t.fieldType===t.FieldTypes.TableField?(e.openBlock(),e.createElementBlock("div",Sa," TODO: Implement editor template for the TableField")):e.createCommentVNode("",!0),!0===t.isMonolingualField?(e.openBlock(),e.createElementBlock("span",{key:15,class:"fa fa-plus-circle",onClick:n[0]||(n[0]=function(e){return t.addMonoLingualField(t.store,t.model)})})):e.createCommentVNode("",!0)])],2))};var ka=e.defineComponent({name:"FieldContainerReference",components:{FieldPrimitive:pa},props:{model:{type:null,required:!0}},setup:function(t){var n=E(),o=e.ref(t.model.refId);return{refId:o,source:e.computed((function(){return n.getters.metadataSet(o.value)}))}}});ka.render=function(t,n,o,r,a,i){var l,s=e.resolveComponent("FieldPrimitive");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.source.fields)||void 0===l?void 0:l.$values,(function(t){return e.openBlock(),e.createBlock(s,{model:t},null,8,["model"])})),256)};var ya=e.defineComponent({name:"Field",props:{model:{type:null,required:!0}},components:{FieldPrimitive:pa,FieldContainerReference:ka},setup:function(e){return{isFieldContainerReference:Ho.getFieldType(e.model)==En.FieldContainerReference}}});ya.render=function(t,n,o,r,a,i){var l=e.resolveComponent("FieldContainerReference"),s=e.resolveComponent("FieldPrimitive");return t.isFieldContainerReference?(e.openBlock(),e.createBlock(l,{key:0,model:t.model},null,8,["model"])):(e.openBlock(),e.createBlock(s,{key:1,model:t.model},null,8,["model"]))};var Ta=e.defineComponent({name:"FieldContainer",props:{model:null},components:{Field:ya}});Ta.render=function(t,n,o,r,a,i){var l,s=e.resolveComponent("Field");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model.fields)||void 0===l?void 0:l.$values,(function(t){return e.openBlock(),e.createBlock(s,{model:t},null,8,["model"])})),256)};var Ba=e.defineComponent({name:"ChildFormSubmission",components:{ChildForm:Ta,ChildView:Xn},props:c,setup:function(t){var n=t.queryParameters,o=t.dataAttributes,r=Po.Guid.parse(n.iid),a=Po.Guid.parse(o["template-id"]),i=Po.Guid.parse(o["child-form-id"]),l=o["response-form-id"],s=o["is-admin"],c=(null==l?void 0:l.length)>0?Po.Guid.parse(l):void 0,d=E(),u=d.state;d.commit(jo.REMOVE_FIELD_CONTAINERS),d.commit(Ko.SET_ITEM_TEMPLATE_ID,a),d.commit(Ko.SET_FORM_ID,i),d.commit(Zo.SET_PARENT_ITEM_ID,r),d.dispatch(tr.LOAD_FORM),d.dispatch(tr.LOAD_SUBMISSIONS),c&&(d.commit(Zo.SET_RESPONSE_FORM_ID,c),d.dispatch(tr.LOAD_RESPONSE_FORM));var m=e.ref([]),f=e.computed((function(){var e;return null===(e=d.state.formInstances)||void 0===e?void 0:e.$values})),p=function(e){return m.value[e],m.value[e]=!m.value[e],m.value.forEach((function(t,n){t&&n!==e&&(m.value[n]=!1)})),!1};return{store:d,childForm:e.computed((function(){return u.form})),childSubmissions:e.computed((function(){var e;return null===(e=u.formInstances)||void 0===e?void 0:e.$values})),submissionStatus:e.computed((function(){return u.submissionStatus})),eSubmissionStatus:Oo,eValidationStatus:Sn,childResponseFormId:c,childResponseForm:e.computed((function(){return u.childResponseForm})),responseDisplayFlags:m,toggleDisplayResponse:p,submitChildResponse:function(e){var t;d.dispatch(tr.SUBMIT_CHILD_RESPONSE_FORM,null===(t=f.value[e])||void 0===t?void 0:t.id),p(e)},isAdmin:s}},storeConfig:{state:Xo,actions:cr,mutations:nr,getters:{}},methods:{submitChildForm:function(){this.store.dispatch(tr.SUBMIT_CHILD_FORM)},removeResponseForm:function(e){confirm("Do you really want to delete this item?")&&this.store.dispatch(tr.DELETE_CHILD_RESPONSE_INSTANCE,e)},removeChildForm:function(e){confirm("Do you really want to delete this item?")&&this.store.dispatch(tr.DELETE_CHILD_INSTANCE,e)}}}),Ia=function(t){return e.pushScopeId("data-v-7768b5b2"),t=t(),e.popScopeId(),t},Aa={key:0,class:"submissionForm"},Ca={key:0,class:"alert alert-danger"},Ra={key:1},xa={key:0,class:"alert alert-info"},Ma={key:1,class:"alert alert-info"},wa={key:2,class:"alert alert-danger"},Fa={key:1,class:"mt-2 submissionInstanceList"},Na=Ia((function(){return e.createElementVNode("h3",null,"Responses",-1)})),Da={class:"submissionInstance"},Va={key:0,class:"text-right"},Oa=["onClick"],La=[Ia((function(){return e.createElementVNode("span",{class:"fas fa-reply replyBtn"},null,-1)}))],Pa=["onClick"],Ha={class:"ml-3 submissionInstanceList"},Ua={key:0,class:"mb-2"},qa={key:0,class:"childResponseForm"},$a={key:0,class:"alert alert-danger"},ja=["onClick"],Ya={class:"submissionInstance"},Ga={key:0,class:"text-right"},Xa=["onClick"];He("\n.fa-remove[data-v-7768b5b2] {\r\n\t\tcolor: red;\r\n\t\tmargin-left: 30px;\n}\r\n"),Ba.render=function(t,n,o,r,a,i){var l,s=e.resolveComponent("ChildForm"),c=e.resolveComponent("ChildView");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.childForm&&Object.keys(t.childForm).length>0?(e.openBlock(),e.createElementBlock("div",Aa,[e.createVNode(s,{model:t.childForm},null,8,["model"]),(null===(l=t.childForm)||void 0===l?void 0:l.validationStatus)===t.eValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",Ca,"Form validation failed.")):(e.openBlock(),e.createElementBlock("div",Ra,[t.submissionStatus===t.eSubmissionStatus.InProgress?(e.openBlock(),e.createElementBlock("div",xa,"Submitting...")):e.createCommentVNode("",!0),t.submissionStatus===t.eSubmissionStatus.Success?(e.openBlock(),e.createElementBlock("div",Ma,"Submission successful")):e.createCommentVNode("",!0),t.submissionStatus===t.eSubmissionStatus.Fail?(e.openBlock(),e.createElementBlock("div",wa,"Submission failed")):e.createCommentVNode("",!0)])),e.createElementVNode("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=function(e){return t.submitChildForm()})},"Submit")])):e.createCommentVNode("",!0),t.childSubmissions&&t.childSubmissions.length>0?(e.openBlock(),e.createElementBlock("div",Fa,[Na,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.childSubmissions,(function(n,o){var r;return e.openBlock(),e.createElementBlock("div",Da,[e.createVNode(c,{model:n,"hide-field-names":!0},null,8,["model"]),t.responseDisplayFlags[o]?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Va,[e.createElementVNode("a",{href:"#",class:"text-decoration-none",onClick:function(e){return t.toggleDisplayResponse(o)},onclick:"return false;"},La,8,Oa),t.isAdmin?(e.openBlock(),e.createElementBlock("span",{key:0,class:"fas fa-remove",onClick:function(e){t.removeChildForm(n)}},null,8,Pa)):e.createCommentVNode("",!0)])),e.createElementVNode("div",Ha,[t.childResponseFormId?(e.openBlock(),e.createElementBlock("div",Ua,[t.responseDisplayFlags[o]?(e.openBlock(),e.createElementBlock("div",qa,[e.createVNode(s,{model:t.childResponseForm},null,8,["model"]),(null===(r=t.childResponseForm)||void 0===r?void 0:r.validationStatus)===t.eValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",$a,"Response validation failed.")):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-primary submitBtn",onClick:function(e){return t.submitChildResponse(o)}},"Submit",8,ja)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.childFieldContainers.$values,(function(n,o){return e.openBlock(),e.createElementBlock("div",Ya,[e.createVNode(c,{model:n,"hide-field-names":!0},null,8,["model"]),t.isAdmin?(e.openBlock(),e.createElementBlock("div",Ga,[e.createElementVNode("span",{class:"fas fa-remove deleteBtn",onClick:function(e){t.removeResponseForm(n)}},null,8,Xa)])):e.createCommentVNode("",!0)])})),256))])])})),256))])):e.createCommentVNode("",!0)],64)},Ba.__scopeId="data-v-7768b5b2";
/*!
  * pinia v2.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
let za;const Ka=e=>za=e,Wa=Symbol();function Qa(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var Za;!function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"}(Za||(Za={}));const Ja=()=>{};function ei(t,n,o,r=Ja){t.push(n);const a=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),r())};return!o&&e.getCurrentInstance()&&e.onUnmounted(a),a}function ti(e,...t){e.slice().forEach((e=>{e(...t)}))}function ni(t,n){for(const o in n){if(!n.hasOwnProperty(o))continue;const r=n[o],a=t[o];Qa(a)&&Qa(r)&&t.hasOwnProperty(o)&&!e.isRef(r)&&!e.isReactive(r)?t[o]=ni(a,r):t[o]=r}return t}const oi=Symbol();const{assign:ri}=Object;function ai(t,n,o={},r,a,i){let l;const s=ri({actions:{}},o),c={deep:!0};let d,u,m,f=e.markRaw([]),p=e.markRaw([]);const _=r.state.value[t];let v;function h(n){let o;d=u=!1,"function"==typeof n?(n(r.state.value[t]),o={type:Za.patchFunction,storeId:t,events:m}):(ni(r.state.value[t],n),o={type:Za.patchObject,payload:n,storeId:t,events:m});const a=v=Symbol();e.nextTick().then((()=>{v===a&&(d=!0)})),u=!0,ti(f,o,r.state.value[t])}i||_||(r.state.value[t]={}),e.ref({});const g=Ja;function b(e,n){return function(){Ka(r);const o=Array.from(arguments),a=[],i=[];function l(e){a.push(e)}function s(e){i.push(e)}let c;ti(p,{args:o,name:e,store:S,after:l,onError:s});try{c=n.apply(this&&this.$id===t?this:S,o)}catch(e){throw ti(i,e),e}return c instanceof Promise?c.then((e=>(ti(a,e),e))).catch((e=>(ti(i,e),Promise.reject(e)))):(ti(a,c),c)}}const E={_p:r,$id:t,$onAction:ei.bind(null,p),$patch:h,$reset:g,$subscribe(n,o={}){const a=ei(f,n,o.detached,(()=>i())),i=l.run((()=>e.watch((()=>r.state.value[t]),(e=>{("sync"===o.flush?u:d)&&n({storeId:t,type:Za.direct,events:m},e)}),ri({},c,o))));return a},$dispose:function(){l.stop(),f=[],p=[],r._s.delete(t)}},S=e.reactive(ri({},E));r._s.set(t,S);const k=r._e.run((()=>(l=e.effectScope(),l.run((()=>n())))));for(const n in k){const o=k[n];if(e.isRef(o)&&(T=o,!e.isRef(T)||!T.effect)||e.isReactive(o))i||(!_||Qa(y=o)&&y.hasOwnProperty(oi)||(e.isRef(o)?o.value=_[n]:ni(o,_[n])),r.state.value[t][n]=o);else if("function"==typeof o){const e=b(n,o);k[n]=e,s.actions[n]=o}}var y,T;return ri(S,k),ri(e.toRaw(S),k),Object.defineProperty(S,"$state",{get:()=>r.state.value[t],set:e=>{h((t=>{ri(t,e)}))}}),r._p.forEach((e=>{ri(S,l.run((()=>e({store:S,app:r._a,pinia:r,options:s}))))})),_&&i&&o.hydrate&&o.hydrate(S.$state,_),d=!0,u=!0,S}function ii(t,n,o){let r,a;const i="function"==typeof n;function l(t,o){const l=e.getCurrentInstance();(t=t||l&&e.inject(Wa))&&Ka(t),(t=za)._s.has(r)||(i?ai(r,n,a,t):function(t,n,o,r){const{state:a,actions:i,getters:l}=n,s=o.state.value[t];let c;c=ai(t,(function(){s||(o.state.value[t]=a?a():{});const n=e.toRefs(o.state.value[t]);return ri(n,i,Object.keys(l||{}).reduce(((n,r)=>(n[r]=e.markRaw(e.computed((()=>{Ka(o);const e=o._s.get(t);return l[r].call(e,e)}))),n)),{}))}),n,o,0,!0),c.$reset=function(){const e=a?a():{};this.$patch((t=>{ri(t,e)}))}}(r,a,t));return t._s.get(r)}return"string"==typeof t?(r=t,a=i?o:n):(a=t,r=t.id),l.$id=r,l}var li,si,ci,di,ui;!function(e){let t;!function(e){e.AND="AND",e.OR="OR"}(t=e.AggregationOperator||(e.AggregationOperator={}));class n{constructor(e,t,n){this.solrFieldName=e,this.valueConstraints=[],this.aggregationOperator=t,this.internalId=n||null}buildQueryString(){const e=[];if(this.valueConstraints.forEach((t=>{t.selected&&(this.solrFieldName.endsWith("_s")||this.solrFieldName.endsWith("_ss")||this.solrFieldName.endsWith("_ts")?e.push(`${this.solrFieldName}:"${t.value}"`):e.push(`${this.solrFieldName}:${t.value}`))})),0===e.length)return null;{const n=e.join(` ${this.aggregationOperator} `);return this.aggregationOperator===t.AND?n:`(${n})`}}}e.FieldConstraint=n;class o{constructor(e,t){this.internalId=t||null,this.queryConstraints=[],this.aggregationOperator=e}appendNewFieldConstraint(e,t,o,r){const a=new n(e,o,r);return t.forEach((e=>a.valueConstraints.push({value:e,selected:!1}))),this.queryConstraints.push(a),a}appendNewChildQueryModel(e,t){const n=new o(e,t);return this.queryConstraints.push(n),n}buildQueryString(){const e=[];this.queryConstraints.forEach((t=>{const n=t.buildQueryString();n&&e.push(n)}));const n=e.join(` ${this.aggregationOperator} `);return this.aggregationOperator===t.AND?n:`(${n})`}}e.QueryModel=o}(li||(li={})),function(e){e[e[void 0]=0]="undefined",e[e.data=1]="data",e[e.metadata=2]="metadata"}(si||(si={})),function(e){e.VALID="VALID",e.VALUE_REQUIRED="VALUE_REQUIRED",e.INVALID="INVALID"}(ci||(ci={})),function(e){e[e.AttachmentField=0]="AttachmentField",e[e.AudioRecorderField=1]="AudioRecorderField",e[e.CheckboxField=2]="CheckboxField",e[e.CompositeField=3]="CompositeField",e[e.DateField=4]="DateField",e[e.DecimalField=5]="DecimalField",e[e.EmailField=6]="EmailField",e[e.FieldContainerReference=7]="FieldContainerReference",e[e.InfoSection=8]="InfoSection",e[e.IntegerField=9]="IntegerField",e[e.MonolingualTextField=10]="MonolingualTextField",e[e.RadioField=11]="RadioField",e[e.SelectField=12]="SelectField",e[e.TableField=13]="TableField",e[e.TextArea=14]="TextArea",e[e.TextField=15]="TextField"}(di||(di={})),function(e){e[e.Text=0]="Text",e[e.Option=1]="Option",e[e.FileReference=2]="FileReference"}(ui||(ui={}));var mi=Object.freeze({__proto__:null});var fi,pi,_i,vi=(fi=function(e,t){t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n},fi(_i={path:pi,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&_i.path)}},_i.exports),_i.exports);const hi=e=>{var t,n;return null==e||null===(t=e.name)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((e=>e.value)).join(" | ")},gi=e=>{const t=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return null==t?void 0:t.substring(t.lastIndexOf(".")+1)},bi=e=>{const t=gi(e);return di[t]},Ei=e=>null==e?void 0:e.fields.$values.filter((e=>bi(e)===di.AttachmentField)).flatMap((e=>{var t;return null===(t=e.files)||void 0===t?void 0:t.$values})),Si=e=>{e.validationStatus=!0;let t=!1;for(let c=0;!t&&null!=e&&e.values&&c<(null===(n=e.values)||void 0===n||null===(o=n.$values)||void 0===o?void 0:o.length);++c){var n,o,r;const d=null==e||null===(r=e.values)||void 0===r?void 0:r.$values[c];for(let e=0;!t&&d.values&&e<(null===(a=d.values)||void 0===a?void 0:a.$values.length);++e){var a,i,l,s;t=(null===(i=d.values)||void 0===i||null===(l=i.$values[e])||void 0===l||null===(s=l.value)||void 0===s?void 0:s.trim().length)>0}}if(e.required){let t=!1;for(let n=0;!t&&null!=e&&e.values&&n<(null===(c=e.values)||void 0===c||null===(d=c.$values)||void 0===d?void 0:d.length);++n){var c,d,u;const o=null==e||null===(u=e.values)||void 0===u?void 0:u.$values[n];for(let e=0;!t&&o.values&&e<(null===(m=o.values)||void 0===m?void 0:m.$values.length);++e){var m,f,p,_;t=(null===(f=o.values)||void 0===f||null===(p=f.$values[e])||void 0===p||null===(_=p.value)||void 0===_?void 0:_.trim().length)>0}}t||(e.validationStatus=!1,e.validationError="This field is required")}return e.validationStatus},ki=e=>{if(e.validationStatus=!0,e.required){var t;const n=null==e||null===(t=e.values)||void 0===t?void 0:t.$values.filter((e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0}));n&&(null==n?void 0:n.length)>0||(e.validationStatus=!1,e.validationError="This field is required")}return e.validationStatus},yi=e=>{if(e.validationStatus=ki(e),e.validationStatus){var t;const n=null==e||null===(t=e.values)||void 0===t?void 0:t.$values.filter((e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0})),o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;null==n||n.forEach((t=>{o.test(String(t.value).toLowerCase())||(e.validationStatus&&=!1,e.validationError="Invalid email address")}))}return e.validationStatus},Ti=e=>{if(e.validationStatus=ki(e),e.validationStatus){var t;const n=null==e||null===(t=e.values)||void 0===t?void 0:t.$values.filter((e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0}));null==n||n.forEach((t=>{parseInt(t.value)||(e.validationStatus&&=!1,e.validationError="Require a number value")}))}return e.validationStatus},Bi=e=>{var t;(e.validationStatus=!0,e.required)&&((null==e||null===(t=e.files)||void 0===t?void 0:t.$values.length)>0||(e.validationStatus=!1,e.validationError="This field is required, please attach a file"));return e.validationStatus},Ii=e=>{if(e.validationStatus=!0,e.required){var t;(null===(t=e.options)||void 0===t?void 0:t.$values.filter((e=>1==e.selected))).length>0||(e.validationStatus=!1,e.validationError="Please select at least one")}return e.validationStatus},Ai=e=>(e.validationStatus=!0,e.validationStatus),Ci=e=>(e.validationStatus=!0,e.validationStatus),Ri=e=>(e.validationStatus=!0,e.validationStatus),xi=e=>(e.validationStatus=!0,e.validationStatus);function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{id:vi.Guid.create().toString(),$type:"Catfish.Core.Models.Contents.Text, Catfish.Core",language:e,created:new Date,value:t,modelType:"Catfish.Core.Models.Contents.Text, Catfish.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"}}function wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["en"];return{id:vi.Guid.create().toString(),$type:"Catfish.Core.Models.Contents.MultilingualValue, Catfish.Core",values:{$type:"Catfish.Core.Models.Contents.XmlModelList`1[[Catfish.Core.Models.Contents.Text, Catfish.Core]], Catfish.Core",$values:e.map((e=>Mi(e)))}}}function Fi(e){return e.values.$values.map((e=>e.language))}var Ni=Object.freeze({__proto__:null,getFieldName:hi,getSelectedFieldLabels:e=>null==e?void 0:e.filter((e=>e.selected)).map((e=>{var t;return null===(t=e.optionText)||void 0===t?void 0:t.values.$values.map((e=>e.value)).join(" / ")})).join(", "),getTypeString:gi,getFieldType:bi,testFieldType:(e,t)=>bi(e)===t,getDataElementType:e=>{const t=gi(e);return ui[t]},getFileReferences:Ei,validateEmail:e=>!!e,validateForm:e=>(e.validationStatus=!0,e.fields.$values.forEach((t=>{switch(bi(t)){case di.AttachmentField:t.validationStatus=Bi(t),e.validationStatus=t.validationStatus;break;case di.AudioRecorderField:e.validationStatus&&=Bi(t);break;case di.CheckboxField:case di.RadioField:case di.SelectField:t.validationStatus=Ii(t),e.validationStatus=t.validationStatus;break;case di.CompositeField:e.validationStatus&&=Ai(t);break;case di.DateField:e.validationStatus&&=Ci(t);break;case di.DecimalField:case di.IntegerField:e.validationStatus&&=Ti(t);break;case di.EmailField:t.validationStatus=yi(t),e.validationStatus=t.validationStatus;break;case di.FieldContainerReference:t.validationStatus=Ri(t),e.validationStatus=t.validationStatus;break;case di.InfoSection:break;case di.MonolingualTextField:t.validationStatus=ki(t),e.validationStatus=t.validationStatus;break;case di.TableField:e.validationStatus&&=xi(t);break;case di.TextArea:case di.TextField:t.validationStatus=Si(t),e.validationStatus=t.validationStatus;break;default:t.validationError="No validation method available.",t.validationStatus=!1,e.validationStatus&&=!1}})),e.validationStatus),validateMultilingualTextField:Si,validateMonolingualTextField:ki,validateEmailField:yi,validateNumberField:Ti,validateAttachmentField:Bi,validateOptionsField:Ii,validateCompositeField:Ai,validateDateField:Ci,validateFieldContainerReferenceField:Ri,validateTableField:xi,isAllowMultiple:function(e){return e.allowMultipleValues},createTextElement:Mi,createMultilingualValueElment:wi,getLanguages:Fi}),Di=Object.freeze({__proto__:null,models:mi,helpers:Ni,get eRefType(){return si},get eValidationStatus(){return ci}});const Vi=ii("FormSubmissionStore",{state:()=>({form:null}),getters:{textModels:e=>{var t,n;const o=null===(t=e.form)||void 0===t?void 0:t.fields.$values.filter((e=>bi(e)===di.TextField||bi(e)===di.TextArea)).flatMap((e=>{var t;return null===(t=e.values)||void 0===t?void 0:t.$values})).flatMap((e=>null==e?void 0:e.values.$values));return null===(n=e.form)||void 0===n||n.fields.$values.filter((e=>bi(e)===di.DateField||bi(e)===di.DecimalField||bi(e)===di.EmailField||bi(e)===di.IntegerField||bi(e)===di.MonolingualTextField)).flatMap((e=>{var t;return null===(t=e.values)||void 0===t?void 0:t.$values})).forEach((e=>null==o?void 0:o.push(e))),o},optionModels:e=>{var t;return null===(t=e.form)||void 0===t?void 0:t.fields.$values.filter((e=>bi(e)===di.CheckboxField||bi(e)===di.RadioField||bi(e)===di.SelectField)).flatMap((e=>{var t;return null===(t=e.options)||void 0===t?void 0:t.$values}))},fileReferences:e=>Ei(e.form)},actions:{setTextValue(e,t){const n=this.textModels.find((t=>t.id===e));n&&(n.value=t)},setOptionSelection(e,t){const n=this.optionModels.find((t=>t.id===e));n&&(n.selected=t)},addExtendedOptionValue(e,t){const n=this.optionModels.find((t=>t.id===e));n&&(n.extendedValues.$values||(n.extendedValues.$values=[]),n.extendedValues.$values.push(t),console.log(JSON.stringify(n.extendedValues.$values)))},removeExtendedOptionValue(e,t){const n=this.optionModels.find((t=>t.id===e));n&&n.extendedValues.$values.splice(t,1)},updateFileReference(e,t){var n;const o=null===(n=this.form)||void 0===n?void 0:n.fields.$values.find((t=>t.id==e));if(o){var r;const e=null===(r=this.fileReferences)||void 0===r?void 0:r.find((e=>e.fileName==t.name&&!e.id));if(e)e.fileName=t.name,e.originalFileName=t.name,e.size=t.size,e.file=t,e.fieldId=o.id;else{const e={id:vi.Guid.create().toString(),fileName:t.name,fieldId:o.id,originalFileName:t.name,contentType:t.type,created:new Date,updated:new Date(Date.now.toString()),size:t.size,modelType:"Catfish.Core.Models.Contents.FileReference",$type:"Catfish.Core.Models.Contents.FileReference",file:t,thumbnail:"",cssClass:""};o.files.$values.push(e)}}},deleteFileReference(e,t){var n;const o=null===(n=this.form)||void 0===n?void 0:n.fields.$values.find((t=>t.id==e));if(o){const e=o.files.$values.findIndex((e=>e.id===t));-1!==e&&o.files.$values.splice(e,1)}},appendMonolingualValue(e){var t;const n=Mi();null===(t=e.values)||void 0===t||t.$values.push(n)},removeMonolingualValue(e,t){var n,o;const r=null===(n=e.values)||void 0===n?void 0:n.$values.findIndex((e=>e.id===t));r>=0&&(null===(o=e.values)||void 0===o||o.$values.splice(r,1))},appendMutilingualValue(e){var t,n,o;const r=wi(null!==(t=e.values)&&void 0!==t&&t.$values[0]?Fi(null===(n=e.values)||void 0===n?void 0:n.$values[0]):["en"]);null===(o=e.values)||void 0===o||o.$values.push(r)},removeMutilingualValue(e,t){var n,o;const r=null===(n=e.values)||void 0===n?void 0:n.$values.findIndex((e=>e.id===t));r>=0&&(null===(o=e.values)||void 0===o||o.$values.splice(r,1))}}});var Oi=e.defineComponent({name:"InfoSection",props:{model:{type:null,required:!0}},setup:t=>({contents:e.computed((()=>{var e,n;return null===(e=t.model.content)||void 0===e||null===(n=e.values)||void 0===n?void 0:n.$values}))})});const Li=["innerHTML"];Oi.render=function(t,n,o,r,a,i){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.contents,((t,n)=>(e.openBlock(),e.createElementBlock("div",{key:n,innerHTML:t.value},null,8,Li)))),128)};var Pi=e.defineComponent({name:"SingleText",props:{model:{type:null,required:!0},isMultiline:{type:null,require:!1,default:!1},fieldType:{type:null,require:!1,default:"text"},numericStep:{type:null,default:null}},setup(t){const n=Vi();return{content:e.computed({get:()=>t.model.value,set:e=>n.setTextValue(t.model.id,e)})}}});const Hi={key:0},Ui={key:1},qi=["step","type"],$i=["type"];Pi.render=function(t,n,o,r,a,i){return!0===t.isMultiline?(e.openBlock(),e.createElementBlock("div",Hi,[e.withDirectives(e.createElementVNode("textarea",{cols:"30",rows:"2","onUpdate:modelValue":n[0]||(n[0]=e=>t.content=e)},null,512),[[e.vModelText,t.content]])])):(e.openBlock(),e.createElementBlock("div",Ui,[t.numericStep?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,step:t.numericStep,type:t.fieldType,"onUpdate:modelValue":n[1]||(n[1]=e=>t.content=e),class:"resized-textbox"},null,8,qi)),[[e.vModelDynamic,t.content]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:t.fieldType,"onUpdate:modelValue":n[2]||(n[2]=e=>t.content=e),class:"resized-textbox"},null,8,$i)),[[e.vModelDynamic,t.content]])]))};var ji=e.defineComponent({name:"TextCollectionInput",components:{TextInput:Pi},props:{model:{type:null,required:!0},isMultiline:{type:null,require:!1,default:!1}}});ji.render=function(t,n,o,r,a,i){var l,s;const c=e.resolveComponent("TextInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(n=>(e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createVNode(c,{model:n,"is-multiline":t.isMultiline},null,8,["model","is-multiline"])])))),128)};var Yi=e.defineComponent({name:"TextField",components:{TextCollectionInput:ji},props:{model:{type:null,required:!1}},setup:()=>({formStore:Vi()})});const Gi=["onClick"];Yi.render=function(t,n,o,r,a,i){const l=e.resolveComponent("TextCollectionInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(n=>{var o,r,a;return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"multilingualField"},[e.createVNode(l,{model:n,"is-multiline":!1},null,8,["model"]),(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",{key:0,class:"remove-field",onClick:e=>t.formStore.removeMutilingualValue(t.model,n.id)}," x ",8,Gi)):e.createCommentVNode("",!0)])})),128)};var Xi=e.defineComponent({name:"DropZone",props:{id:{required:!0,type:String}},setup(){const t=e.ref(!1);return{active:t,toggleActive:()=>{t.value=!t.value}}}});const zi=t=>(e.pushScopeId("data-v-5cafc5b5"),t=t(),e.popScopeId(),t),Ki=zi((()=>e.createElementVNode("span",null,"Drag and Drop File(s)",-1))),Wi=zi((()=>e.createElementVNode("span",null,"OR",-1))),Qi=["for"],Zi=["id"];function Ji(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}Ji("\n.dropzone[data-v-5cafc5b5] {\r\n        width: 400px;\r\n        height: 200px;\r\n        margin-top: 20px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        row-gap: 16px;\r\n        border: 2px dashed #41b883;\r\n        background-color: #fff;\r\n        transition: 0.3s ease all;\n}\n.dropzone label[data-v-5cafc5b5] {\r\n            padding: 8px 12px;\r\n            color: #fff;\r\n            background-color: #41b883;\r\n            transition: 0.3s ease all;\n}\n.dropzone input[data-v-5cafc5b5] {\r\n            display: none;\n}\n.active-dropzone[data-v-5cafc5b5] {\r\n        color: #fff;\r\n        border-color: #fff;\r\n        background-color: #41b883;\n}\n.active-dropzone label[data-v-5cafc5b5] {\r\n            background-color: #fff;\r\n            color: #41b883;\n}\r\n"),Xi.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",{onDragenter:n[0]||(n[0]=e.withModifiers((function(){return t.toggleActive&&t.toggleActive(...arguments)}),["prevent"])),onDragleave:n[1]||(n[1]=e.withModifiers((function(){return t.toggleActive&&t.toggleActive(...arguments)}),["prevent"])),onDragover:n[2]||(n[2]=e.withModifiers((()=>{}),["prevent"])),onDrop:n[3]||(n[3]=e.withModifiers((function(){return t.toggleActive&&t.toggleActive(...arguments)}),["prevent"])),class:e.normalizeClass([{"active-dropzone":t.active},"dropzone"])},[Ki,Wi,e.createElementVNode("label",{for:t.id},"Select File(s)",8,Qi),e.createElementVNode("input",{type:"file",id:t.id,class:"dropzoneFile",multiple:""},null,8,Zi)],34)},Xi.__scopeId="data-v-5cafc5b5";var el=e.defineComponent({name:"AttachmentField",components:{DropZone:Xi},props:{model:{type:null,required:!0}},setup(t){const n=Vi();return{drop:e=>{Array.from(e.dataTransfer.files).forEach((e=>{var o;console.log("Drop: "+JSON.stringify(e)),n.updateFileReference(null===(o=t.model)||void 0===o?void 0:o.id,e)}))},selectFiles:()=>{var e;const o=document.getElementById(null===(e=t.model)||void 0===e?void 0:e.id.toString());Array.from(null==o?void 0:o.files).forEach((e=>{var o;n.updateFileReference(null===(o=t.model)||void 0===o?void 0:o.id,e)}))},selectedFiles:e.computed((()=>n.fileReferences)),removeFile:(e,t)=>{n.deleteFileReference(e,t)}}}});const tl=e.createTextVNode(" Attachment "),nl=["id"],ol=e.createTextVNode(" Selected Files: "),rl=["onClick"];el.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[tl,e.createElementVNode("input",{type:"file",id:t.model.id,onChange:n[0]||(n[0]=function(){return t.selectFiles&&t.selectFiles(...arguments)})},null,40,nl),e.createElementVNode("div",null,[ol,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.selectedFiles,(n=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("span",null,e.toDisplayString(n.fileName),1),e.createElementVNode("span",{style:{"margin-left":"30px",color:"red"},onClick:e=>t.removeFile(t.model.id,n.id)},"x",8,rl)])))),256))])],64)};var al=e.defineComponent({name:"OptionInput",props:{model:{type:null,required:!1},fieldType:{type:null,require:!1,default:"checkbox"},name:{type:null,require:!1,default:null}},setup(t){const n=Vi(),o=e.ref("");return{concatenatedOptionLabel:e.computed((()=>{var e,n,o;return null===(e=t.model)||void 0===e||null===(n=e.optionText)||void 0===n||null===(o=n.values)||void 0===o?void 0:o.$values.map((e=>e.value)).join(" / ")})),setOptionSelection:(e,t)=>n.setOptionSelection(e,t),extendedValues:e.computed((()=>{var e,n;return null===(e=t.model)||void 0===e||null===(n=e.extendedValues)||void 0===n?void 0:n.$values})),extendedValueInput:o,addExtendedValue:()=>{t.model&&n.addExtendedOptionValue(t.model.id,o.value),o.value=""},removeExtendedValue:e=>{t.model&&n.removeExtendedOptionValue(t.model.id,e)}}}});const il=["type","name","id","value"],ll=["for"],sl={key:0,class:"extended-list"},cl=["onClick"],dl=["id"];al.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("input",{type:t.fieldType,name:t.name,id:t.model.id,value:t.model.id,onChange:n[0]||(n[0]=e=>t.setOptionSelection(t.model.id,e.target.checked))},null,40,il),e.createElementVNode("label",{for:t.model.id},e.toDisplayString(t.concatenatedOptionLabel),9,ll),t.model.extendedOption&&t.model.selected?(e.openBlock(),e.createElementBlock("div",sl,[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.extendedValues,((n,o)=>(e.openBlock(),e.createElementBlock("li",{key:o},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("span",{class:"remove-field",onClick:e=>t.removeExtendedValue(o)}," x ",8,cl)])))),128))]),e.withDirectives(e.createElementVNode("input",{type:"text",id:t.model.id+"_extended","onUpdate:modelValue":n[1]||(n[1]=e=>t.extendedValueInput=e),class:"resized-textbox"},null,8,dl),[[e.vModelText,t.extendedValueInput]]),e.createElementVNode("button",{onClick:n[2]||(n[2]=function(){return t.addExtendedValue&&t.addExtendedValue(...arguments)}),class:"extended-text-btn"},"+")])):e.createCommentVNode("",!0)],64)};var ul=e.defineComponent({name:"RadioField",components:{OptionInput:al},props:{model:{type:null,required:!0}},methods:{getConcatenatedOptionLabels(e){var t,n;const o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((e=>e.value)).join(" / ");return o||""}},setup(e){const t=Vi();return{setOptionSelection:(n,o)=>{var r;null===(r=e.model)||void 0===r||r.options.$values.filter((e=>e.id!==n)).forEach((e=>t.setOptionSelection(e.id,!1))),t.setOptionSelection(n,o)},name:"radio_"+e.model.id}}});ul.render=function(t,n,o,r,a,i){const l=e.resolveComponent("OptionInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(n=>(e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createVNode(l,{name:t.name,"field-type":"radio",model:n},null,8,["name","model"])])))),128)};var ml=e.defineComponent({name:"CheckboxField",components:{OptionInput:al},props:{model:{type:null,required:!1}}});ml.render=function(t,n,o,r,a,i){const l=e.resolveComponent("OptionInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(t=>(e.openBlock(),e.createElementBlock("div",{key:t.id,class:"checkbox-container"},[e.createVNode(l,{"field-type":"checkbox",model:t},null,8,["model"])])))),128)};var fl=e.defineComponent({name:"TextArea",components:{TextCollectionInput:ji},props:{model:{type:null,required:!1}},setup:()=>({formStore:Vi()})});const pl=["onClick"];fl.render=function(t,n,o,r,a,i){const l=e.resolveComponent("TextCollectionInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(n=>{var o,r,a;return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"multilingualField"},[e.createVNode(l,{model:n,"is-multiline":!0},null,8,["model"]),(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",{key:0,class:"fa remove-circle",style:{"margin-left":"30%","padding-right":"3px","padding-left":"2px","padding-bottom":"6px"},onClick:e=>t.formStore.removeMutilingualValue(t.model,n.id)}," x ",8,pl)):e.createCommentVNode("",!0)])})),128)};var _l=e.defineComponent({name:"DateField",components:{TextInput:Pi},props:{model:{type:null,required:!1},isMultivalued:{type:Boolean,required:!1,default:!1}}});const vl=["onClick"];_l.render=function(t,n,o,r,a,i){var l,s;const c=e.resolveComponent("TextInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(n=>{var o,r,a;return e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createVNode(c,{model:n,"field-type":"date","field-model":t.model},null,8,["model","field-model"]),(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",{key:0,class:"remove-field",onClick:e=>t.formStore.removeMonolingualValue(t.model,n.id)}," x ",8,vl)):e.createCommentVNode("",!0)])})),128)};var hl=e.defineComponent({name:"DecimalField",components:{TextInput:Pi},props:{model:{type:null,required:!1},isMultivalued:{type:Boolean,required:!1,default:!1},numDecimalPlaces:{type:Number,required:!1,default:2}},setup:e=>({numericStep:Math.pow(10,-e.numDecimalPlaces)})});const gl=["onClick"];hl.render=function(t,n,o,r,a,i){var l,s;const c=e.resolveComponent("TextInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(n=>{var o,r,a;return e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createVNode(c,{model:n,"field-type":"number","field-model":t.model,"numeric-step":"numericStep"},null,8,["model","field-model"]),(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",{key:0,class:"remove-field",onClick:e=>t.formStore.removeMonolingualValue(t.model,n.id)}," x ",8,gl)):e.createCommentVNode("",!0)])})),128)};var bl=e.defineComponent({name:"EmailField",components:{TextInput:Pi},props:{model:{type:null,required:!0}},setup:()=>({formStore:Vi()})});const El=["onClick"];bl.render=function(t,n,o,r,a,i){var l,s;const c=e.resolveComponent("TextInput");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(n=>{var o,r,a;return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"monoLingualField"},[e.createVNode(c,{model:n,"field-type":"email","field-model":t.model},null,8,["model","field-model"]),(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",{key:0,class:"remove-field",onClick:e=>t.formStore.removeMonolingualValue(t.model,n.id)}," x ",8,El)):e.createCommentVNode("",!0)])})),128)};var Sl=e.defineComponent({name:"IntegerField",components:{TextInput:Pi},props:{model:{type:null,required:!1},isMultivalued:{type:Boolean,required:!1,default:!1},numDecimalPlaces:{type:Number,required:!1,default:2}}});const kl=["onClick"];Sl.render=function(t,n,o,r,a,i){var l,s;const c=e.resolveComponent("TextInput");return e.openBlock(),e.createElementBlock("template",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l||null===(s=l.values)||void 0===s?void 0:s.$values,(n=>{var o,r,a;return e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createVNode(c,{model:n,"field-type":"number","field-model":t.model},null,8,["model","field-model"]),(null===(o=t.model)||void 0===o||null===(r=o.values)||void 0===r||null===(a=r.$values)||void 0===a?void 0:a.length)>1?(e.openBlock(),e.createElementBlock("span",{key:0,class:"remove-field",onClick:e=>t.formStore.removeMonolingualValue(t.model,n.id)}," x ",8,kl)):e.createCommentVNode("",!0)])})),128))])};var yl=e.defineComponent({name:"FormField",props:{model:{type:null,required:!0}},components:{InfoSection:Oi,TextField:Yi,AttachmentField:el,RadioField:ul,CheckboxField:ml,TextArea:fl,DateField:_l,DecimalField:hl,EmailField:bl,IntegerField:Sl},setup(t){const n=Vi(),o=bi(t.model);var r=!1;o!==di.EmailField&&o!==di.DateField&&o!==di.DecimalField&&o!==di.IntegerField&&o!==di.MonolingualTextField||(r=!0);var a=!1;o!==di.TextArea&&o!==di.TextField||(a=!0);const i=t.model.allowMultipleValues;return{eFieldType:di,helpers:Ni,name:e.computed((()=>hi(t.model))),isMonolingualField:r,allowMultipleValues:i,formStore:n,isMultilingualTextField:a}}});const Tl={key:0},Bl={key:1,class:"container"},Il={key:0,class:"fieldName required"},Al={key:1,class:"fieldName"},Cl={key:13,class:"validation-error"};Ji("\n.validation-error[data-v-3647362a]{\r\n        margin: 5px;\r\n        color: red;\n}\r\n"),yl.render=function(t,n,o,r,a,i){var l;const s=e.resolveComponent("InfoSection"),c=e.resolveComponent("AttachmentField"),d=e.resolveComponent("RadioField"),u=e.resolveComponent("CheckboxField"),m=e.resolveComponent("TextArea"),f=e.resolveComponent("TextField"),p=e.resolveComponent("DateField"),_=e.resolveComponent("DecimalField"),v=e.resolveComponent("EmailField"),h=e.resolveComponent("IntegerField");return t.helpers.testFieldType(t.model,t.eFieldType.InfoSection)?(e.openBlock(),e.createElementBlock("div",Tl,[e.createVNode(s,{model:t.model},null,8,["model"])])):(e.openBlock(),e.createElementBlock("div",Bl,[t.model.required?(e.openBlock(),e.createElementBlock("span",Il,e.toDisplayString(t.name),1)):(e.openBlock(),e.createElementBlock("span",Al,e.toDisplayString(t.name),1)),t.helpers.testFieldType(t.model,t.eFieldType.AttachmentField)?(e.openBlock(),e.createBlock(c,{key:2,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.RadioField)?(e.openBlock(),e.createBlock(d,{key:3,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.CheckboxField)?(e.openBlock(),e.createBlock(u,{key:4,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.TextArea)?(e.openBlock(),e.createBlock(m,{key:5,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.TextField)?(e.openBlock(),e.createBlock(f,{key:6,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.DateField)?(e.openBlock(),e.createBlock(p,{key:7,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.DecimalField)?(e.openBlock(),e.createBlock(_,{key:8,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.EmailField)?(e.openBlock(),e.createBlock(v,{key:9,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),t.helpers.testFieldType(t.model,t.eFieldType.IntegerField)?(e.openBlock(),e.createBlock(h,{key:10,model:t.model},null,8,["model"])):e.createCommentVNode("",!0),!0===t.isMonolingualField&&!0===t.allowMultipleValues?(e.openBlock(),e.createElementBlock("span",{key:11,class:"add-field",onClick:n[0]||(n[0]=e=>t.formStore.appendMonolingualValue(t.model))}," + ")):e.createCommentVNode("",!0),t.isMultilingualTextField&&!0===t.allowMultipleValues?(e.openBlock(),e.createElementBlock("span",{key:12,class:"add-field",onClick:n[1]||(n[1]=e=>t.formStore.appendMutilingualValue(t.model))}," + ")):e.createCommentVNode("",!0),!1===(null===(l=t.model)||void 0===l?void 0:l.validationStatus)?(e.openBlock(),e.createElementBlock("span",Cl,e.toDisplayString(t.model.validationError),1)):e.createCommentVNode("",!0)]))},yl.__scopeId="data-v-3647362a";var Rl=e.defineComponent({name:"SubmissionForm",props:{model:{type:null,required:!1},piniaInstance:{type:null,required:!1}},components:{FormField:yl},setup(t){const n=Vi(t.piniaInstance);return n.form=t.model,e.watch((()=>t.model),(async e=>{n.form=e})),{name:e.computed((()=>hi(t.model)))}}});Rl.render=function(t,n,o,r,a,i){var l;const s=e.resolveComponent("FormField");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h2",null,e.toDisplayString(t.name),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.model)||void 0===l?void 0:l.fields.$values,(t=>(e.openBlock(),e.createBlock(s,{key:t.id,model:t},null,8,["model"])))),128))],64)};var xl=ii("FormStore",{state:function(){return{form:null,query:null,submissionFailed:!1,itemTemplateId:null,formId:null,collectionId:null,groupId:null,apiRoot:null}},getters:{},actions:{fetchData:function(){var e=this,t=this.apiRoot+"/applets/api/itemtemplates/"+this.itemTemplateId+"/data-form/"+this.formId;fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.form=t})).catch((function(t){e.submissionFailed=!0,console.error("Item Load API Error:",t)}))},submitForm:function(){var e=this,t=this.apiRoot+"/applets/api/items?itemTemplateId="+this.itemTemplateId+"&groupId="+this.groupId+"&collectionId="+this.collectionId;console.log("submitForm:"),console.log("datamodel - ",JSON.stringify(this.form));var n=new FormData;n.append("datamodel",JSON.stringify(this.form)),Di.helpers.getFileReferences(this.form).forEach((function(e){n.append("files",e.file),n.append("fileKeys",e.fieldId.toString())})),fetch(t,{body:n,method:"post",headers:{encType:"multipart/form-data"}}).then((function(e){return e.json()})).then((function(t){console.log(JSON.stringify(t)),e.submissionFailed=!1})).catch((function(t){e.submissionFailed=!0,console.error("Form submission failed:",t)}))},setFormId:function(e){this.formId=e},setTemplateId:function(e){this.itemTemplateId=e},setCollectionId:function(e){this.collectionId=e},setGroupId:function(e){this.groupId=e},setApiRoot:function(e){this.apiRoot=e}}}),Ml=e.defineComponent({name:"FormSubmission",props:c,modules:{form:Di},components:{SubmissionForm:Rl},setup:function(t){console.log("setup");var n=function(){const t=e.effectScope(!0),n=t.run((()=>e.ref({})));let o=[],r=[];const a=e.markRaw({install(e){Ka(a),a._a=e,e.provide(Wa,a),e.config.globalProperties.$pinia=a,r.forEach((e=>o.push(e))),r=[]},use(e){return this._a?o.push(e):r.push(e),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return a}();console.log(JSON.stringify(n));var o=t.dataAttributes,r=Po.Guid.parse(o["template-id"]),a=Po.Guid.parse(o["form-id"]),i=Po.Guid.parse(o["collection-id"]),l=o["group-id"]?Po.Guid.parse(o["group-id"]):null,s=o["site-url"],c=xl(n);c.setFormId(a),c.setTemplateId(r),c.setCollectionId(i),l&&c.setGroupId(l),c.setApiRoot(s),c.fetchData();return{formStore:c,submitForm:function(){Di.helpers.validateForm(c.form)?c.submitForm():console.log("Form validation failed ...")},pinia:n}}}),wl={class:"page-body"},Fl={key:0,class:"alert alert-danger"};Ml.render=function(t,n,o,r,a,i){var l=e.resolveComponent("SubmissionForm");return e.openBlock(),e.createElementBlock("div",wl,[e.createVNode(l,{model:t.formStore.form,"pinia-instance":t.pinia},null,8,["model","pinia-instance"]),e.createElementVNode("button",{class:"submit-button",onClick:n[0]||(n[0]=function(e){return t.submitForm()})},"Submit"),t.formStore.submissionFailed?(e.openBlock(),e.createElementBlock("div",Fl,"Sorry, the form submission failed.")):e.createCommentVNode("",!0)])};var Nl,Dl;!function(e){e.SET_TEMPLATE_ID="SET_TEMPLATE_ID",e.SET_COLLECTION_ID="SET_COLLECTION_ID",e.SET_GROUP_ID="SET_GROUP_ID",e.SET_REPORT_FIELDS="SET_REPORT_FIELDS",e.SET_REPORT_DATA="SET_REPORT_DATA",e.SET_DETAILED_VIEW_URL="SET_DETAILED_VIEW_URL",e.SET_STATUS="SET_STATUS",e.SET_ID="SET_ID",e.SET_OFFSET="SET_OFFSET",e.SET_PAGE_SISE="SET_PAGE_SISE",e.SET_SITE_URL="SET_SITE_URL"}(Dl||(Dl={}));var Vl,Ol=(i(Nl={},Dl.SET_TEMPLATE_ID,(function(e,t){e.itemTemplateID=t})),i(Nl,Dl.SET_COLLECTION_ID,(function(e,t){e.collectionID=t})),i(Nl,Dl.SET_GROUP_ID,(function(e,t){e.groupId=t})),i(Nl,Dl.SET_REPORT_FIELDS,(function(e,t){e.reportFields=t})),i(Nl,Dl.SET_REPORT_DATA,(function(e,t){e.reportData=t})),i(Nl,Dl.SET_DETAILED_VIEW_URL,(function(e,t){e.detailedViewUrl=t})),i(Nl,Dl.SET_STATUS,(function(e,t){e.templateStatus=t})),i(Nl,Dl.SET_ID,(function(e,t){e.id=t})),i(Nl,Dl.SET_OFFSET,(function(e,t){e.offset=t})),i(Nl,Dl.SET_PAGE_SISE,(function(e,t){e.pageSize=t})),i(Nl,Dl.SET_SITE_URL,(function(e,t){e.siteUrl=t})),Nl);!function(e){e.LOAD_DATA="LOAD_DATA"}(Vl||(Vl={}));var Ll=i({},Vl.LOAD_DATA,(function(e,t){var n=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/GetReportData/".concat(e.state.groupId,"/template/").concat(e.state.itemTemplateID,"/collection/").concat(e.state.collectionID,"?startDate=").concat(t.startDate?t.startDate:"","&endDate=").concat(t.endDate?t.endDate:"","&status=").concat(t.status?t.status:"");console.log("reports Load API: ",n);var o=new FormData;o.append("datamodel",JSON.stringify(e.state.reportFields)),t.freeText&&o.append("freeText",t.freeText),o.append("offset",e.state.offset.toString()),o.append("pageSize",e.state.pageSize.toString()),fetch(n,{body:o,method:"post",headers:{encType:"multipart/form-data"}}).then((function(e){return e.json()})).then((function(t){e.commit(Dl.SET_REPORT_DATA,t)}))})),Pl=e.defineComponent({name:"Report",components:{},props:c,setup:function(t){var n=E(),o=t.dataAttributes,r=o["site-url"];n.commit(Dl.SET_SITE_URL,r);var a=Po.Guid.parse(o["template-id"]);n.commit(Dl.SET_TEMPLATE_ID,a);var i=Po.Guid.parse(o["collection-id"]);n.commit(Dl.SET_COLLECTION_ID,i);var l=Po.Guid.parse(o["group-id"]);n.commit(Dl.SET_GROUP_ID,l);var s=JSON.parse(o["selected-fields"]);n.commit(Dl.SET_REPORT_FIELDS,s);var c=JSON.parse(o.status);n.commit(Dl.SET_STATUS,c);var d=t.queryParameters;n.commit(Dl.SET_ID,d.iid);var u=o["detailed-url"],m=e.ref(null),f=e.ref(null),p=e.ref(null),_=e.ref(null),v=e.computed({get:function(){return n.state.offset},set:function(e){return n.commit(Dl.SET_OFFSET,e)}}),h=e.computed({get:function(){return n.state.pageSize},set:function(e){return n.commit(Dl.SET_PAGE_SISE,e)}}),g=function(){return n.dispatch(Vl.LOAD_DATA,{startDate:m.value,endDate:f.value,freeText:_.value,status:p.value})};return{store:n,selectedFields:s,report:e.computed((function(){return n.state.reportData})),loadData:g,queryParams:d,templateStatus:c,detailedViewURL:function(e){return u+e},fromDate:m,toDate:f,freeText:_,selectedStatus:p,offset:v,pageSize:h,previousPage:function(){v.value=v.value<h.value?0:v.value-h.value,g()},nextPage:function(){v.value=v.value+h.value,g()}}},storeConfig:{state:{itemTemplateID:null,collectionID:null,groupId:null,reportFields:null,reportData:null,detailedViewUrl:null,templateStatus:null,id:null,offset:0,pageSize:25,siteUrl:null},actions:Ll,mutations:Ol,getters:{}}}),Hl=e.createElementVNode("h3",null,"Report",-1),Ul={class:"row col-md-12"},ql={class:"col-md-6 form-group"},$l=e.createElementVNode("label",null,"From:",-1),jl={class:"col-md-6 form-group"},Yl=e.createElementVNode("label",{class:"form-label"},"To:",-1),Gl={class:"col-md-6 form-group"},Xl=e.createElementVNode("label",{class:"form-label"},"Status:",-1),zl=e.createElementVNode("option",{disabled:"",value:""},"Please select one",-1),Kl=e.createElementVNode("option",{value:""},null,-1),Wl=["value"],Ql={class:"col-md-6 form-group"},Zl=e.createElementVNode("label",{class:"form-label"},"Search text:",-1),Jl={class:"col-md-6 form-group"},es={key:0,style:{"text-align":"center"}},ts={class:"table"},ns=e.createElementVNode("th",null,null,-1),os=e.createElementVNode("th",null,"Submitted Date",-1),rs=e.createElementVNode("th",null,"Status",-1),as=["href"],is={key:0},ls={key:1},ss={key:2},cs={key:3};Pl.render=function(t,n,o,r,a,i){var l,s,c,d,u;return e.openBlock(),e.createElementBlock(e.Fragment,null,[Hl,e.createElementVNode("div",Ul,[e.createElementVNode("div",ql,[$l,e.withDirectives(e.createElementVNode("input",{type:"date",name:"startDate",id:"startDate","onUpdate:modelValue":n[0]||(n[0]=function(e){return t.fromDate=e}),class:"form-control"},null,512),[[e.vModelText,t.fromDate]])]),e.createElementVNode("div",jl,[Yl,e.withDirectives(e.createElementVNode("input",{type:"date",name:"endDate",id:"endDate","onUpdate:modelValue":n[1]||(n[1]=function(e){return t.toDate=e}),class:"form-control"},null,512),[[e.vModelText,t.toDate]])]),e.createElementVNode("div",Gl,[Xl,e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":n[2]||(n[2]=function(e){return t.selectedStatus=e}),class:"form-control",style:{width:"auto"}},[zl,Kl,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.templateStatus,(function(t){return e.openBlock(),e.createElementBlock("option",{value:t.id},e.toDisplayString(t.status),9,Wl)})),256))],512),[[e.vModelSelect,t.selectedStatus]])]),e.createElementVNode("div",Ql,[Zl,e.withDirectives(e.createElementVNode("input",{type:"text",name:"freeText",id:"freeText","onUpdate:modelValue":n[3]||(n[3]=function(e){return t.freeText=e}),class:"form-control"},null,512),[[e.vModelText,t.freeText]])]),e.createElementVNode("div",Jl,[e.createElementVNode("button",{class:"btn btn-primary",onClick:n[4]||(n[4]=function(e){t.offset=0,t.loadData()})},"Execute")])]),null!==(l=t.report)&&void 0!==l&&l.rows?(e.openBlock(),e.createElementBlock("div",es,[t.offset>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:n[5]||(n[5]=function(){return t.previousPage&&t.previousPage.apply(t,arguments)}),class:"m-2"},"Previous")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(t.offset+1)+" to "+e.toDisplayString(t.offset+(null===(s=t.report)||void 0===s||null===(c=s.rows)||void 0===c?void 0:c.length))+" of "+e.toDisplayString(null===(d=t.report)||void 0===d?void 0:d.total)+" ",1),t.offset+t.report.rows.length<t.report.total?(e.openBlock(),e.createElementBlock("button",{key:1,onClick:n[6]||(n[6]=function(){return t.nextPage&&t.nextPage.apply(t,arguments)}),class:"m-2"},"Next")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("table",ts,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[ns,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.selectedFields,(function(t){return e.openBlock(),e.createElementBlock("th",null,e.toDisplayString(t.fieldName),1)})),256)),os,rs])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(u=t.report)||void 0===u?void 0:u.rows,(function(n){return e.openBlock(),e.createElementBlock("tr",null,[e.createElementVNode("td",null,[e.createElementVNode("a",{href:t.detailedViewURL(n.itemId),class:"fa fa-eye",target:"_blank"},null,8,as)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.cells,(function(t){return e.openBlock(),e.createElementBlock("td",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.values,(function(t){return e.openBlock(),e.createElementBlock("div",null,["Text"===t.renderType?(e.openBlock(),e.createElementBlock("div",is,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.values,(function(t){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t),1)})),256))])):e.createCommentVNode("",!0),"Options"===t.renderType?(e.openBlock(),e.createElementBlock("ul",ls,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.values,(function(t){return e.openBlock(),e.createElementBlock("li",null,e.toDisplayString(t),1)})),256))])):e.createCommentVNode("",!0),"Attachment"===t.renderType?(e.openBlock(),e.createElementBlock("div",ss,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.values,(function(t){return e.openBlock(),e.createElementBlock("div",null," File: "+e.toDisplayString(t),1)})),256))])):e.createCommentVNode("",!0),"Audio"===t.renderType?(e.openBlock(),e.createElementBlock("div",cs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.values,(function(t){return e.openBlock(),e.createElementBlock("div",null," Audio: "+e.toDisplayString(t),1)})),256))])):e.createCommentVNode("",!0)])})),256))])})),256)),e.createElementVNode("td",null,[e.createElementVNode("div",null,e.toDisplayString(n.created),1)]),e.createElementVNode("td",null,[e.createElementVNode("div",null,e.toDisplayString(n.status),1)])])})),256))])])],64)};var ds=n({},X),us=n({},ae),ms=n({},J),fs=e.defineComponent({name:"ImageCarousel",components:{},props:{model:{type:null,required:!0},fileUrl:{type:null,required:!0}},setup:function(t){return{files:e.computed((function(){return t.model.files.$values})),fieldUrl:e.computed((function(){return t.fileUrl})),file1stId:e.computed((function(){return t.model.files.$values[0].id}))}}}),ps=e.createElementVNode("h5",null,"Carousel",-1),_s={id:"carouselSlides",class:"carousel slide","data-ride":"carousel"},vs={class:"carousel-inner"},hs=["src"],gs=e.createElementVNode("a",{class:"carousel-control-prev",href:"#carouselSlides",role:"button","data-slide":"prev"},[e.createElementVNode("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e.createElementVNode("span",{class:"sr-only"},"Previous")],-1),bs=e.createElementVNode("a",{class:"carousel-control-next",href:"#carouselSlides",role:"button","data-slide":"next"},[e.createElementVNode("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e.createElementVNode("span",{class:"sr-only"},"Next")],-1);fs.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[ps,e.createElementVNode("div",_s,[e.createElementVNode("div",vs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.files.$values,(function(n){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(n.id===t.file1stId?"carousel-item active":"carousel-item"),key:n.id},[e.createElementVNode("img",{class:"d-block w-100",src:t.fileUrl+n.fileName},null,8,hs)],2)})),128))]),gs,bs])],64)};var Es=e.defineComponent({name:"ImageGallery",components:{},props:{model:{type:null,required:!0},fileUrl:{type:null,required:!0}},setup:function(t){return{files:e.computed((function(){return t.model.files.$values})),fieldUrl:e.computed((function(){return t.fileUrl}))}}}),Ss=e.createElementVNode("h5",null,"Gallery",-1),ks={class:"container"},ys={class:"d-flex flex-row"},Ts=["src","alt"];Es.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[Ss,e.createElementVNode("div",ks,[e.createElementVNode("div",ys,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.files,(function(n){return e.openBlock(),e.createElementBlock("img",{src:t.fileUrl+n.fileName,class:"w-100 shadow-1-strong rounded mb-4",alt:n.originalFileName},null,8,Ts)})),256))])])],64)};var Bs=e.defineComponent({name:"PdfViewer",components:{},props:{fileUrl:{type:null,required:!1}},setup:function(t){var n=window.location.origin+"/assets/js/vendor/pdfjs-2.13.216/web/viewer.html?file=";return{fileUrl:e.computed((function(){return t.fileUrl})),pdfViewerPath:n}}}),Is={class:"pdfViewer"},As=["src"];He("\n.pdfViewer[data-v-97ebf75e] {\r\n        width: 50%;\r\n        height: 79vh;\r\n        min-width: 400px;\n}\r\n"),Bs.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",Is,[e.createElementVNode("iframe",{height:"100%",width:"100%",src:t.pdfViewerPath+t.fileUrl},null,8,As)])},Bs.__scopeId="data-v-97ebf75e";var Cs=e.defineComponent({name:"FieldComponent",components:{ImageCarousel:fs,ImageGallery:Es,PdfViewer:Bs},props:{model:{type:null,required:!0}},setup:function(t){var n,o=E(),r="";if(null!==(n=t.model.field)&&void 0!==n&&n.$type.includes("AttachmentField")){var a=e.ref(o.state.item.id),i=e.ref(o.getters.dataItemId(t.model.component.formTemplateId)),l=e.ref(t.model.component.fieldId);r=window.location.origin+"/api/items/"+a.value+"/"+i.value+"/"+l.value+"/"}var s="";return t.model.component.displayImagesMode&&(s="gallery"==t.model.component.displayImagesMode?"gallery":"carousel"),{htmlWrapperTag:e.computed((function(){var e;return(null===(e=t.model.component.type)||void 0===e?void 0:e.length)>0?t.model.component.type:"div"})),componentType:e.computed((function(){return t.model.component.$type.split(",")[0]})),field:e.computed((function(){return t.model.field})),fieldType:e.computed((function(){var e,n;return null===(e=t.model.field)||void 0===e||null===(n=e.$type)||void 0===n?void 0:n.split(",")[0]})),fileUrl:r,displayImagesMode:s,cssClasses:e.computed((function(){return t.model.component.cssClasses?t.model.component.cssClasses:""}))}},methods:{formatDate:function(e){return _e(e).format("MMM DD, YYYY")},formatToDecimal:function(e,t){return Number(e).toFixed(t)},getSelectedFieldLabels:function(e){return kn.getSelectedFieldLabels(e.options.$values)}}}),Rs={class:"fieldType"},xs=e.createElementVNode("hr",null,null,-1),Ms={key:0},ws={key:1},Fs={key:2},Ns={key:3},Ds={key:4},Vs={key:5},Os=["href"],Ls=e.createElementVNode("br",null,null,-1),Ps=["src"],Hs=e.createElementVNode("br",null,null,-1),Us={key:3,controls:""},qs=["src","type"],$s=e.createTextVNode(" Your browser does not support the audio element. "),js=e.createElementVNode("hr",null,null,-1);Cs.render=function(t,n,o,r,a,i){var l=e.resolveComponent("ImageCarousel"),s=e.resolveComponent("ImageGallery"),c=e.resolveComponent("PdfViewer");return e.openBlock(),e.createElementBlock("div",Rs,[xs,"Catfish.Core.Models.Contents.Fields.TextArea"===t.fieldType||"Catfish.Core.Models.Contents.Fields.TextField"===t.fieldType?(e.openBlock(),e.createElementBlock("div",Ms,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.values.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.values.$values,(function(n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.htmlWrapperTag),{class:e.normalizeClass(t.cssClasses)},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(n.value),1)]})),_:2},1032,["class"])})),256))])})),256))])):t.fieldType.includes("Catfish.Core.Models.Contents.Fields.EmailField")||"Catfish.Core.Models.Contents.Fields.MonolingualTextField"===t.fieldType||"Catfish.Core.Models.Contents.Fields.IntegerField"===t.fieldType?(e.openBlock(),e.createElementBlock("div",ws,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.values.$values,(function(n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.htmlWrapperTag),{class:e.normalizeClass(t.cssClasses)},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(n.value),1)]})),_:2},1032,["class"])})),256))])):"Catfish.Core.Models.Contents.Fields.DecimalField"===t.fieldType?(e.openBlock(),e.createElementBlock("div",Fs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.values.$values,(function(n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.htmlWrapperTag),{class:e.normalizeClass(t.cssClasses)},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(t.formatToDecimal(n.value,2)),1)]})),_:2},1032,["class"])})),256))])):"Catfish.Core.Models.Contents.Fields.DateField"===t.fieldType?(e.openBlock(),e.createElementBlock("div",Ns,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.values.$values,(function(n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.htmlWrapperTag),{class:e.normalizeClass(t.cssClasses)},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(t.formatDate(n.value)),1)]})),_:2},1032,["class"])})),256))])):"Catfish.Core.Models.Contents.Fields.OptionsField"===t.fieldType||"Catfish.Core.Models.Contents.Fields.CheckboxField"===t.fieldType||"Catfish.Core.Models.Contents.Fields.RadioField"===t.fieldType||"Catfish.Core.Models.Contents.Fields.SelectField"===t.fieldType?(e.openBlock(),e.createElementBlock("div",Ds,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.htmlWrapperTag),{class:e.normalizeClass(t.cssClasses)},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(t.getSelectedFieldLabels(t.field)),1)]})),_:1},8,["class"]))])):t.fieldType.includes("Catfish.Core.Models.Contents.Fields.AttachmentField")||"Catfish.Core.Models.Contents.Fields.AudioRecorderField"===t.fieldType?(e.openBlock(),e.createElementBlock("div",Vs,["carousel"===t.displayImagesMode?(e.openBlock(),e.createBlock(l,{key:0,model:t.field,fileUrl:t.fileUrl},null,8,["model","fileUrl"])):"gallery"===t.displayImagesMode?(e.openBlock(),e.createBlock(s,{key:1,model:t.field,fileUrl:t.fileUrl},null,8,["model","fileUrl"])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(t.field.files.$values,(function(n){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.cssClasses)},[n.contentType.includes("pdf")?(e.openBlock(),e.createBlock(c,{key:0,fileUrl:t.fileUrl+n.fileName},null,8,["fileUrl"])):e.createCommentVNode("",!0),n.contentType.includes("pdf")?(e.openBlock(),e.createElementBlock("a",{key:1,href:t.fileUrl+n.fileName},e.toDisplayString(n.originalFileName),9,Os)):e.createCommentVNode("",!0),Ls,n.contentType.includes("image")?(e.openBlock(),e.createElementBlock("img",{key:2,src:t.fileUrl+n.fileName},null,8,Ps)):e.createCommentVNode("",!0),Hs,n.contentType.includes("audio")?(e.openBlock(),e.createElementBlock("audio",Us,[e.createElementVNode("source",{src:t.fileUrl+n.fileName,type:n.contentType},null,8,qs),$s])):e.createCommentVNode("",!0)],2)})),256))])):e.createCommentVNode("",!0),js])};var Ys=e.defineComponent({name:"StaticComponent",components:{},props:{model:{type:null,required:!0}},setup:function(t){return{htmlWrapperTag:e.computed((function(){var e;return(null===(e=t.model.type)||void 0===e?void 0:e.length)>0?t.model.type:"div"}))}}}),Gs={class:"staticType"},Xs=e.createElementVNode("h3",null,"Static Field",-1);Ys.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",Gs,[Xs,(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.htmlWrapperTag),{class:e.normalizeClass(t.model.cssClasses)},{default:e.withCtx((function(){return[e.createTextVNode(e.toDisplayString(t.model.content),1)]})),_:1},8,["class"]))])};var zs=e.defineComponent({name:"ItemLayout",components:{FieldComponent:Cs,StaticComponent:Ys},props:c,setup:function(t){var n=E(),o=t.queryParameters;n.commit(K.SET_ID,o.iid);var r=t.dataAttributes,a=r["selected-components"],i=JSON.parse(a),l=r["is-admin"];n.dispatch(te.LOAD_ITEM),console.log("components length:"+i.length);var s=i.filter((function(e){return e.$type.includes("StaticText")}));return console.log("static Field:"+s.length),console.log(JSON.stringify(s)),{store:n,item:e.computed((function(){return n.state.item})),queryParams:o,isAdmin:l,components:i,staticFields:s,fields:e.computed((function(){return n.getters.fields(i)}))}},storeConfig:{state:ds,actions:us,mutations:ms,getters:{dataItem:function(e){return function(t){var n,o,r;return null===(n=e.item)||void 0===n||null===(o=n.dataContainer)||void 0===o||null===(r=o.$values)||void 0===r?void 0:r.filter((function(e){return e.templateId===t}))[0]}},field:function(e){return function(t,n){var o,r,a,i,l;return null===(o=e.item)||void 0===o||null===(r=o.dataContainer)||void 0===r||null===(a=r.$values)||void 0===a||null===(i=a.filter((function(e){return e.templateId===t}))[0])||void 0===i||null===(l=i.fields.$values)||void 0===l?void 0:l.filter((function(e){return e.id===n}))}},fields:function(e){return function(t){for(var n=[],o=function(o){var r=t[o].formTemplateId,a=t[o].fieldId;if(void 0!==a&&a){var i,l,s,c,d,u=null===(i=e.item)||void 0===i||null===(l=i.dataContainer)||void 0===l||null===(s=l.$values)||void 0===s||null===(c=s.filter((function(e){return e.templateId===r}))[0])||void 0===c||null===(d=c.fields.$values)||void 0===d?void 0:d.filter((function(e){return e.id===a}))[0],m={component:t[o],field:u};n.push(m)}},r=0;r<(null==t?void 0:t.length);r++)o(r);return n}},dataItemId:function(e){return function(t){var n,o,r,a;return null===(n=e.item)||void 0===n||null===(o=n.dataContainer)||void 0===o||null===(r=o.$values)||void 0===r||null===(a=r.filter((function(e){return e.templateId===t}))[0])||void 0===a?void 0:a.id}}}}}),Ks={class:"item"},Ws=e.createElementVNode("h3",null,"ItemLayout",-1);zs.render=function(t,n,o,r,a,i){var l=e.resolveComponent("StaticComponent"),s=e.resolveComponent("FieldComponent");return e.openBlock(),e.createElementBlock("div",Ks,[Ws,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.staticFields,(function(t){return e.openBlock(),e.createBlock(l,{model:t},null,8,["model"])})),256)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.fields,(function(t){return e.openBlock(),e.createBlock(s,{model:t},null,8,["model"])})),256))])};var Qs=n({},X),Zs=n({},ae),Js=n({},J),ec=e.defineComponent({name:"ItemLayout",components:{},props:c,setup:function(t){var n=E(),o=t.queryParameters;n.commit(K.SET_ID,o.iid);var r=t.dataAttributes,a=r["selected-components"],i=JSON.parse(a),l=r["is-admin"];n.dispatch(te.LOAD_ITEM),console.log("components length:"+i.length);var s=i.filter((function(e){return e.$type.includes("StaticText")}));return console.log("static Field:"+s.length),console.log(JSON.stringify(s)),{store:n,item:e.computed((function(){return n.state.item})),queryParams:o,isAdmin:l,components:i,staticFields:s,fields:e.computed((function(){return n.getters.fields(i)}))}},storeConfig:{state:Qs,actions:Zs,mutations:Js,getters:{}}}),tc={class:"item"};ec.render=function(t,n,o,r,a,i){return e.openBlock(),e.createElementBlock("div",tc)};var nc,oc,rc=n(n({},Yo),{},{id:null,item:null,permissionList:null,siteUrl:null});!function(e){e.SET_ID="SET_ID",e.SET_USER_PERMISSIONS="SET_USER_PERMISSIONS",e.SET_ITEM="SET_ITEM",e.SET_SITE_URL="SET_SITE_URL"}(oc||(oc={}));var ac,ic,lc=n(n({},Wo),{},(i(nc={},oc.SET_ID,(function(e,t){e.id=t})),i(nc,oc.SET_USER_PERMISSIONS,(function(e,t){e.permissionList=t})),i(nc,oc.SET_ITEM,(function(e,t){var n,o,r,a;e.item=t,null==t||null===(n=t.dataContainer)||void 0===n||null===(o=n.$values)||void 0===o||o.forEach((function(t){Uo(t,e)})),null==t||null===(r=t.metadataSets)||void 0===r||null===(a=r.$values)||void 0===a||a.forEach((function(t){Uo(t,e)}))})),i(nc,oc.SET_SITE_URL,(function(e,t){e.siteUrl=t})),nc));!function(e){e.LOAD_ITEM="LOAD_ITEM",e.GET_USER_ACTIONS="GET_USER_ACTIONS",e.CHANGE_STATE="CHANGE_STATE",e.SAVE="SAVE",e.DELETE="DELETE"}(ic||(ic={}));var sc=(i(ac={},ic.LOAD_ITEM,(function(e){var t=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/".concat(e.state.id);console.log("Item Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(oc.SET_ITEM,t)}))})),i(ac,ic.GET_USER_ACTIONS,(function(e){console.log("insude GET_USER_ACTIONS");var t=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/getUserPermissions/".concat(e.state.id);console.log("Permission Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){console.log(JSON.stringify(t)),e.commit(oc.SET_USER_PERMISSIONS,t)}))})),i(ac,ic.DELETE,(function(e){console.log("Delete Action Started");var t=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/deleteItem/".concat(e.state.id);console.log("Item Delete API: ",t),e.state.item&&fetch(t,{method:"post",headers:{encType:"multipart/form-data"}}).then((function(e){switch(console.log(e.status),e.status){case 200:window.location.href="/";break;case 401:alert("Authorization failed.");break;case 404:alert("Item not found.");break;case 500:alert("Internal server error occurred.");break;default:alert("Unknown error occurred.")}})).catch((function(e){console.log("error",e)}))})),i(ac,ic.SAVE,(function(e){var t=(e.state.siteUrl?e.state.siteUrl:window.location.origin)+"/applets/api/items/update/";console.log("Item Update API: ",t);var n=e.state.item;if(n){var o=new FormData;o.append("item",JSON.stringify(n));var r=function(t){e.state.flattenedFileModels[t].length>0&&e.state.flattenedFileModels[t].forEach((function(e){console.log("File: ",e.name),o.append("files",e),o.append("fileKeys",t)}))};for(var a in e.state.flattenedFileModels)r(a);fetch(t,{body:o,method:"post",headers:{encType:"multipart/form-data"}}).then((function(e){return e.json()})).then((function(t){console.log(JSON.stringify(t)),e.commit(jo.REMOVE_FIELD_CONTAINERS),e.commit(oc.SET_ITEM,t)})).catch((function(e){console.log(e)}))}})),ac),cc=e.defineComponent({name:"ItemDetails",components:{FieldContainerViewer:Xn,FieldContainerEditor:Ta},props:c,setup:function(t){var n=E(),o=t.dataAttributes;console.log("Item Details setup ..."),console.log("props: ",JSON.stringify(t));var r=o["is-admin"];console.log("isAdmin123: ",r);var a=t.queryParameters;n.commit(oc.SET_ID,a.iid);var i=o["site-url"];n.commit(oc.SET_SITE_URL,i),console.log("before GET_USER_ACTIONS"),n.dispatch(ic.GET_USER_ACTIONS),n.dispatch(ic.LOAD_ITEM);var l=e.ref(!1);return{store:n,queryParams:a,dataItem:e.computed((function(){return n.state.item})),getContainerName:function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.values.$values.map((function(e){return e.value})).join(" | ")},isAdmin:r,editMode:l,hasEditPermission:function(){var e;return null!=(null===(e=n.state.permissionList)||void 0===e?void 0:e.map((function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.find((function(e){return"Update"==e.action}))})).find((function(e){return null!=e})))},isEditable:function(e){if(console.log("Check edit permission started."),l.value){var t,o=null===(t=n.state.permissionList.find((function(t){return t.formId==e.id})))||void 0===t?void 0:t.permissions;return null!=(null==o?void 0:o.find((function(e){return"Update"==e.action})))}return!1},isModified:e.computed((function(){return n.state.modified})),save:function(){return n.dispatch(ic.SAVE)},deleteItem:function(){confirm("Do you really want to delete this item?")&&n.dispatch(ic.DELETE)}}},storeConfig:{state:rc,actions:sc,mutations:lc,getters:{metadataSet:function(e){return function(t){var n,o,r;return null===(n=e.item)||void 0===n||null===(o=n.metadataSets)||void 0===o||null===(r=o.$values)||void 0===r?void 0:r.find((function(e){return e.templateId===t}))}}}},methods:{}}),dc={class:"controls"},uc={key:0},mc={key:1};He("\n.field-name[data-v-773147d4] {\r\n        font-weight: bold !important;\n}\n.fa-remove[data-v-773147d4] {\r\n        color: red;\r\n        margin-left: 30px;\n}\n.controls[data-v-773147d4]{\r\n        text-align:right;\n}\n.btn[data-v-773147d4]{\r\n        margin: 5px;\n}\r\n"),cc.render=function(t,n,o,r,a,i){var l,s,c,d,u=e.resolveComponent("FieldContainerEditor"),m=e.resolveComponent("FieldContainerViewer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",dc,[t.isModified?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:n[0]||(n[0]=function(e){return t.save()}),class:"btn btn-success"},"Save")):e.createCommentVNode("",!0),t.hasEditPermission()?(e.openBlock(),e.createElementBlock("button",{key:1,onClick:n[1]||(n[1]=function(e){return t.deleteItem()}),class:"btn btn-danger"},"Delete")):e.createCommentVNode("",!0),t.hasEditPermission()?(e.openBlock(),e.createElementBlock("button",{key:2,onClick:n[2]||(n[2]=function(e){return t.editMode=!t.editMode}),class:"btn btn-primary"},[t.editMode?(e.openBlock(),e.createElementBlock("span",uc,"View")):(e.openBlock(),e.createElementBlock("span",mc,"Edit"))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(l=t.dataItem)||void 0===l||null===(s=l.metadataSets)||void 0===s?void 0:s.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("h4",null,e.toDisplayString(t.getContainerName(n)),1),t.isEditable(n)?(e.openBlock(),e.createBlock(u,{key:0,model:n},null,8,["model"])):(e.openBlock(),e.createBlock(m,{key:1,model:n},null,8,["model"]))])})),256)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(c=t.dataItem)||void 0===c||null===(d=c.dataContainer)||void 0===d?void 0:d.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("h4",null,e.toDisplayString(t.getContainerName(n)),1),t.isEditable(n)?(e.openBlock(),e.createBlock(u,{key:0,model:n},null,8,["model"])):(e.openBlock(),e.createBlock(m,{key:1,model:n},null,8,["model"]))])})),256))],64)},cc.__scopeId="data-v-773147d4";var fc=Object.freeze({__proto__:null,Carousel:d,KeywordSearch:Nt,ItemTemplateEditor:_n,ItemEditor:hn,ItemViewer:Jn,ProcessManager:ko,Grid:No,ChildFormSubmission:Ba,FormSubmission:Ml,Report:Pl,ItemLayout:zs,EntityManager:ec,ItemDetails:cc}),pc=function(e){Object.entries(fc).forEach((function(t){var n=l(t,2),o=n[0],r=n[1];e.component(o,r)}))},_c=Object.freeze({__proto__:null,default:pc,Carousel:d,KeywordSearch:Nt,ItemTemplateEditor:_n,ItemEditor:hn,ItemViewer:Jn,ProcessManager:ko,Grid:No,ChildFormSubmission:Ba,FormSubmission:Ml,Report:Pl,ItemLayout:zs,EntityManager:ec,ItemDetails:cc});return Object.entries(_c).forEach((function(e){var t=l(e,2),n=t[0],o=t[1];"default"!==n&&(pc[n]=o)})),pc}(Vue);