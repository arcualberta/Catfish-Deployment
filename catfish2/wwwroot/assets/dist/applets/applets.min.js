var Applets=function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,i,l=[],r=!0,a=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(l.push(o.value),!t||l.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(a)throw i}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var s={pageId:{required:!1,type:null},blockId:{required:!1,type:null},appletTitle:{required:!1,type:String},dataAttributes:{required:!1,type:null},queryParameters:{required:!1,type:null}},d=e.defineComponent({name:"Carousel",components:{},props:s,setup:function(e,t){console.log("Carousel setup ..."),console.log("props: ",e),console.log("context: ",t)},mounted:function(){console.log("Carousel mounted ...")}}),u=e.createElementVNode("h2",null,"Carousel",-1),m={class:"row"},p={class:"row"},f={class:"row"};function v(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}d.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock("div",null,[u,e.createElementVNode("div",m,"Page Id: "+e.toDisplayString(t.pageId),1),e.createElementVNode("div",p,"Block Id: "+e.toDisplayString(t.blockId),1),e.createElementVNode("div",f,"Data Attributes "+e.toDisplayString(t.dataAttributes),1)])};const E="function"==typeof Proxy;class h{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const t in e.settings){const o=e.settings[t];n[t]=o.defaultValue}const o=`__vue-devtools-plugin-settings__${e.id}`;let i={...n};try{const e=localStorage.getItem(o),t=JSON.parse(e);Object.assign(i,t)}catch(e){}this.fallbacks={getSettings:()=>i,setSettings(e){try{localStorage.setItem(o,JSON.stringify(e))}catch(e){}i=e}},t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function S(e,t){const n=v(),o=v().__VUE_DEVTOOLS_GLOBAL_HOOK__,i=E&&e.enableEarlyProxy;if(!o||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&i){const l=i?new h(e,o):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:l}),l&&t(l.proxiedTarget)}else o.emit("devtools-plugin:setup",e,t)}
/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var g="store";function y(t){return void 0===t&&(t=null),e.inject(null!==t?t:g)}function T(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function k(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function _(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;F(e,n,[],e._modules.root,!0),I(e,n,t)}function I(t,n,o){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var l=t._wrappedGetters,r={};T(l,(function(e,n){r[n]=function(e,t){return function(){return e(t)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return r[n]()},enumerable:!0})})),t._state=e.reactive({data:n}),t.strict&&function(t){e.watch((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),i&&o&&t._withCommit((function(){i.data=null}))}function F(e,t,n,o,i){var l=!n.length,r=e._modules.getNamespace(n);if(o.namespaced&&(e._modulesNamespaceMap[r],e._modulesNamespaceMap[r]=o),!l&&!i){var a=B(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){a[c]=o.state}))}var s=o.context=function(e,t,n){var o=""===t,i={dispatch:o?e.dispatch:function(n,o,i){var l=D(n,o,i),r=l.payload,a=l.options,c=l.type;return a&&a.root||(c=t+c),e.dispatch(c,r)},commit:o?e.commit:function(n,o,i){var l=D(n,o,i),r=l.payload,a=l.options,c=l.type;a&&a.root||(c=t+c),e.commit(c,r,a)}};return Object.defineProperties(i,{getters:{get:o?function(){return e.getters}:function(){return C(e,t)}},state:{get:function(){return B(e.state,n)}}}),i}(e,r,n);o.forEachMutation((function(t,n){!function(e,t,n,o){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,o.state,t)}))}(e,r+n,t,s)})),o.forEachAction((function(t,n){var o=t.root?n:r+n,i=t.handler||t;!function(e,t,n,o){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i,l=n.call(e,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:e.getters,rootState:e.state},t);return(i=l)&&"function"==typeof i.then||(l=Promise.resolve(l)),e._devtoolHook?l.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):l}))}(e,o,i,s)})),o.forEachGetter((function(t,n){!function(e,t,n,o){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(o.state,o.getters,e.state,e.getters)}}(e,r+n,t,s)})),o.forEachChild((function(o,l){F(e,t,n.concat(l),o,i)}))}function C(e,t){if(!e._makeLocalGettersCache[t]){var n={},o=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,o)===t){var l=i.slice(o);Object.defineProperty(n,l,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function B(e,t){return t.reduce((function(e,t){return e[t]}),e)}function D(e,t,n){var o;return null!==(o=e)&&"object"==typeof o&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var N="vuex:mutations",b="vuex:actions",O="vuex",A=0;function M(e,t){S({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:N,label:"Vuex Mutations",color:L}),n.addTimelineLayer({id:b,label:"Vuex Actions",color:L}),n.addInspector({id:O,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===O)if(n.filter){var o=[];w(o,t._modules.root,n.filter,""),n.rootNodes=o}else n.rootNodes=[x(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===O){var o=n.nodeId;C(t,o),n.state=function(e,t,n){t="root"===n?t:t[n];var o=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(o.length){var l=function(e){var t={};return Object.keys(e).forEach((function(n){var o=n.split("/");if(o.length>1){var i=t,l=o.pop();o.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[l]=P((function(){return e[n]}))}else t[n]=P((function(){return e[n]}))})),t}(t);i.getters=Object.keys(l).map((function(e){return{key:e.endsWith("/")?V(e):e,editable:!1,value:P((function(){return l[e]}))}}))}return i}((i=t._modules,(r=(l=o).split("/").filter((function(e){return e}))).reduce((function(e,t,n){var o=e[t];if(!o)throw new Error('Missing module "'+t+'" for path "'+l+'".');return n===r.length-1?o:o._children}),"root"===l?i:i.root._children)),"root"===o?t.getters:t._makeLocalGettersCache,o)}var i,l,r})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===O){var o=n.nodeId,i=n.path;"root"!==o&&(i=o.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var o={};e.payload&&(o.payload=e.payload),o.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(O),n.sendInspectorState(O),n.addTimelineEvent({layerId:N,event:{time:Date.now(),title:e.type,data:o}})})),t.subscribeAction({before:function(e,t){var o={};e.payload&&(o.payload=e.payload),e._id=A++,e._time=Date.now(),o.state=t,n.addTimelineEvent({layerId:b,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:o}})},after:function(e,t){var o={},i=Date.now()-e._time;o.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(o.payload=e.payload),o.state=t,n.addTimelineEvent({layerId:b,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:o}})}})}))}var L=8702998,R={label:"namespaced",textColor:16777215,backgroundColor:6710886};function V(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function x(e,t){return{id:t||"root",label:V(t),tags:e.namespaced?[R]:[],children:Object.keys(e._children).map((function(n){return x(e._children[n],t+n+"/")}))}}function w(e,t,n,o){o.includes(n)&&e.push({id:o||"root",label:o.endsWith("/")?o.slice(0,o.length-1):o||"Root",tags:t.namespaced?[R]:[]}),Object.keys(t._children).forEach((function(i){w(e,t._children[i],n,o+i+"/")}))}function P(e){try{return e()}catch(e){return e}}var U=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},$={namespaced:{configurable:!0}};$.namespaced.get=function(){return!!this._rawModule.namespaced},U.prototype.addChild=function(e,t){this._children[e]=t},U.prototype.removeChild=function(e){delete this._children[e]},U.prototype.getChild=function(e){return this._children[e]},U.prototype.hasChild=function(e){return e in this._children},U.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},U.prototype.forEachChild=function(e){T(this._children,e)},U.prototype.forEachGetter=function(e){this._rawModule.getters&&T(this._rawModule.getters,e)},U.prototype.forEachAction=function(e){this._rawModule.actions&&T(this._rawModule.actions,e)},U.prototype.forEachMutation=function(e){this._rawModule.mutations&&T(this._rawModule.mutations,e)},Object.defineProperties(U.prototype,$);var j=function(e){this.register([],e,!1)};function G(e,t,n){if(t.update(n),n.modules)for(var o in n.modules){if(!t.getChild(o))return;G(e.concat(o),t.getChild(o),n.modules[o])}}j.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},j.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},j.prototype.update=function(e){G([],this.root,e)},j.prototype.register=function(e,t,n){var o=this;void 0===n&&(n=!0);var i=new U(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&T(t.modules,(function(t,i){o.register(e.concat(i),t,n)}))},j.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],o=t.getChild(n);o&&o.runtime&&t.removeChild(n)},j.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var q=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var o=e.strict;void 0===o&&(o=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new j(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var l=this,r=this.dispatch,a=this.commit;this.dispatch=function(e,t){return r.call(l,e,t)},this.commit=function(e,t,n){return a.call(l,e,t,n)},this.strict=o;var c=this._modules.root.state;F(this,c,[],this._modules.root),I(this,c),n.forEach((function(e){return e(t)}))},H={state:{configurable:!0}};q.prototype.install=function(e,t){e.provide(t||g,this),e.config.globalProperties.$store=this,(void 0!==this._devtools?this._devtools:__VUE_PROD_DEVTOOLS__)&&M(e,this)},H.state.get=function(){return this._state.data},H.state.set=function(e){},q.prototype.commit=function(e,t,n){var o=this,i=D(e,t,n),l=i.type,r=i.payload,a={type:l,payload:r},c=this._mutations[l];c&&(this._withCommit((function(){c.forEach((function(e){e(r)}))})),this._subscribers.slice().forEach((function(e){return e(a,o.state)})))},q.prototype.dispatch=function(e,t){var n=this,o=D(e,t),i=o.type,l=o.payload,r={type:i,payload:l},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(r,n.state)}))}catch(e){}var c=a.length>1?Promise.all(a.map((function(e){return e(l)}))):a[0](l);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(r,n.state)}))}catch(e){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(r,n.state,e)}))}catch(e){}t(e)}))}))}},q.prototype.subscribe=function(e,t){return k(e,this._subscribers,t)},q.prototype.subscribeAction=function(e,t){return k("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},q.prototype.watch=function(t,n,o){var i=this;return e.watch((function(){return t(i.state,i.getters)}),n,Object.assign({},o))},q.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},q.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),F(this,this.state,e,this._modules.get(e),n.preserveState),I(this,this.state)},q.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete B(t.state,e.slice(0,-1))[e[e.length-1]]})),_(this)},q.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},q.prototype.hotUpdate=function(e){this._modules.update(e),_(this,!0)},q.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(q.prototype,H);var Y,K;!function(e){e.SET_SOURCE="SET_SOURCE",e.SET_KEYWORDS="SET_KEYWORDS",e.SET_RESULTS="SET_RESULTS",e.SET_OFFSET="SET_OFFSET",e.SET_PAGE_SIZE="SET_PAGE_SIZE"}(K||(K={}));var z,X,W=(r(Y={},K.SET_SOURCE,(function(e,t){e.pageId=t.pageId,e.blockId=t.blockId})),r(Y,K.SET_KEYWORDS,(function(e,t){console.log("SET_KEYWORDS Payload: ",t),e.keywordQueryModel=t})),r(Y,K.SET_RESULTS,(function(e,t){e.searchResult=t,e.offset=t.first-1})),r(Y,K.SET_OFFSET,(function(e,t){e.offset=t})),r(Y,K.SET_PAGE_SIZE,(function(e,t){e.max=t})),Y);!function(e){e.INIT_FILTER="INIT_FILTER",e.FILTER_BY_KEYWORDS="FILTER_BY_KEYWORDS",e.NEXT_PAGE="NEXT_PAGE",e.PREVIOUS_PAGE="PREVIOUS_PAGE",e.FRESH_SEARCH="FRESH_SEARCH",e.SAVE_KEYWORDS="SAVE_KEYWORDS"}(X||(X={}));var Q=(r(z={},X.INIT_FILTER,(function(e){var t=window.location.origin+"/applets/api/keywordsearch/keywords/page/".concat(e.state.pageId,"/block/").concat(e.state.blockId);console.log("Keyword Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(K.SET_KEYWORDS,t)}))})),r(z,X.FILTER_BY_KEYWORDS,(function(e){if(console.log("Dispatched Actions.FILTER_BY_KEYWORDS. Query model: ",JSON.stringify(e.state.keywordQueryModel)),e.state.blockId){var t={keywords:e.state.keywordQueryModel,offset:e.state.offset,max:e.state.max};localStorage.setItem(e.getters.searchParamStorageKey,JSON.stringify(t))}var n=window.location.origin+"/applets/api/keywordsearch/items/";console.log("Item Load API: ",n);var o=new FormData;e.state.pageId&&o.append("pageId",e.state.pageId.toString()),e.state.blockId&&o.append("blockId",e.state.blockId.toString()),o.append("offset",e.state.offset.toString()),o.append("max",e.state.max.toString()),o.append("queryParams",JSON.stringify(e.state.keywordQueryModel)),fetch(n,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(t){e.commit(K.SET_RESULTS,t)})).catch((function(e){console.error("Item Load API Error:",e)}))})),r(z,X.NEXT_PAGE,(function(e){e.commit(K.SET_OFFSET,e.state.offset+e.state.max),e.dispatch(X.FILTER_BY_KEYWORDS)})),r(z,X.PREVIOUS_PAGE,(function(e){var t=Math.max(e.state.offset-e.state.max,0);e.commit(K.SET_OFFSET,t),e.dispatch(X.FILTER_BY_KEYWORDS)})),r(z,X.FRESH_SEARCH,(function(e,t){e.commit(K.SET_OFFSET,0),t&&e.commit(K.SET_PAGE_SIZE,t),e.dispatch(X.FILTER_BY_KEYWORDS)})),r(z,X.SAVE_KEYWORDS,(function(e,t){console.log("save keywords action :"+JSON.stringify(t)),e.commit(K.SET_KEYWORDS,t)})),z),J=e.defineComponent({name:"KeywordFilter",setup:function(){var t=y();return{runFreshSearch:function(){return t.dispatch(X.FRESH_SEARCH)},keywordQueryModel:e.computed((function(){return t.state.keywordQueryModel}))}}}),Z={key:0},ee={key:0,class:"font-weight-bold"},te=["value","onUpdate:modelValue"],ne={class:"ml-1"};J.render=function(t,n,o,i,l,r){var a;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.keywordQueryModel)||void 0===a?void 0:a.containers,(function(o,i){var l,r;return e.openBlock(),e.createElementBlock("div",{key:o},[(null===(l=t.keywordQueryModel)||void 0===l?void 0:l.containers.length)>1&&(null==o||null===(r=o.name)||void 0===r?void 0:r.length)>0?(e.openBlock(),e.createElementBlock("div",Z,e.toDisplayString(o.name),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.fields,(function(o,l){return e.openBlock(),e.createElementBlock("div",{key:o,class:"mb-3"},[o.name.length>0?(e.openBlock(),e.createElementBlock("div",ee,e.toDisplayString(o.name),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.values,(function(o,r){return e.openBlock(),e.createElementBlock("div",{key:o},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:o,"onUpdate:modelValue":function(e){return t.keywordQueryModel.containers[i].fields[l].selected[r]=e},onChange:n[0]||(n[0]=function(){return t.runFreshSearch&&t.runFreshSearch.apply(t,arguments)})},null,40,te),[[e.vModelCheckbox,t.keywordQueryModel.containers[i].fields[l].selected[r]]]),e.createElementVNode("label",ne,e.toDisplayString(o),1)])})),128))])})),128))])})),128)};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function oe(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var ie=oe((function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,o="millisecond",i="second",l="minute",r="hour",a="day",c="week",s="month",d="quarter",u="year",m="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,n){var o=String(e);return!o||o.length>=t?e:""+Array(t+1-o.length).join(n)+e},S={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),o=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+h(o,2,"0")+":"+h(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var o=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(o,s),l=n-i<0,r=t.clone().add(o+(l?-1:1),s);return+(-(o+(n-i)/(l?i-r:r-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:s,y:u,w:c,d:a,D:m,h:r,m:l,s:i,ms:o,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",y={};y[g]=E;var T=function(e){return e instanceof F},k=function(e,t,n){var o;if(!e)return g;if("string"==typeof e)y[e]&&(o=e),t&&(y[e]=t,o=e);else{var i=e.name;y[i]=e,o=i}return!n&&o&&(g=o),o||!n&&g},_=function(e,t){if(T(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new F(n)},I=S;I.l=k,I.i=T,I.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var F=function(){function E(e){this.$L=k(e.locale,null,!0),this.parse(e)}var h=E.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(I.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var o=t.match(f);if(o){var i=o[2]-1||0,l=(o[7]||"0").substring(0,3);return n?new Date(Date.UTC(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,l)):new Date(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,l)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return I},h.isValid=function(){return!(this.$d.toString()===p)},h.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return _(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<_(e)},h.$g=function(e,t,n){return I.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,t){var n=this,o=!!I.u(t)||t,d=I.p(e),p=function(e,t){var i=I.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return o?i:i.endOf(a)},f=function(e,t){return I.w(n.toDate()[e].apply(n.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,E=this.$M,h=this.$D,S="set"+(this.$u?"UTC":"");switch(d){case u:return o?p(1,0):p(31,11);case s:return o?p(1,E):p(0,E+1);case c:var g=this.$locale().weekStart||0,y=(v<g?v+7:v)-g;return p(o?h-y:h+(6-y),E);case a:case m:return f(S+"Hours",0);case r:return f(S+"Minutes",1);case l:return f(S+"Seconds",2);case i:return f(S+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(e,t){var n,c=I.p(e),d="set"+(this.$u?"UTC":""),p=(n={},n[a]=d+"Date",n[m]=d+"Date",n[s]=d+"Month",n[u]=d+"FullYear",n[r]=d+"Hours",n[l]=d+"Minutes",n[i]=d+"Seconds",n[o]=d+"Milliseconds",n)[c],f=c===a?this.$D+(t-this.$W):t;if(c===s||c===u){var v=this.clone().set(m,1);v.$d[p](f),v.init(),this.$d=v.set(m,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[I.p(e)]()},h.add=function(o,d){var m,p=this;o=Number(o);var f=I.p(d),v=function(e){var t=_(p);return I.w(t.date(t.date()+Math.round(e*o)),p)};if(f===s)return this.set(s,this.$M+o);if(f===u)return this.set(u,this.$y+o);if(f===a)return v(1);if(f===c)return v(7);var E=(m={},m[l]=t,m[r]=n,m[i]=e,m)[f]||1,h=this.$d.getTime()+o*E;return I.w(h,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var o=e||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),l=this.$H,r=this.$m,a=this.$M,c=n.weekdays,s=n.months,d=function(e,n,i,l){return e&&(e[n]||e(t,o))||i[n].substr(0,l)},u=function(e){return I.s(l%12||12,e,"0")},m=n.meridiem||function(e,t,n){var o=e<12?"AM":"PM";return n?o.toLowerCase():o},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:I.s(a+1,2,"0"),MMM:d(n.monthsShort,a,s,3),MMMM:d(s,a),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(l),HH:I.s(l,2,"0"),h:u(1),hh:u(2),a:m(l,r,!0),A:m(l,r,!1),m:String(r),mm:I.s(r,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:i};return o.replace(v,(function(e,t){return t||f[e]||i.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(o,m,p){var f,v=I.p(m),E=_(o),h=(E.utcOffset()-this.utcOffset())*t,S=this-E,g=I.m(this,E);return g=(f={},f[u]=g/12,f[s]=g,f[d]=g/3,f[c]=(S-h)/6048e5,f[a]=(S-h)/864e5,f[r]=S/n,f[l]=S/t,f[i]=S/e,f)[v]||S,p?g:I.a(g)},h.daysInMonth=function(){return this.endOf(s).$D},h.$locale=function(){return y[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),o=k(e,t,!0);return o&&(n.$L=o),n},h.clone=function(){return I.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},E}(),C=F.prototype;return _.prototype=C,[["$ms",o],["$s",i],["$m",l],["$H",r],["$W",a],["$M",s],["$y",u],["$D",m]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,F,_),e.$i=!0),_},_.locale=k,_.isDayjs=T,_.unix=function(e){return _(1e3*e)},_.en=y[g],_.Ls=y,_.p={},_}()})),le=ie,re=e.defineComponent({name:"ItemList",props:{},setup:function(){var t=y(),n=e.ref(25);return{items:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.items})),freshSearch:function(e){return t.dispatch(X.FRESH_SEARCH,e)},nextPage:function(){return t.dispatch(X.NEXT_PAGE)},previousPage:function(){return t.dispatch(X.PREVIOUS_PAGE)},selectedPageSize:n,count:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.count})),first:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.first})),last:e.computed((function(){var e;return null===(e=t.state.searchResult)||void 0===e?void 0:e.last}))}},methods:{formatDate:function(e){return le(e).format("MMM DD, YYYY")}}}),ae={class:"itemList"},ce={key:0},se={key:0},de={key:1},ue=[e.createElementVNode("option",null,"25",-1),e.createElementVNode("option",null,"50",-1),e.createElementVNode("option",null,"100",-1)],me={key:1},pe={class:"item"},fe={class:"item-title"},ve=["href"],Ee={key:1},he={class:"item-date"},Se={class:"item-subtitle"},ge={class:"categories"},ye={class:"badge rounded-pill bg-dark text-white m-1"},Te={class:"content"};re.render=function(t,n,o,i,l,r){var a;return e.openBlock(),e.createElementBlock("div",ae,[(null===(a=t.items)||void 0===a?void 0:a.length)>0?(e.openBlock(),e.createElementBlock("div",ce,[t.first>1?(e.openBlock(),e.createElementBlock("span",se,[e.createElementVNode("i",{class:"fas fa-angle-double-left",onClick:n[0]||(n[0]=function(){return t.previousPage&&t.previousPage.apply(t,arguments)})})])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(t.first)+"-"+e.toDisplayString(t.last)+" of "+e.toDisplayString(t.count)+" ",1),t.count>t.last?(e.openBlock(),e.createElementBlock("span",de,[e.createElementVNode("i",{class:"fas fa-angle-double-right",onClick:n[1]||(n[1]=function(){return t.nextPage&&t.nextPage.apply(t,arguments)})})])):e.createCommentVNode("",!0),e.createElementVNode("span",null,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":n[2]||(n[2]=function(e){return t.selectedPageSize=e}),class:"pull-right",onChange:n[3]||(n[3]=function(e){return t.freshSearch(Number(t.selectedPageSize))})},ue,544),[[e.vModelSelect,t.selectedPageSize]])])])):(e.openBlock(),e.createElementBlock("div",me,"No results found.")),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(function(n){var o;return e.openBlock(),e.createElementBlock("div",{key:n.id},[e.createElementVNode("div",pe,[e.createElementVNode("h3",fe,[(null===(o=n.detailedViewUrl)||void 0===o?void 0:o.length)>0?(e.openBlock(),e.createElementBlock("a",{key:0,href:n.detailedViewUrl},e.toDisplayString(n.title),9,ve)):(e.openBlock(),e.createElementBlock("span",Ee,e.toDisplayString(n.title),1))]),e.createElementVNode("div",he,e.toDisplayString(t.formatDate(n.date)),1),e.createElementVNode("h5",Se,e.toDisplayString(n.subtitle),1),e.createElementVNode("div",ge,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.categories,(function(t){return e.openBlock(),e.createElementBlock("span",ye,e.toDisplayString(t),1)})),256))]),e.createElementVNode("div",Te,e.toDisplayString(n.content),1)])])})),128))])};var ke=e.defineComponent({name:"Applet",components:{KeywordFilter:J,ItemList:re},props:s,setup:function(t){console.log("Keyword Search setup ...",t);var n=y();n.commit(K.SET_SOURCE,{pageId:t.pageId,blockId:t.blockId});var o,i=localStorage.getItem(n.getters.searchParamStorageKey);return i&&i.length>0&&(o=JSON.parse(i))&&o.keywords?(n.commit(K.SET_KEYWORDS,o.keywords),n.commit(K.SET_OFFSET,o.offset),n.commit(K.SET_PAGE_SIZE,o.max)):n.dispatch(X.INIT_FILTER),e.onMounted((function(){return n.dispatch(X.FILTER_BY_KEYWORDS)})),{keywordQueryModel:e.ref(n.state.keywordQueryModel)}},storeConfig:{state:{keywordQueryModel:null,searchResult:null,offset:0,max:25,pageId:null,blockId:null},actions:Q,mutations:W,getters:{searchParamStorageKey:function(e){var t;return(null===(t=e.blockId)||void 0===t?void 0:t.toString())+"SearchParams"}}}}),_e={class:"row"},Ie={class:"col-md-4 text-left"},Fe={class:"col-md-8"};ke.render=function(t,n,o,i,l,r){var a=e.resolveComponent("KeywordFilter"),c=e.resolveComponent("ItemList");return e.openBlock(),e.createElementBlock("div",_e,[e.createElementVNode("div",Ie,[e.createVNode(a)]),e.createElementVNode("div",Fe,[e.createVNode(c)])])};var Ce,Be;!function(e){e.SET_ID="SET_ID",e.SET_TEMPLATE="SET_TEMPLATE"}(Be||(Be={}));var De,Ne,be=(r(Ce={},Be.SET_ID,(function(e,t){e.Id=t})),r(Ce,Be.SET_TEMPLATE,(function(e,t){e.template=t})),Ce);!function(e){e.LOAD_TEMPLATE="LOAD_TEMPLATE",e.SET_ID="SET_ID"}(Ne||(Ne={}));var Oe=(r(De={},Ne.LOAD_TEMPLATE,(function(e){var t=window.location.origin+"/applets/api/itemtemplates/".concat(e.state.Id);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Be.SET_TEMPLATE,t)}))})),r(De,Ne.SET_ID,(function(e,t){e.commit(Be.SET_ID,t)})),De),Ae=e.defineComponent({name:"NotificationEditor",props:{fieldContainer:{required:!1,type:null}},setup:function(){}});Ae.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h4",null,e.toDisplayString(t.fieldContainer.name.concatenatedContent),1),e.createElementVNode("div",null,e.toDisplayString(t.fieldContainer),1)],64)};var Me=e.defineComponent({name:"FormEditor",props:["form"],setup:function(){}});Me.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h4",null,e.toDisplayString(t.form.name.concatenatedContent),1),e.createElementVNode("div",null,e.toDisplayString(t.form),1)],64)};var Le=e.defineComponent({name:"MetadatasetEditor",props:["metadataset"],setup:function(){}});Le.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h4",null,e.toDisplayString(t.metadataset.name.concatenatedContent),1),e.createElementVNode("div",null,e.toDisplayString(t.metadataset),1)],64)};var Re=e.defineComponent({name:"ItemTemplate",components:{NotificationEditor:Ae,FormEditor:Me,MetadatasetEditor:Le},props:{},setup:function(){var t=y(),n=e.ref(null);return{template:e.computed((function(){return t.state.template})),metadataSets:e.computed((function(){var e;return null===(e=t.state.template)||void 0===e?void 0:e.metadataSets})),dataContainer:e.computed((function(){var e;return null===(e=t.state.template)||void 0===e?void 0:e.dataContainer})),activePanel:n}},methods:{formatDate:function(e){return le(e).format("MMM DD, YYYY")}}}),Ve=function(t){return e.pushScopeId("data-v-2579f0c4"),t=t(),e.popScopeId(),t},xe={class:"container row itemTemplate"},we={class:"col-md-4"},Pe=[Ve((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Overview",-1)}))],Ue=[Ve((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Notifications",-1)}))],$e=["onClick"],je=[Ve((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Forms",-1)}))],Ge=["onClick"],qe=[Ve((function(){return e.createElementVNode("div",{class:"sectionLabel"},"Metadata Forms",-1)}))],He=["onClick"],Ye={class:"col-md-8"},Ke={key:0,class:"col-12 wrapper"},ze=[Ve((function(){return e.createElementVNode("h4",null,"Overview",-1)}))],Xe={key:1,class:"col-12 wrapper"},We=[Ve((function(){return e.createElementVNode("h4",null,"Notifications",-1)}))],Qe={key:0},Je={key:2,class:"col-12 wrapper"},Ze=[Ve((function(){return e.createElementVNode("h4",null,"Forms",-1)}))],et={key:0},tt={key:3,class:"col-12 wrapper"},nt=[Ve((function(){return e.createElementVNode("h4",null,"Metadata Forms",-1)}))],ot={key:0};function it(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}it("\n.menuEntry[data-v-2579f0c4]{\r\n        border: 1px solid Grey;\r\n        margin: 10px;\r\n        padding: 10px 10px;\n}\n.menuEntry.active[data-v-2579f0c4] {\r\n            background-color: #BBBCAA;\n}\n.sectionLabel[data-v-2579f0c4]{\r\n        font-weight: bold;\n}\n.wrapper[data-v-2579f0c4]{\r\n        margin: 0;\r\n        padding: 0;\n}\r\n"),Re.render=function(t,n,o,i,l,r){var a,c,s,d,u,m=e.resolveComponent("NotificationEditor"),p=e.resolveComponent("FormEditor"),f=e.resolveComponent("MetadatasetEditor");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",null,e.toDisplayString(null===(a=t.template)||void 0===a?void 0:a.templateName),1),e.createElementVNode("div",xe,[e.createElementVNode("div",we,[e.createElementVNode("div",{class:e.normalizeClass(["col-12 menuEntry","overview"==t.activePanel||null==t.activePanel?"active":""]),onClick:n[0]||(n[0]=function(e){return t.activePanel="overview"})},Pe,2),e.createElementVNode("div",{class:e.normalizeClass(["col-12 menuEntry","notifications"==t.activePanel?"active":""]),onClick:n[1]||(n[1]=function(e){return t.activePanel="notifications"})},Ue,2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(c=t.metadataSets)||void 0===c?void 0:c.filter((function(e){return 1==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["col-12 menuEntry",t.activePanel==n.id?"active":""]),onClick:function(e){return t.activePanel=n.id}},e.toDisplayString(n.name.concatenatedContent),11,$e)})),128)),e.createElementVNode("div",{class:"col-12 menuEntry",onClick:n[2]||(n[2]=function(e){return t.activePanel="forms"})},je),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dataContainer,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["col-12 menuEntry",t.activePanel==n.id?"active":""]),onClick:function(e){return t.activePanel=n.id}},e.toDisplayString(n.name.concatenatedContent),11,Ge)})),128)),e.createElementVNode("div",{class:"col-12 menuEntry",onClick:n[3]||(n[3]=function(e){return t.activePanel="metadata-forms"})},qe),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(s=t.metadataSets)||void 0===s?void 0:s.filter((function(e){return 0==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["col-12 menuEntry",t.activePanel==n.id?"active":""]),onClick:function(e){return t.activePanel=n.id}},e.toDisplayString(n.name.concatenatedContent),11,He)})),128))]),e.createElementVNode("div",Ye,[null==t.activePanel||"overview"==t.activePanel?(e.openBlock(),e.createElementBlock("div",Ke,ze)):e.createCommentVNode("",!0),"notifications"==t.activePanel?(e.openBlock(),e.createElementBlock("div",Xe,We)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(d=t.metadataSets)||void 0===d?void 0:d.filter((function(e){return 1==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"col-12 wrapper"},[t.activePanel==n.id?(e.openBlock(),e.createElementBlock("div",Qe,[e.createVNode(m,{fieldContainer:n},null,8,["fieldContainer"])])):e.createCommentVNode("",!0)])})),128)),"forms"==t.activePanel?(e.openBlock(),e.createElementBlock("div",Je,Ze)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dataContainer,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"col-12 wrapper"},[t.activePanel==n.id?(e.openBlock(),e.createElementBlock("div",et,[e.createVNode(p,{form:n},null,8,["form"])])):e.createCommentVNode("",!0)])})),128)),"metadata-forms"==t.activePanel?(e.openBlock(),e.createElementBlock("div",tt,nt)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(u=t.metadataSets)||void 0===u?void 0:u.filter((function(e){return 0==e.isTemplate})),(function(n){return e.openBlock(),e.createElementBlock("div",{key:n.id,class:"col-12 wrapper"},[t.activePanel==n.id?(e.openBlock(),e.createElementBlock("div",ot,[e.createVNode(f,{metadataset:n},null,8,["metadataset"])])):e.createCommentVNode("",!0)])})),128))])])],64)},Re.__scopeId="data-v-2579f0c4";var lt=e.defineComponent({name:"ItemTemplateEditor",components:{ItemTemplate:Re},props:s,setup:function(e){var t=y();console.log("Item Template Editor setup ..."),console.log("props: ",JSON.stringify(e));var n=e.queryParameters;return t.dispatch("SET_ID",n.id),t.dispatch("LOAD_TEMPLATE"),{queryParams:n}},storeConfig:{state:{Id:null,template:null},actions:Oe,mutations:be,getters:{}}}),rt=e.createElementVNode("h3",null,"Item Template Editor",-1);lt.render=function(t,n,o,i,l,r){var a=e.resolveComponent("ItemTemplate");return e.openBlock(),e.createElementBlock(e.Fragment,null,[rt,e.createElementVNode("div",null,"Item Template ID: "+e.toDisplayString(t.queryParameters.id),1),e.createVNode(a)],64)};var at=e.defineComponent({name:"ItemEditor",components:{},props:s,setup:function(e,t){return console.log("Editor setup ..."),console.log("props: ",e),console.log("context: ",t),{queryParameters:e.queryParameters}},mounted:function(){console.log("Editor mounted ...")}}),ct=e.createElementVNode("h2",null,"Item Ediror",-1);at.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock("div",null,[ct,e.createElementVNode("div",null,"Item ID: "+e.toDisplayString(t.queryParameters.id),1)])};var st,dt;!function(e){e.SET_ID="SET_ID",e.SET_ITEM="SET_ITEM",e.CHANGE_STATE="CHANGE_STATE"}(dt||(dt={}));var ut,mt,pt=(r(st={},dt.SET_ID,(function(e,t){e.id=t})),r(st,dt.SET_ITEM,(function(e,t){e.item=t})),r(st,dt.CHANGE_STATE,(function(e,t){console.log(JSON.stringify(e)),console.log(JSON.stringify(t))})),st);!function(e){e.LOAD_ITEM="LOAD_ITEM",e.CHANGE_STATE="CHANGE_STATE"}(mt||(mt={}));var ft,vt,Et,ht=(r(ut={},mt.LOAD_ITEM,(function(e){var t=window.location.origin+"/applets/api/itemeditor/".concat(e.state.id);console.log("Item Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(dt.SET_ITEM,t)}))})),r(ut,mt.CHANGE_STATE,(function(e,t){console.log(JSON.stringify(e.state));var n=window.location.origin+"/applets/api/itemeditor/deleteItem/".concat(t);console.log("Item Load API: ",n),fetch(n,{method:"post"}).then((function(e){switch(console.log(e.status),e.status){case 200:window.location.href="/";break;case 401:alert("Authorization failed.");break;case 404:alert("Item not found.");break;case 500:alert("Internal server error occurred.");break;default:alert("Unknown error occurred.")}})).catch((function(e){alert("Unknown error occurred."),console.log(e)}))})),ut),St={rootDataItem:function(e){var t,n,o;return null===(t=e.item)||void 0===t||null===(n=t.dataContainer)||void 0===n||null===(o=n.$values)||void 0===o?void 0:o.filter((function(e){return e.isRoot}))[0]},metadataSet:function(e){return function(t){var n,o,i;return console.log("metadataset getter id: "+JSON.stringify(t)),null===(n=e.item)||void 0===n||null===(o=n.metadataSets)||void 0===o||null===(i=o.$values)||void 0===i?void 0:i.find((function(e){return e.templateId===t}))}},dataItemId:function(e){var t,n,o,i;return null===(t=e.item)||void 0===t||null===(n=t.dataContainer)||void 0===n||null===(o=n.$values)||void 0===o||null===(i=o.filter((function(e){return e.isRoot}))[0])||void 0===i?void 0:i.id}};!function(e){e[e[void 0]=0]="undefined",e[e.data=1]="data",e[e.metadata=2]="metadata"}(ft||(ft={})),function(e){e[e.AttachmentField=0]="AttachmentField",e[e.CheckboxField=1]="CheckboxField",e[e.CompositeField=2]="CompositeField",e[e.DateField=3]="DateField",e[e.DecimalField=4]="DecimalField",e[e.EmailField=5]="EmailField",e[e.FieldContainerReference=6]="FieldContainerReference",e[e.InfoSection=7]="InfoSection",e[e.IntegerField=8]="IntegerField",e[e.MonolingualTextField=9]="MonolingualTextField",e[e.RadioField=10]="RadioField",e[e.SelectField=11]="SelectField",e[e.TableField=12]="TableField",e[e.TextArea=13]="TextArea",e[e.TextField=14]="TextField",e[e.AudioRecorderField=15]="AudioRecorderField"}(vt||(vt={})),function(e){e.VALID="VALID",e.VALUE_REQUIRED="VALUE_REQUIRED",e.INVALID="INVALID"}(Et||(Et={}));var gt=function(){function e(){o(this,e)}return l(e,null,[{key:"getSelectedFieldLabels",value:function(e){return null==e?void 0:e.filter((function(e){return e.selected})).map((function(e){var t;return null===(t=e.optionText)||void 0===t?void 0:t.values.$values.map((function(e){return e.value})).join(" / ")})).join(", ")}}]),e}(),yt=e.defineComponent({name:"Text",props:{model:{type:null,required:!0}},methods:{isUrl:function(e){return(null==e?void 0:e.startsWith("http://"))||(null==e?void 0:e.startsWith("https://"))}}}),Tt={key:0},kt=["href"],_t={key:1};yt.render=function(t,n,o,i,l,r){return t.isUrl(t.model.value)?(e.openBlock(),e.createElementBlock("div",Tt,[e.createElementVNode("a",{href:t.model.value},e.toDisplayString(t.model.value),9,kt)])):(e.openBlock(),e.createElementBlock("div",_t,e.toDisplayString(t.model.value),1))};var It=e.defineComponent({name:"TextCollection",props:{model:{type:null,required:!0}},components:{Text:yt}});It.render=function(t,n,o,i,l,r){var a=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(a,{model:t},null,8,["model"])])})),256)};var Ft=e.defineComponent({name:"TextField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!0},isMultiline:{type:Boolean,required:!1,default:!0}},components:{TextCollection:It}});Ft.render=function(t,n,o,i,l,r){var a=e.resolveComponent("TextCollection");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id},[e.createVNode(a,{model:t},null,8,["model"])])})),128)};var Ct=e.defineComponent({name:"EmailField",props:{model:{type:null,required:!0},isMultivalue:{type:Boolean,required:!1,default:!1}}});Ct.render=function(t,n,o,i,l,r){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.value),1)})),256)};var Bt=e.defineComponent({name:"OptionsField",components:{},props:{model:{type:Object,required:!0}},methods:{getSelectedFieldLabels:function(e){return gt.getSelectedFieldLabels(e.options.$values)}}});Bt.render=function(t,n,o,i,l,r){return e.toDisplayString(t.getSelectedFieldLabels(t.model))};var Dt=e.defineComponent({name:"DecimalField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1},numDecimalPlaces:{type:Number,required:!1,default:2}},methods:{formatToDecimal:function(e,t){return Number(e).toFixed(t)}}});Dt.render=function(t,n,o,i,l,r){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.formatToDecimal(n,t.numDecimalPlaces)),1)})),256)};var Nt=e.defineComponent({name:"IntegerField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}}});Nt.render=function(t,n,o,i,l,r){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.value),1)})),256)};var bt=e.defineComponent({name:"DateField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}},methods:{formatDate:function(e){return le(e).format("MMM DD, YYYY")}}});bt.render=function(t,n,o,i,l,r){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.values.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(t.formatDate(n.value)),1)})),256)};var Ot=e.defineComponent({name:"ChildFieldContainer",props:{model:null},components:{TextField:Ft,EmailField:Ct,OptionsField:Bt,DecimalField:Dt,IntegerField:Nt,DateField:bt},methods:{getFieldType:function(e){var t,n=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return n=null===(t=n)||void 0===t?void 0:t.substring(n.lastIndexOf(".")+1),vt[n]},isAttachmentField:function(e){return this.getFieldType(e)===vt.AttachmentField},isOptionsField:function(e){return this.getFieldType(e)===vt.CheckboxField||this.getFieldType(e)===vt.RadioField||this.getFieldType(e)===vt.SelectField},isCompositeField:function(e){return this.getFieldType(e)===vt.CompositeField},isDateField:function(e){return this.getFieldType(e)===vt.DateField},isDecimalField:function(e){return this.getFieldType(e)===vt.DecimalField},isEmailField:function(e){return this.getFieldType(e)===vt.EmailField},isFieldContainerReference:function(e){return this.getFieldType(e)===vt.FieldContainerReference},isInfoSection:function(e){return this.getFieldType(e)===vt.InfoSection},isIntegerField:function(e){return this.getFieldType(e)===vt.IntegerField},isMonolingualTextField:function(e){return this.getFieldType(e)===vt.MonolingualTextField},isTableField:function(e){return this.getFieldType(e)===vt.TableField},isTextArea:function(e){return this.getFieldType(e)===vt.TextArea},isTextField:function(e){return this.getFieldType(e)===vt.TextField},cssClass:function(e){return(e.cssClass?e.cssClass:"")+" "+(e.fieldCssClass?e.fieldCssClass:"")}}}),At={class:"field-name col-md-3"},Mt={class:"field-value col-md-9"},Lt={key:7},Rt={key:8},Vt={key:9},xt={key:11};Ot.render=function(t,n,o,i,l,r){var a=this,c=e.resolveComponent("TextField"),s=e.resolveComponent("EmailField"),d=e.resolveComponent("OptionsField"),u=e.resolveComponent("DecimalField"),m=e.resolveComponent("IntegerField"),p=e.resolveComponent("DateField");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.fields.$values,(function(n){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["row",t.cssClass(n)])},[e.createElementVNode("div",At,e.toDisplayString(n.name.concatenatedContent),1),e.createElementVNode("div",Mt,[a.isTextField(n)?(e.openBlock(),e.createBlock(c,{key:0,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isTextArea(n)?(e.openBlock(),e.createBlock(c,{key:1,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isEmailField(n)?(e.openBlock(),e.createBlock(s,{key:2,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isOptionsField(n)?(e.openBlock(),e.createBlock(d,{key:3,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isDecimalField(n)?(e.openBlock(),e.createBlock(u,{key:4,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isIntegerField(n)?(e.openBlock(),e.createBlock(m,{key:5,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isDateField(n)?(e.openBlock(),e.createBlock(p,{key:6,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isAttachmentField(t.model)?(e.openBlock(),e.createElementBlock("div",Lt," AttachmentField ")):e.createCommentVNode("",!0),a.isCompositeField(t.model)?(e.openBlock(),e.createElementBlock("div",Rt," CompositeField ")):e.createCommentVNode("",!0),a.isInfoSection(t.model)?(e.openBlock(),e.createElementBlock("div",Vt," InfoSection ")):e.createCommentVNode("",!0),a.isMonolingualTextField(t.model)?(e.openBlock(),e.createBlock(c,{key:10,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isTableField(t.model)?(e.openBlock(),e.createElementBlock("div",xt," TableField ")):e.createCommentVNode("",!0)])],2)})),256)};var wt=e.defineComponent({name:"FieldContainerReference",components:{ChildFieldContainer:Ot},props:{model:{type:null,required:!0}},setup:function(t){var n=y(),o=e.ref(t.model.refId);return console.log("refId: "+JSON.stringify(o)),{refId:o,source:e.computed((function(){return n.getters.metadataSet(o.value)}))}}});wt.render=function(t,n,o,i,l,r){var a=e.resolveComponent("ChildFieldContainer");return e.openBlock(),e.createBlock(a,{model:t.source},null,8,["model"])};var Pt=e.defineComponent({name:"AttachmentField",components:{},props:{model:{type:null,required:!0}},setup:function(t){var n=y(),o=e.ref(n.state.item.id),i=e.ref(n.getters.dataItemId);return{itemId:o,fileUrl:"/api/items/"+o.value+"/"+i.value+"/"+t.model.id+"/"}}}),Ut=["href"],$t=["src"];it("\n.img-thumbnail[data-v-307ae89a]{\r\n        width:35px;\r\n        height: auto;\r\n        margin-right: 10px;\n}\r\n"),Pt.render=function(t,n,o,i,l,r){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.files.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("a",{href:t.fileUrl+n.fileName},[e.createElementVNode("img",{src:n.thumbnail,class:"img-thumbnail"},null,8,$t)],8,Ut),e.createTextVNode(e.toDisplayString(n.originalFileName),1)])})),256)},Pt.__scopeId="data-v-307ae89a";var jt=e.defineComponent({name:"InfoField",props:{model:{type:null,required:!0}}}),Gt=["innerHTML"];jt.render=function(t,n,o,i,l,r){return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.content.values.$values,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id},[e.createElementVNode("div",{innerHTML:t.value},null,8,Gt)])})),128)};var qt=e.defineComponent({name:"FieldContainer",props:{model:null,hideFieldNames:Boolean},components:{TextField:Ft,EmailField:Ct,OptionsField:Bt,DecimalField:Dt,IntegerField:Nt,DateField:bt,ReferenceField:wt,AttachmentField:Pt,InfoField:jt},methods:{getFieldType:function(e){var t,n=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return n=null===(t=n)||void 0===t?void 0:t.substring(n.lastIndexOf(".")+1),vt[n]},isAttachmentField:function(e){return this.getFieldType(e)===vt.AttachmentField},isOptionsField:function(e){return this.getFieldType(e)===vt.CheckboxField||this.getFieldType(e)===vt.RadioField||this.getFieldType(e)===vt.SelectField},isCompositeField:function(e){return this.getFieldType(e)===vt.CompositeField},isDateField:function(e){return this.getFieldType(e)===vt.DateField},isDecimalField:function(e){return this.getFieldType(e)===vt.DecimalField},isEmailField:function(e){return this.getFieldType(e)===vt.EmailField},isFieldContainerReference:function(e){return this.getFieldType(e)===vt.FieldContainerReference},isInfoSection:function(e){return this.getFieldType(e)===vt.InfoSection},isIntegerField:function(e){return this.getFieldType(e)===vt.IntegerField},isMonolingualTextField:function(e){return this.getFieldType(e)===vt.MonolingualTextField},isTableField:function(e){return this.getFieldType(e)===vt.TableField},isTextArea:function(e){return this.getFieldType(e)===vt.TextArea},isTextField:function(e){return this.getFieldType(e)===vt.TextField},cssClass:function(e){return e.cssClass+" "+e.fieldCssClass},formatDate:function(e){return le(e).format("MMM DD, YYYY")}}}),Ht={class:"timeStamp"},Yt={key:0,class:"field-name col-md-3"},Kt={class:"field-value col-md-9"},zt={key:10},Xt={key:11};qt.render=function(t,n,o,i,l,r){var a=this,c=e.resolveComponent("ReferenceField"),s=e.resolveComponent("TextField"),d=e.resolveComponent("EmailField"),u=e.resolveComponent("OptionsField"),m=e.resolveComponent("DecimalField"),p=e.resolveComponent("IntegerField"),f=e.resolveComponent("DateField"),v=e.resolveComponent("AttachmentField"),E=e.resolveComponent("InfoField");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Ht,e.toDisplayString(t.formatDate(t.model.created)),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.fields.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[a.isFieldContainerReference(n)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(t.cssClass(n))},[e.createVNode(c,{model:n},null,8,["model"])],2)):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["row",t.cssClass(n)])},[t.hideFieldNames?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Yt,e.toDisplayString(n.name.concatenatedContent),1)),e.createElementVNode("div",Kt,[a.isTextField(n)?(e.openBlock(),e.createBlock(s,{key:0,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isTextArea(n)?(e.openBlock(),e.createBlock(s,{key:1,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isEmailField(n)?(e.openBlock(),e.createBlock(d,{key:2,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isOptionsField(n)?(e.openBlock(),e.createBlock(u,{key:3,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isDecimalField(n)?(e.openBlock(),e.createBlock(m,{key:4,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isIntegerField(n)?(e.openBlock(),e.createBlock(p,{key:5,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isDateField(n)?(e.openBlock(),e.createBlock(f,{key:6,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isMonolingualTextField(t.model)?(e.openBlock(),e.createBlock(s,{key:7,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isAttachmentField(n)?(e.openBlock(),e.createBlock(v,{key:8,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isInfoSection(n)?(e.openBlock(),e.createBlock(E,{key:9,model:n},null,8,["model"])):e.createCommentVNode("",!0),a.isCompositeField(n)?(e.openBlock(),e.createElementBlock("div",zt," CompositeField ")):e.createCommentVNode("",!0),a.isTableField(n)?(e.openBlock(),e.createElementBlock("div",Xt," TableField ")):e.createCommentVNode("",!0)])],2))])})),256))],64)};var Wt=e.defineComponent({name:"ItemViewer",components:{FieldContainer:qt},props:s,setup:function(t){var n=y(),o=t.dataAttributes;console.log("Item Viewer setup ..."),console.log("props: ",JSON.stringify(t));var i=o["is-admin"];console.log("isAdmin: ",i);var l=t.queryParameters;return n.commit(dt.SET_ID,l.iid),n.dispatch(mt.LOAD_ITEM),{store:n,queryParams:l,dataItem:e.computed((function(){return n.getters.rootDataItem})),isAdmin:i}},storeConfig:{state:{id:null,item:null},actions:ht,mutations:pt,getters:St},methods:{changeItemState:function(e){confirm("Do you really want to delete this item?")&&(console.log("id: "+e),this.store.dispatch(mt.CHANGE_STATE,e))}}}),Qt={key:0,class:"text-right"};var Jt;it("\n.field-name[data-v-19fa11d4] {\r\n        font-weight: bold !important;\n}\n.fa-remove[data-v-19fa11d4] {\r\n        color: red;\r\n        margin-left: 30px;\n}\r\n"),Wt.render=function(t,n,o,i,l,r){var a=e.resolveComponent("FieldContainer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.isAdmin?(e.openBlock(),e.createElementBlock("div",Qt,[e.createElementVNode("span",{class:"fas fa-remove",onClick:n[0]||(n[0]=function(e){t.changeItemState(t.queryParams.iid)})})])):e.createCommentVNode("",!0),t.dataItem?(e.openBlock(),e.createBlock(a,{key:1,model:t.dataItem,class:"item"},null,8,["model"])):e.createCommentVNode("",!0)],64)},Wt.__scopeId="data-v-19fa11d4",function(e){e[e.InProgress=1]="InProgress",e[e.Ready=2]="Ready"}(Jt||(Jt={}));var Zt,en,tn={indexingStatus:{pageIndexingStatus:Jt.Ready,dataIndexingStatus:Jt.Ready}};!function(e){e.SET_REINDEX_PAGE_STATUS="SET_REINDEX_PAGE_STATUS",e.SET_REINDEX_DATA_STATUS="SET_REINDEX_DATA_STATUS",e.SET_REINDEX_STATUS="SET_REINDEX_STATUS"}(en||(en={}));var nn,on,ln=(r(Zt={},en.SET_REINDEX_PAGE_STATUS,(function(e,t){console.log("SET_REINDEX_PAGE_STATUS: ",t),e.indexingStatus.pageIndexingStatus=t})),r(Zt,en.SET_REINDEX_DATA_STATUS,(function(e,t){console.log("SET_REINDEX_DATA_STATUS: ",t),e.indexingStatus.dataIndexingStatus=t})),r(Zt,en.SET_REINDEX_STATUS,(function(e,t){console.log("SET_REINDEX_STATUS: ",t),e.indexingStatus=t})),Zt);!function(e){e.REINDEX_DATA="REINDEX_DATA",e.REINDEX_PAGES="REINDEX_PAGES",e.FETCH_REINDEX_STATUS="FETCH_REINDEX_STATUS"}(on||(on={}));var rn=(r(nn={},on.REINDEX_DATA,(function(e){var t=window.location.origin+"/applets/api/reindex/data";e.commit(en.SET_REINDEX_DATA_STATUS,Jt.InProgress),fetch(t,{method:"POST"}).then((function(e){return e.json()})).then((function(t){e.commit(en.SET_REINDEX_DATA_STATUS,t)})).catch((function(e){console.error("Data reindexing error:",e)}))})),r(nn,on.REINDEX_PAGES,(function(e){var t=window.location.origin+"/applets/api/reindex/pages";e.commit(en.SET_REINDEX_PAGE_STATUS,Jt.InProgress),fetch(t,{method:"POST"}).then((function(e){return e.json()})).then((function(t){e.commit(en.SET_REINDEX_PAGE_STATUS,t)})).catch((function(e){console.error("Page reindexing error:",e)}))})),r(nn,on.FETCH_REINDEX_STATUS,(function(e){var t=window.location.origin+"/applets/api/reindex/status";fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(en.SET_REINDEX_STATUS,t)})).catch((function(e){console.error("Fetch reindexing status error:",e)}))})),nn),an=e.defineComponent({name:"IndexingPanel",props:{},setup:function(){var t=y();return{reindexData:function(){return t.dispatch(on.REINDEX_DATA)},reindexPages:function(){return t.dispatch(on.REINDEX_PAGES)},isPageIndexingReady:e.computed((function(){return t.state.indexingStatus.pageIndexingStatus==Jt.Ready})),isDataIndexingReady:e.computed((function(){return t.state.indexingStatus.dataIndexingStatus==Jt.Ready}))}}}),cn=e.createElementVNode("h5",{class:"card-title"},"Data Indexing",-1),sn=e.createElementVNode("p",{class:"card-text"},"With supporting text below as a natural lead-in to additional content.",-1),dn={key:1,class:"btn btn-danger",disabled:""},un=e.createElementVNode("br",null,null,-1),mn=e.createElementVNode("br",null,null,-1),pn=e.createElementVNode("h5",{class:"card-title"},"Page Indexing",-1),fn=e.createElementVNode("p",{class:"card-text"},"With supporting text below as a natural lead-in to additional content.",-1),vn={key:3,class:"btn btn-danger",disabled:""};an.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock(e.Fragment,null,[cn,sn,t.isDataIndexingReady?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary",onClick:n[0]||(n[0]=function(){return t.reindexData&&t.reindexData.apply(t,arguments)})},"Reindex")):(e.openBlock(),e.createElementBlock("button",dn,"Indexing In-progress")),un,mn,pn,fn,t.isPageIndexingReady?(e.openBlock(),e.createElementBlock("button",{key:2,class:"btn btn-primary",onClick:n[1]||(n[1]=function(){return t.reindexPages&&t.reindexPages.apply(t,arguments)})},"Reindex")):(e.openBlock(),e.createElementBlock("button",vn,"Indexing In-progress"))],64)};var En,hn,Sn=e.defineComponent({name:"Applet",components:{IndexingPanel:an},props:s,setup:function(t){console.log("Process Manager setup ...",t);var n=y();e.onMounted((function(){return n.dispatch(on.FETCH_REINDEX_STATUS)}))},storeConfig:{state:tn,actions:rn,mutations:ln,getters:{}}}),gn={class:"card"},yn=e.createElementVNode("div",{class:"card-header"}," Indexing Processes ",-1),Tn={class:"card-body"};Sn.render=function(t,n,o,i,l,r){var a=e.resolveComponent("IndexingPanel");return e.openBlock(),e.createElementBlock("div",gn,[yn,e.createElementVNode("div",Tn,[e.createVNode(a)])])},function(e){e.SET_SOURCE="SET_SOURCE",e.SET_MODEL="SET_MODEL"}(hn||(hn={}));var kn,_n,In=(r(En={},hn.SET_SOURCE,(function(e,t){e.pageId=t.pageId,e.blockId=t.blockId})),r(En,hn.SET_MODEL,(function(e,t){e.model=t})),En);!function(e){e.LOAD_BLOCK="LOAD_BLOCK",e.LOAD_PAGE="LOAD_PAGE"}(_n||(_n={}));var Fn=(r(kn={},_n.LOAD_BLOCK,(function(e){e.state.pageId||console.error("Page ID is null. It must be a valid GUID"),e.state.blockId||console.error("Block ID is null. It must be a valid GUID");var t=window.location.origin+"/applets/api/content/page/".concat(e.state.pageId,"/block/").concat(e.state.blockId);console.log("LOAD_BLOCK API: ",t),fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.commit(hn.SET_MODEL,t)})).catch((function(e){console.error("LOAD_BLOCK error:",e)}))})),r(kn,_n.LOAD_PAGE,(function(e){if(!e.state.pageId)throw new Error("Page ID is null. It must be a valid GUID");var t=window.location.origin+"/applets/api/content/page/".concat(e.state.pageId);console.log("LOAD_PAGE API: ",t),fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.commit(hn.SET_MODEL,t)})).catch((function(e){console.error("LOAD_PAGE error:",e)}))})),kn),Cn=e.defineComponent({name:"ImgDiv",props:{image:{type:Object,required:!0},debounceMs:{type:Number,required:!1,default:200}},methods:{resizeHandler:function(){this.setViewHeight(!1)},setViewHeight:function(e){var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout);var n=e?0:this.debounceMs;this.resizeTimeout=setTimeout((function(){if(t.root){var e=Math.round(t.root.clientWidth/t.aspectRatio);t.root.style.height="".concat(e,"px")}}),n)}},created:function(){window.addEventListener("resize",this.resizeHandler)},destroyed:function(){window.removeEventListener("resize",this.resizeHandler)},mounted:function(){this.setViewHeight(!0)},setup:function(t){var n=e.toRefs(t).image,o=e.ref(),i=e.ref();return{root:o,imageUrl:e.computed((function(){var e,t;return null===(e=n.value)||void 0===e||null===(t=e.publicUrl)||void 0===t?void 0:t.replace(/^~+/g,"")})),aspectRatio:e.computed((function(){return n.value?n.value.width/n.value.height:1})),resizeTimeout:i}}}),Bn=["id"];Cn.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock("div",{ref:"root",style:e.normalizeStyle([{backgroundImage:"url(".concat(t.imageUrl,")")},{"background-size":"cover"}]),id:t.image.id,class:"cf-img-div"},null,12,Bn)};var Dn=e.defineComponent({name:"CardTemplate",components:{ImgDiv:Cn},props:{model:{type:Object,required:!0}},setup:function(t){var n=e.toRefs(t).model;return{model:n,cardImage:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.cardImage.media})),popupImageUrl:e.computed((function(){var e,t,o;return null===(e=n.value)||void 0===e||null===(t=e.modalImage)||void 0===t||null===(o=t.media)||void 0===o?void 0:o.publicUrl})),title:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.cardTitle.value})),subTitle:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.cardSubTitle.value})),hasModel:e.computed((function(){return n.value.hasAModal})),modelImage:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.modalImage})),modalTitle:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.modalTitle.value})),modalSubTitle:e.computed((function(){var e;return null===(e=n.value)||void 0===e?void 0:e.modalSubTitle.value}))}}}),Nn={class:"col-md-4 cf-card"};it("\n.cf-card{\r\n        text-align:center;\n}\r\n"),Dn.render=function(t,n,o,i,l,r){var a=e.resolveComponent("img-div");return e.openBlock(),e.createElementBlock("div",Nn,[e.createVNode(a,{image:t.cardImage,"debounce-ms":250,class:"img-div"},null,8,["image"]),e.createElementVNode("h2",null,e.toDisplayString(t.title),1),e.createElementVNode("h4",null,e.toDisplayString(t.subTitle),1)])};var bn=e.defineComponent({name:"Applet",components:{CardTemplate:Dn},props:s,setup:function(t){console.log("Grid setup ...");var n=y();return n.commit(hn.SET_SOURCE,{pageId:t.pageId,blockId:t.blockId}),e.onMounted((function(){return n.dispatch(_n.LOAD_BLOCK)})),{model:e.computed((function(){return n.state.model}))}},storeConfig:{actions:Fn,mutations:In,getters:{searchParamStorageKey:function(e){var t;return(null===(t=e.blockId)||void 0===t?void 0:t.toString())+"SearchParams"}}}}),On=e.createElementVNode("h2",null,"Grid",-1),An={class:"row"};bn.render=function(t,n,o,i,l,r){var a,c=e.resolveComponent("CardTemplate");return e.openBlock(),e.createElementBlock("div",null,[On,e.createElementVNode("div",An,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a?void 0:a.items,(function(t){return e.openBlock(),e.createBlock(c,{model:t},null,8,["model"])})),256))])])};var Mn,Ln,Rn=oe((function(e,t){t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n}));!function(e){e.None="None",e.InProgress="InProgress",e.Success="Success",e.Fail="Fail"}(Mn||(Mn={})),function(e){e.SET_TEXT_VALUE="SET_TEXT_VALUE",e.SET_OPTION_VALUE="SET_OPTION_VALUE"}(Ln||(Ln={}));var Vn=function(){function e(){o(this,e)}return l(e,null,[{key:"cssClass",value:function(e){return e.cssClass+" "+e.fieldCssClass}},{key:"getFieldType",value:function(e){var t,n=null==e?void 0:e.$type.substring(0,e.$type.indexOf(","));return n=null===(t=n)||void 0===t?void 0:t.substring(n.lastIndexOf(".")+1),vt[n]}},{key:"isAttachmentField",value:function(e){return this.getFieldType(e)===vt.AttachmentField}},{key:"isOptionsField",value:function(e){var t=this.getFieldType(e);return t===vt.CheckboxField||t===vt.RadioField||t===vt.SelectField}},{key:"isCompositeField",value:function(e){return this.getFieldType(e)===vt.CompositeField}},{key:"isDateField",value:function(e){return this.getFieldType(e)===vt.DateField}},{key:"isDecimalField",value:function(e){return this.getFieldType(e)===vt.DecimalField}},{key:"isEmailField",value:function(e){return this.getFieldType(e)===vt.EmailField}},{key:"isFieldContainerReference",value:function(e){return this.getFieldType(e)===vt.FieldContainerReference}},{key:"isInfoSection",value:function(e){return this.getFieldType(e)===vt.InfoSection}},{key:"isIntegerField",value:function(e){return this.getFieldType(e)===vt.IntegerField}},{key:"isMonolingualTextField",value:function(e){return this.getFieldType(e)===vt.MonolingualTextField}},{key:"isTableField",value:function(e){return this.getFieldType(e)===vt.TableField}},{key:"isTextArea",value:function(e){return this.getFieldType(e)===vt.TextArea}},{key:"isTextField",value:function(e){return this.getFieldType(e)===vt.TextField}},{key:"isAudioRecorderField",value:function(e){return this.getFieldType(e)===vt.AudioRecorderField}}]),e}();function xn(e,t){var n,o;null==e||null===(n=e.fields)||void 0===n||null===(o=n.$values)||void 0===o||o.forEach((function(e){var n,o,i,l=null===(n=e.$type)||void 0===n?void 0:n.substring(0,e.$type.indexOf(",")),r=l.substring(l.lastIndexOf(".")+1),a=vt[r],c=a===vt.DateField||a===vt.DecimalField||a===vt.EmailField||a===vt.IntegerField||a===vt.MonolingualTextField,s=a===vt.TextArea||a===vt.TextField,d=a===vt.CheckboxField||a===vt.RadioField||a===vt.SelectField;if(c)null===(o=e.values)||void 0===o||null===(i=o.$values)||void 0===i||i.forEach((function(e){t.flattenedTextModels[e.id.toString()]=e}));else if(s){var u,m;null===(u=e.values)||void 0===u||null===(m=u.$values)||void 0===m||m.forEach((function(e){var n,o;null===(n=e.values)||void 0===n||null===(o=n.$values)||void 0===o||o.forEach((function(e){t.flattenedTextModels[e.id.toString()]=e}))}))}else if(d){var p,f;null===(p=e.options)||void 0===p||null===(f=p.$values)||void 0===f||f.forEach((function(e){t.flattenedOptionModels[e.id.toString()]=e}))}}))}function wn(e){Object.keys(e.flattenedTextModels).forEach((function(t){e.flattenedTextModels[t].value=""})),Object.keys(e.flattenedOptionModels).forEach((function(t){e.flattenedOptionModels[t].selected=!1}))}var Pn,Un,$n={itemTemplateId:null,formId:null,collectionId:null,groupId:null,form:null,flattenedTextModels:{},flattenedOptionModels:{},submissionStatus:Mn.None,formLoadAPI:null,formSubmissionAPI:null},jn=n({itemInstanceId:null,childResponseFormId:null,childResponseForm:null,formInstances:null},$n),Gn=function e(){o(this,e)};function qn(e){if(!e.required)return Et.VALID;for(var t=!1,n=0;!t&&null!=e&&e.values&&n<(null===(o=e.values)||void 0===o||null===(i=o.$values)||void 0===i?void 0:i.length);++n)for(var o,i,l,r=null==e||null===(l=e.values)||void 0===l?void 0:l.$values[n],a=0;!t&&r.values&&a<(null===(c=r.values)||void 0===c?void 0:c.$values.length);++a){var c,s,d,u;t=(null===(s=r.values)||void 0===s||null===(d=s.$values[a])||void 0===d||null===(u=d.value)||void 0===u?void 0:u.trim().length)>0}return t?Et.VALID:Et.VALUE_REQUIRED}function Hn(e,t){for(var n=!1,o=Et.VALID,i=0;null!=e&&e.values&&i<(null===(l=e.values)||void 0===l?void 0:l.$values.length);++i){var l,r,a,c=null===(r=e.values.$values[i])||void 0===r||null===(a=r.value)||void 0===a?void 0:a.trim();(null==c?void 0:c.length)>0&&(n=!0,t&&!t.test(c)&&(o=Et.INVALID))}return e.required&&!n&&(o=Et.VALUE_REQUIRED),o}function Yn(e){for(var t=!1,n=Et.VALID,o=0;null!=e&&e.values&&o<(null===(i=e.values)||void 0===i?void 0:i.$values.length);++o){var i,l;"number"==typeof(null===(l=e.values.$values[o])||void 0===l?void 0:l.value)&&(t=!0)}return e.required&&!t&&(n=Et.VALUE_REQUIRED),n}function Kn(e){if(!e.required)return Et.VALID;for(var t=!1,n=0;!t&&null!==(o=e.options)&&void 0!==o&&o.$values&&n<(null===(i=e.options)||void 0===i||null===(l=i.$values)||void 0===l?void 0:l.length);++n){var o,i,l,r;t=null===(r=e.options)||void 0===r?void 0:r.$values[n].selected}return t?Et.VALID:Et.VALUE_REQUIRED}function zn(e){var t,n,o=!0;return null===(t=e.fields)||void 0===t||null===(n=t.$values)||void 0===n||n.forEach((function(e){switch(Vn.getFieldType(e)){case vt.AttachmentField:break;case vt.CheckboxField:case vt.RadioField:case vt.SelectField:e.validationStatus=Kn(e);break;case vt.CompositeField:break;case vt.DateField:e.validationStatus=Hn(e,null);break;case vt.DecimalField:case vt.IntegerField:e.validationStatus=Yn(e);break;case vt.EmailField:e.validationStatus=Hn(e,Gn.Email);break;case vt.FieldContainerReference:break;case vt.MonolingualTextField:e.validationStatus=Hn(e,null);break;case vt.TableField:break;case vt.TextArea:case vt.TextField:e.validationStatus=qn(e);break;case vt.AudioRecorderField:e.validationStatus=Et.VALID}o=o&&e.validationStatus===Et.VALID})),e.validationStatus=o?null:Et.INVALID,o}r(Gn,"Email",/^[^\s@]+@[^\s@]+\.[^\s@]+$/),r(Gn,"Number",/^\d+$/),r(Gn,"Decimal",/^[+-]?(\d+\.?\d*|\.\d+)$/),function(e){e.CLEAR_FLATTENED_FIELD_MODELS="CLEAR_FLATTENED_FIELD_mODELS",e.SET_ITEM_TEMPLATE_ID="SET_ITEM_TEMPLATE_ID",e.SET_FORM_ID="SET_FORM_ID",e.SET_FORM="SET_FORM",e.SET_SUBMISSION_STATUS="SET_SUBMISSION_STATUS",e.SET_COLLECTION_ID="SET_COLLECTION_ID",e.SET_GROUP_ID="SET_GROUP_ID"}(Un||(Un={}));var Xn,Wn,Qn=(r(Pn={},Un.CLEAR_FLATTENED_FIELD_MODELS,(function(e){e.flattenedTextModels={},e.flattenedOptionModels={}})),r(Pn,Un.SET_ITEM_TEMPLATE_ID,(function(e,t){e.itemTemplateId=t})),r(Pn,Un.SET_FORM_ID,(function(e,t){e.formId=t})),r(Pn,Un.SET_COLLECTION_ID,(function(e,t){e.collectionId=t})),r(Pn,Un.SET_GROUP_ID,(function(e,t){e.groupId=t})),r(Pn,Un.SET_FORM,(function(e,t){e.form=t,xn(e.form,e)})),r(Pn,Ln.SET_TEXT_VALUE,(function(e,t){var n;e.flattenedTextModels[t.id.toString()].value=t.val,(null===(n=e.form)||void 0===n?void 0:n.validationStatus)===Et.INVALID&&zn(e.form)})),r(Pn,Ln.SET_OPTION_VALUE,(function(e,t){e.flattenedOptionModels[t.id.toString()].selected=t.isSelected})),r(Pn,Un.SET_SUBMISSION_STATUS,(function(e,t){e.submissionStatus=Mn[t]})),Pn);!function(e){e.SET_SUBMISSIONS="SET_SUBMISSIONS",e.SET_PARENT_ITEM_ID="SET_PARENT_ITEM_ID",e.APPEND_CHILD_INSTANCE="APPEND_CHILD_INSTANCE",e.SET_RESPONSE_FORM_ID="SET_RESPONSE_FORM_ID",e.SET_RESPONSE_FORM="SET_RESPONSE_FORM",e.APPEND_CHILD_RESPONSE_INSTANCE="APPEND_CHILD_RESPONSE_INSTANCE",e.DELETE_CHILD_RESPONSE_INSTANCE="DELETE_CHILD_RESPONSE_INSTANCE",e.DELETE_CHILD_INSTANCE="DELETE_CHILD_INSTANCE"}(Wn||(Wn={}));var Jn,Zn,eo=n((r(Xn={},Wn.SET_SUBMISSIONS,(function(e,t){e.formInstances=t})),r(Xn,Wn.SET_PARENT_ITEM_ID,(function(e,t){e.itemInstanceId=t})),r(Xn,Wn.APPEND_CHILD_INSTANCE,(function(e,t){var n;null===(n=e.formInstances)||void 0===n||n.$values.unshift(t)})),r(Xn,Wn.SET_RESPONSE_FORM_ID,(function(e,t){e.childResponseFormId=t})),r(Xn,Wn.SET_RESPONSE_FORM,(function(e,t){e.childResponseForm=t,xn(e.childResponseForm,e)})),r(Xn,Wn.APPEND_CHILD_RESPONSE_INSTANCE,(function(e,t){var n,o,i=null===(n=e.formInstances)||void 0===n?void 0:n.$values.find((function(e){return e.id===(null==t?void 0:t.parentId)}));i&&(null===(o=i.childFieldContainers)||void 0===o||o.$values.push(t))})),r(Xn,Wn.DELETE_CHILD_RESPONSE_INSTANCE,(function(e,t){var n,o=null===(n=e.formInstances)||void 0===n?void 0:n.$values.find((function(e){return e.id===(null==t?void 0:t.parentId)}));if(o){var i,l,r=null==o||null===(i=o.childFieldContainers)||void 0===i?void 0:i.$values.indexOf(t);r>=0&&(null===(l=o.childFieldContainers)||void 0===l||l.$values.splice(r,1))}})),r(Xn,Wn.DELETE_CHILD_INSTANCE,(function(e,t){var n,o,i,l=null===(n=e.formInstances)||void 0===n||null===(o=n.$values)||void 0===o?void 0:o.indexOf(t);void 0!==l&&l>=0&&(null===(i=e.formInstances)||void 0===i||i.$values.splice(l,1))})),Xn),Qn);!function(e){e.LOAD_FORM="LOAD_FORM",e.LOAD_SUBMISSIONS="LOAD_SUBMISSIONS",e.LOAD_RESPONSE_FORM="LOAD_RESPONSE_FORM",e.SUBMIT_CHILD_FORM="SUBMIT_CHILD_FORM",e.SUBMIT_CHILD_RESPONSE_FORM="SUBMIT_CHILD_RESPONSE_FORM",e.DELETE_CHILD_RESPONSE_INSTANCE="DELETE_CHILD_RESPONSE_INSTANCE",e.DELETE_CHILD_INSTANCE="DELETE_CHILD_INSTANCE"}(Zn||(Zn={}));var to=(r(Jn={},Zn.LOAD_FORM,(function(e){var t=window.location.origin+"/applets/api/itemeditor/getchildform/".concat(e.state.itemInstanceId,"/").concat(e.state.formId);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Un.SET_FORM,t)})).catch((function(e){console.error("Actions.LOAD_FORM Error: ",e)}))})),r(Jn,Zn.LOAD_RESPONSE_FORM,(function(e){var t=window.location.origin+"/applets/api/itemeditor/getchildform/".concat(e.state.itemInstanceId,"/").concat(e.state.childResponseFormId);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Wn.SET_RESPONSE_FORM,t)})).catch((function(e){console.error("Actions.LOAD_FORM Error: ",e)}))})),r(Jn,Zn.LOAD_SUBMISSIONS,(function(e){var t=window.location.origin+"/applets/api/itemeditor/getchildformsubmissions/".concat(e.state.itemInstanceId,"/").concat(e.state.formId);console.log("Child Submissions Load API: ",t),fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Wn.SET_SUBMISSIONS,t)})).catch((function(e){console.error("Submission loading error:",e)}))})),r(Jn,Zn.SUBMIT_CHILD_FORM,(function(e){if(e.state.form&&zn(e.state.form)){e.commit(Un.SET_SUBMISSION_STATUS,"InProgress");var t=window.location.origin+"/applets/api/itemeditor/appendchildforminstance/".concat(e.state.itemInstanceId),n=new FormData;n.append("datamodel",JSON.stringify(e.state.form)),fetch(t,{body:n,method:"post"}).then((function(e){return e.json()})).then((function(t){wn({flattenedOptionModels:e.state.flattenedOptionModels,flattenedTextModels:e.state.flattenedTextModels}),e.commit(Wn.APPEND_CHILD_INSTANCE,t),e.commit(Un.SET_SUBMISSION_STATUS,"Success")})).catch((function(t){e.commit(Un.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))}})),r(Jn,Zn.SUBMIT_CHILD_RESPONSE_FORM,(function(e,t){if(e.state.childResponseForm&&zn(e.state.childResponseForm)){var n=window.location.origin+"/applets/api/itemeditor/appendchildforminstance/".concat(e.state.itemInstanceId),o=new FormData;o.append("datamodel",JSON.stringify(e.state.childResponseForm)),t&&o.append("parentId",t.toString()),fetch(n,{body:o,method:"post"}).then((function(e){return e.json()})).then((function(t){e.commit(Wn.APPEND_CHILD_RESPONSE_INSTANCE,t),wn({flattenedOptionModels:e.state.flattenedOptionModels,flattenedTextModels:e.state.flattenedTextModels})})).catch((function(t){e.commit(Un.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))}})),r(Jn,Zn.DELETE_CHILD_RESPONSE_INSTANCE,(function(e,t){var n=window.location.origin+"/applets/api/itemeditor/deleteChildForm/".concat(e.state.itemInstanceId,"/").concat(t.id,"?parentId=").concat(t.parentId);fetch(n,{method:"post"}).then((function(e){return e.json()})).then((function(n){n.id&&(console.log("deleteChildForm response received"),e.commit(Wn.DELETE_CHILD_RESPONSE_INSTANCE,t))})).catch((function(t){e.commit(Un.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))})),r(Jn,Zn.DELETE_CHILD_INSTANCE,(function(e,t){var n=window.location.origin+"/applets/api/itemeditor/deleteChildForm/".concat(e.state.itemInstanceId,"/").concat(t.id);fetch(n,{method:"post"}).then((function(e){return e.json()})).then((function(n){n.id&&(console.log("deleteChildForm response received"),e.commit(Wn.DELETE_CHILD_RESPONSE_INSTANCE,t))})).catch((function(t){e.commit(Un.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))})),Jn),no=e.defineComponent({name:"AttachmentField",components:{},props:{model:{type:null,required:!0}},methods:{handleFileUpload:function(e){console.log(e.target.files[0])}},setup:function(){return{}}});no.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock("input",{type:"file",onChange:n[0]||(n[0]=function(e){return t.handleFileUpload(e)})},null,32)};var oo=e.defineComponent({name:"CheckboxField",components:{},props:{model:{type:Object,required:!0}},methods:{getConcatenatedOptionLabels:function(e){var t,n,o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((function(e){return e.value})).join(" / ");return o||""},selectoption:function(e){this.store.commit(Ln.SET_OPTION_VALUE,{id:e.target.value,isSelected:e.target.checked})}},setup:function(t){return{store:y(),selectedoptions:e.computed((function(){return t.model.options.$values.filter((function(e){return!0===e.selected})).map((function(e){return e.id}))}))}}}),io=["id","value"],lo=["for"];oo.render=function(t,n,o,i,l,r){var a=this;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(function(o){return e.openBlock(),e.createElementBlock("div",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:o.id,value:o.id,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.selectedoptions=e}),onChange:n[1]||(n[1]=function(e){return t.selectoption(e)})},null,40,io),[[e.vModelCheckbox,t.selectedoptions]]),e.createElementVNode("label",{for:o.id},e.toDisplayString(a.getConcatenatedOptionLabels(o)),9,lo)])})),256)};var ro=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ao=function(e){return-1!==ro.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},co=function(t,n,o,i,l,r){i.setContent(r()),o.attrs["onUpdate:modelValue"]&&function(t,n,o,i){var l=t.modelEvents?t.modelEvents:null,r=Array.isArray(l)?l.join(" "):l;e.watch(i,(function(e,n){o&&"string"==typeof e&&e!==n&&e!==o.getContent({format:t.outputFormat})&&o.setContent(e)})),o.on(r||"change input undo redo",(function(){n.emit("update:modelValue",o.getContent({format:t.outputFormat}))}))}(n,o,i,l),function(e,t,n){Object.keys(t).filter(ao).forEach((function(o){var i=t[o];"function"==typeof i&&("onInit"===o?i(e,n):n.on(o.substring(2),(function(e){return i(e,n)})))}))}(t,o.attrs,i)},so=0,uo=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++so+String(t)},mo=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},po=function(){return{listeners:[],scriptId:uo("tiny-script"),scriptLoaded:!1}},fo=function(){var e=po();return{load:function(t,n,o){e.scriptLoaded?o():(e.listeners.push(o),t.getElementById(e.scriptId)||function(e,t,n,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=e,i.src=n;var l=function(){i.removeEventListener("load",l),o()};i.addEventListener("load",l),t.head&&t.head.appendChild(i)}(e.scriptId,t,n,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},reinitialize:function(){e=po()}}}(),vo=function(){return"undefined"!=typeof window?window:global},Eo=function(){var e=vo();return e&&e.tinymce?e.tinymce:null},ho={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},So=window&&window.__assign||function(){return So=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},So.apply(this,arguments)},go=e.defineComponent({props:ho,setup:function(t,n){var o=e.toRefs(t),i=o.disabled,l=o.modelValue,r=e.ref(null),a=null,c=t.id||uo("tiny-vue"),s=t.init&&t.init.inline||t.inline,d=!!n.attrs["onUpdate:modelValue"],u=!0,m=t.initialValue?t.initialValue:"",p="",f=function(){var e,o,i,f=(e=u,d?function(){return(null==l?void 0:l.value)?l.value:""}:function(){return e?m:p}),v=So(So({},t.init),{readonly:t.disabled,selector:"#"+c,plugins:(o=t.init&&t.init.plugins,i=t.plugins,mo(o).concat(mo(i))),toolbar:t.toolbar||t.init&&t.init.toolbar,inline:s,setup:function(e){a=e,e.on("init",(function(o){return co(o,t,n,e,l,f)})),t.init&&"function"==typeof t.init.setup&&t.init.setup(e)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(r.value)&&(r.value.style.visibility=""),Eo().init(v),u=!1};return e.watch(i,(function(e){null!==a&&a.setMode(e?"readonly":"design")})),e.onMounted((function(){if(null!==Eo())f();else if(r.value&&r.value.ownerDocument){var e=t.cloudChannel?t.cloudChannel:"5",n=t.apiKey?t.apiKey:"no-api-key",o=null==t.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+e+"/tinymce.min.js":t.tinymceScriptSrc;fo.load(r.value.ownerDocument,o,f)}})),e.onBeforeUnmount((function(){null!==Eo()&&Eo().remove(a)})),s||(e.onActivated((function(){u||f()})),e.onDeactivated((function(){var e;d||(p=a.getContent()),null===(e=Eo())||void 0===e||e.remove(a)}))),function(){return s?(n=e.h,o=c,i=r,l=t.tagName,n(l||"div",{id:o,ref:i})):function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})}(e.h,c,r);var n,o,i,l}}}),yo=go,To=e.defineComponent({name:"Text",props:{model:{type:null,required:!0},isMultiline:{type:Boolean,required:!0},isRichText:{type:Boolean,required:!0},validationStatus:{type:null,required:!0},field:{type:String,required:!1,default:"text"}},components:{Editor:yo},computed:{content:{get:function(){return this.model.value},set:function(e){this.store.commit(Ln.SET_TEXT_VALUE,{id:this.model.id,val:e})}}},setup:function(e){return{store:y(),field:e.field}}}),ko={key:2},_o=["type"];To.render=function(t,n,o,i,l,r){var a=e.resolveComponent("Editor");return t.isRichText?(e.openBlock(),e.createBlock(a,{key:0,apiKey:"0ohehg73era56wydy5kyws6ouf25550ogy2sifi1j41hk65l",modelValue:t.content,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.content=e}),placeholder:"add multiple lines"},null,8,["modelValue"])):t.isMultiline?e.withDirectives((e.openBlock(),e.createElementBlock("textarea",{key:1,"onUpdate:modelValue":n[1]||(n[1]=function(e){return t.content=e})},null,512)),[[e.vModelText,t.content]]):(e.openBlock(),e.createElementBlock("div",ko,["text"===t.field?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,type:"text","onUpdate:modelValue":n[2]||(n[2]=function(e){return t.content=e})},null,512)),[[e.vModelText,t.content]]):"decimal"===t.field?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:"number","onUpdate:modelValue":n[3]||(n[3]=function(e){return t.content=e}),step:"0.01",placeholder:"0.00"},null,512)),[[e.vModelText,t.content]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:2,type:t.field,"onUpdate:modelValue":n[4]||(n[4]=function(e){return t.content=e})},null,8,_o)),[[e.vModelDynamic,t.content]])]))};var Io=e.defineComponent({name:"DateField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}},components:{Text:To},setup:function(t){return{validationStatus:e.computed((function(){return Hn(t.model,null)})),type:t.model.modelType}}});Io.render=function(t,n,o,i,l,r){var a,c,s=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a||null===(c=a.values)||void 0===c?void 0:c.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(s,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"date"},null,8,["model","validation-status"])])})),256)};var Fo=e.defineComponent({name:"DecimalField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1},numDecimalPlaces:{type:Number,required:!1,default:2}},components:{Text:To},setup:function(t){return{validationStatus:e.computed((function(){return Yn(t.model)})),type:t.model.modelType}}});Fo.render=function(t,n,o,i,l,r){var a,c,s=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a||null===(c=a.values)||void 0===c?void 0:c.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(s,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"decimal"},null,8,["model","validation-status"])])})),256)};var Co=e.defineComponent({name:"EmailField",props:{model:{type:null,required:!0},isMultivalue:{type:Boolean,required:!1,default:!1}},components:{Text:To},setup:function(t){return{validationStatus:e.computed((function(){return Hn(t.model,Gn.Email)})),type:t.model.modelType}}});Co.render=function(t,n,o,i,l,r){var a,c,s=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a||null===(c=a.values)||void 0===c?void 0:c.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(s,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"email"},null,8,["model","validation-status"])])})),256)};var Bo=e.defineComponent({name:"InfoField",props:{model:{type:null,required:!0}}}),Do=["innerHTML"];Bo.render=function(t,n,o,i,l,r){var a,c;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a||null===(c=a.content)||void 0===c?void 0:c.values,(function(t){return e.openBlock(),e.createElementBlock("div",{key:t.id},[e.createElementVNode("div",{innerHTML:t.value},null,8,Do)])})),128)};var No=e.defineComponent({name:"IntegerField",props:{model:{type:null,required:!0},isMultivalued:{type:Boolean,required:!1,default:!1}},components:{Text:To},setup:function(t){return{validationStatus:e.computed((function(){return Yn(t.model)})),type:t.model.modelType}}});No.render=function(t,n,o,i,l,r){var a,c,s=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a||null===(c=a.values)||void 0===c?void 0:c.$values,(function(n){return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(s,{model:n,"is-multiline":!1,"is-rich-text":!1,"validation-status":t.validationStatus,field:"number"},null,8,["model","validation-status"])])})),256)};var bo=e.defineComponent({name:"RadioField",props:{model:{type:Object,required:!0}},methods:{getSelectedFieldLabels:function(e){return gt.getSelectedFieldLabels(e.options.$values)},getConcatenatedOptionLabels:function(e){var t,n,o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((function(e){return e.value})).join(" / ");return o||""}},computed:{selected:{get:function(){var e;return null===(e=this.model.options.$values.find((function(e){return e.selected})))||void 0===e?void 0:e.id},set:function(e){var t=this;this.model.options.$values.forEach((function(n){t.store.commit(Ln.SET_OPTION_VALUE,{id:n.id,isSelected:n.id===e})}))}}},setup:function(t){var n=e.computed((function(){return Kn(t.model)})),o="radio_"+t.model.id;return{store:y(),validationStatus:n,name:o}}}),Oo=["name","id","value"],Ao=e.createTextVNode(),Mo=["for"];bo.render=function(t,n,o,i,l,r){var a=this;return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(function(o){return e.openBlock(),e.createElementBlock("div",null,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:t.name,id:o.id,value:o.id,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.selected=e})},null,8,Oo),[[e.vModelRadio,t.selected]]),Ao,e.createElementVNode("label",{for:o.id},e.toDisplayString(a.getConcatenatedOptionLabels(o)),9,Mo)])})),256)};var Lo=e.defineComponent({name:"SelectField",components:{},props:{model:{type:Object,required:!0}},methods:{getConcatenatedOptionLabels:function(e){var t,n,o=null===(t=e.optionText)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.$values.map((function(e){return e.value})).join(" / ");return o||""}},computed:{selected:{get:function(){var e;return null===(e=this.model.options.$values.find((function(e){return e.selected})))||void 0===e?void 0:e.id},set:function(e){var t=this;this.model.options.$values.forEach((function(n){t.store.commit(Ln.SET_OPTION_VALUE,{id:n.id,isSelected:n.id===e})}))}}},setup:function(t){var n=e.computed((function(){return Kn(t.model)}));return{store:y(),validationStatus:n}}}),Ro=e.createElementVNode("option",{disabled:"",value:""},"Please select one",-1),Vo=["id","value"];Lo.render=function(t,n,o,i,l,r){var a=this;return e.openBlock(),e.createElementBlock("div",null,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.selected=e}),class:"form-control col-md-6"},[Ro,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.model.options.$values,(function(t){return e.openBlock(),e.createElementBlock("option",{id:t.id,value:t.id},e.toDisplayString(a.getConcatenatedOptionLabels(t)),9,Vo)})),256))],512),[[e.vModelSelect,t.selected]])])};var xo=e.defineComponent({name:"TextCollection",props:{model:{type:null,required:!0},isMultiline:{type:Boolean,required:!0},isRichText:{type:Boolean,required:!0},validationStatus:{type:null,required:!0}},components:{Text:To}}),wo={key:0};xo.render=function(t,n,o,i,l,r){var a,c,s=e.resolveComponent("Text");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model)||void 0===a||null===(c=a.values)||void 0===c?void 0:c.$values,(function(n){var o,i,l;return e.openBlock(),e.createElementBlock("div",null,[(null===(o=t.model)||void 0===o||null===(i=o.values)||void 0===i||null===(l=i.$values)||void 0===l?void 0:l.length)>1?(e.openBlock(),e.createElementBlock("span",wo,e.toDisplayString(n.language)+": ",1)):e.createCommentVNode("",!0),e.createVNode(s,{model:n,"is-multiline":t.isMultiline,"is-rich-text":t.isRichText,"validation-status":t.validationStatus},null,8,["model","is-multiline","is-rich-text","validation-status"])])})),256)};var Po=e.defineComponent({name:"MultilingualTextField",props:{model:{type:null,required:!0},isMultiline:{type:Boolean,required:!0}},components:{TextCollection:xo},setup:function(t){var n=t.model.modelType,o=e.computed((function(){return qn(t.model)}));return{type:n,isRichText:e.computed((function(){return!(null==(e=t.model)||!e.richText)&&e.richText;var e})),validationStatus:o,isRequiredField:e.computed((function(){return!(null==(e=t.model)||!e.required)&&e.required;var e}))}}});Po.render=function(t,n,o,i,l,r){var a,c=e.resolveComponent("TextCollection");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model.values)||void 0===a?void 0:a.$values,(function(n){return e.openBlock(),e.createBlock(c,{model:n,"is-multiline":t.isMultiline,"is-rich-text":t.isRichText,"validation-status":t.validationStatus},null,8,["model","is-multiline","is-rich-text","validation-status"])})),256)};var Uo=e.defineComponent({name:"AudioRecorder",components:{},props:{model:{type:Object,required:!0}},methods:{}});Uo.render=function(t,n,o,i,l,r){return e.openBlock(),e.createElementBlock("div",null,"My Audio Recorder")};var $o=e.defineComponent({name:"Field",props:{model:{type:null,required:!0}},components:{AttachmentField:no,CheckboxField:oo,DateField:Io,DecimalField:Fo,EmailField:Co,InfoField:Bo,IntegerField:No,RadioField:bo,SelectField:Lo,MultilingualTextField:Po,AudioRecorderField:Uo},setup:function(e){var t=Vn.getFieldType(e.model),n=Vn.cssClass(e.model);return{FieldTypes:vt,ValidationStatus:Et,fieldType:t,cssClass:n}}}),jo={key:0},Go={class:"col-md-3 field-name"},qo={key:0,style:{color:"red"}},Ho={class:"col-md-9 field-value"},Yo={key:0,style:{color:"red"}},Ko={key:1,style:{color:"red"}},zo={key:13},Xo={key:14};$o.render=function(t,n,o,i,l,r){var a,c,s=e.resolveComponent("InfoField"),d=e.resolveComponent("AttachmentField"),u=e.resolveComponent("CheckboxField"),m=e.resolveComponent("DateField"),p=e.resolveComponent("DecimalField"),f=e.resolveComponent("EmailField"),v=e.resolveComponent("IntegerField"),E=e.resolveComponent("RadioField"),h=e.resolveComponent("SelectField"),S=e.resolveComponent("MultilingualTextField"),g=e.resolveComponent("AudioRecorderField");return t.fieldType===t.FieldTypes.FieldContainerReference?(e.openBlock(),e.createElementBlock("div",jo," TODO: Implement editor template for FieldContainerReference ")):t.fieldType===t.FieldTypes.InfoSection?(e.openBlock(),e.createBlock(s,{key:1,model:t.model,class:e.normalizeClass(t.cssClass)},null,8,["model","class"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(t.cssClass+" row")},[e.createElementVNode("div",Go,[e.createTextVNode(e.toDisplayString(t.model.name.concatenatedContent)+" ",1),this.model.required?(e.openBlock(),e.createElementBlock("span",qo,"*")):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ho,[(null===(a=t.model)||void 0===a?void 0:a.validationStatus)===t.ValidationStatus.VALUE_REQUIRED?(e.openBlock(),e.createElementBlock("div",Yo,"This field requires a value.")):e.createCommentVNode("",!0),(null===(c=t.model)||void 0===c?void 0:c.validationStatus)===t.ValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",Ko,"This field has an invalid value.")):e.createCommentVNode("",!0),t.fieldType===t.FieldTypes.AttachmentField?(e.openBlock(),e.createBlock(d,{key:2,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.CheckboxField?(e.openBlock(),e.createBlock(u,{key:3,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.DateField?(e.openBlock(),e.createBlock(m,{key:4,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.DecimalField?(e.openBlock(),e.createBlock(p,{key:5,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.EmailField?(e.openBlock(),e.createBlock(f,{key:6,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.IntegerField?(e.openBlock(),e.createBlock(v,{key:7,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.RadioField?(e.openBlock(),e.createBlock(E,{key:8,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.SelectField?(e.openBlock(),e.createBlock(h,{key:9,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.TextArea?(e.openBlock(),e.createBlock(S,{key:10,model:t.model,"is-multiline":!0},null,8,["model"])):t.fieldType===t.FieldTypes.TextField?(e.openBlock(),e.createBlock(S,{key:11,model:t.model,"is-multiline":!1},null,8,["model"])):t.fieldType===t.FieldTypes.AudioRecorderField?(e.openBlock(),e.createBlock(g,{key:12,model:t.model},null,8,["model"])):t.fieldType===t.FieldTypes.CompositeField?(e.openBlock(),e.createElementBlock("div",zo," TODO: Implement editor template for the CompositeField")):t.fieldType===t.FieldTypes.TableField?(e.openBlock(),e.createElementBlock("div",Xo," TODO: Implement editor template for the TableField")):e.createCommentVNode("",!0)])],2))};var Wo=e.defineComponent({name:"FieldContainer",props:{model:null},components:{Field:$o}});Wo.render=function(t,n,o,i,l,r){var a,c=e.resolveComponent("Field");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null===(a=t.model.fields)||void 0===a?void 0:a.$values,(function(t){return e.openBlock(),e.createBlock(c,{model:t},null,8,["model"])})),256)};var Qo=e.defineComponent({name:"ChildFormSubmission",components:{ChildForm:Wo,ChildView:qt},props:s,setup:function(t){var n=t.queryParameters,o=t.dataAttributes,i=Rn.Guid.parse(n.iid),l=Rn.Guid.parse(o["template-id"]),r=Rn.Guid.parse(o["child-form-id"]),a=o["response-form-id"],c=o["is-admin"],s=(null==a?void 0:a.length)>0?Rn.Guid.parse(a):void 0,d=y();d.commit(Un.CLEAR_FLATTENED_FIELD_MODELS),d.commit(Un.SET_ITEM_TEMPLATE_ID,l),d.commit(Un.SET_FORM_ID,r),d.commit(Wn.SET_PARENT_ITEM_ID,i),d.dispatch(Zn.LOAD_FORM),d.dispatch(Zn.LOAD_SUBMISSIONS),s&&(d.commit(Wn.SET_RESPONSE_FORM_ID,s),d.dispatch(Zn.LOAD_RESPONSE_FORM));var u=e.ref([]),m=e.computed((function(){var e;return null===(e=d.state.formInstances)||void 0===e?void 0:e.$values})),p=function(e){return u.value[e],u.value[e]=!u.value[e],u.value.forEach((function(t,n){t&&n!==e&&(u.value[n]=!1)})),!1};return{childForm:e.computed((function(){return d.state.form})),childSubmissions:e.computed((function(){var e;return null===(e=d.state.formInstances)||void 0===e?void 0:e.$values})),store:d,submissionStatus:e.computed((function(){return d.state.submissionStatus})),eSubmissionStatus:Mn,eValidationStatus:Et,childResponseFormId:s,childResponseForm:e.computed((function(){return d.state.childResponseForm})),responseDisplayFlags:u,toggleDisplayResponse:p,submitChildResponse:function(e){var t;d.dispatch(Zn.SUBMIT_CHILD_RESPONSE_FORM,null===(t=m.value[e])||void 0===t?void 0:t.id),p(e)},isAdmin:c}},storeConfig:{state:jn,actions:to,mutations:eo,getters:{}},methods:{submitChildForm:function(){this.store.dispatch(Zn.SUBMIT_CHILD_FORM)},removeResponseForm:function(e){confirm("Do you really want to delete this item?")&&this.store.dispatch(Zn.DELETE_CHILD_RESPONSE_INSTANCE,e)},removeChildForm:function(e){confirm("Do you really want to delete this item?")&&this.store.dispatch(Zn.DELETE_CHILD_INSTANCE,e)}}}),Jo=function(t){return e.pushScopeId("data-v-74fdfa3c"),t=t(),e.popScopeId(),t},Zo={key:0,class:"submissionForm"},ei={key:0,class:"alert alert-danger"},ti={key:1},ni={key:0,class:"alert alert-info"},oi={key:1,class:"alert alert-info"},ii={key:2,class:"alert alert-danger"},li={key:1,class:"mt-2 submissionInstanceList"},ri=Jo((function(){return e.createElementVNode("h3",null,"Responses",-1)})),ai={class:"submissionInstance"},ci={key:0,class:"text-right"},si=["onClick"],di=[Jo((function(){return e.createElementVNode("span",{class:"fas fa-reply replyBtn"},null,-1)}))],ui=["onClick"],mi={class:"ml-3 submissionInstanceList"},pi={class:"submissionInstance"},fi={key:0,class:"text-right"},vi=["onClick"],Ei={key:0,class:"mb-2"},hi={key:0,class:"childResponseForm"},Si={key:0,class:"alert alert-danger"},gi=["onClick"],yi=Jo((function(){return e.createElementVNode("hr",null,null,-1)}));var Ti,ki;it("\n.fa-remove[data-v-74fdfa3c] {\r\n\t\tcolor: red;\r\n\t\tmargin-left: 30px;\n}\r\n"),Qo.render=function(t,n,o,i,l,r){var a,c=e.resolveComponent("ChildForm"),s=e.resolveComponent("ChildView");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.childForm&&Object.keys(t.childForm).length>0?(e.openBlock(),e.createElementBlock("div",Zo,[e.createVNode(c,{model:t.childForm},null,8,["model"]),(null===(a=t.childForm)||void 0===a?void 0:a.validationStatus)===t.eValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",ei,"Form validation failed.")):(e.openBlock(),e.createElementBlock("div",ti,[t.submissionStatus===t.eSubmissionStatus.InProgress?(e.openBlock(),e.createElementBlock("div",ni,"Submitting...")):e.createCommentVNode("",!0),t.submissionStatus===t.eSubmissionStatus.Success?(e.openBlock(),e.createElementBlock("div",oi,"Submission successful")):e.createCommentVNode("",!0),t.submissionStatus===t.eSubmissionStatus.Fail?(e.openBlock(),e.createElementBlock("div",ii,"Submission failed")):e.createCommentVNode("",!0)])),e.createElementVNode("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=function(e){return t.submitChildForm()})},"Submit")])):e.createCommentVNode("",!0),t.childSubmissions&&t.childSubmissions.length>0?(e.openBlock(),e.createElementBlock("div",li,[ri,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.childSubmissions,(function(n,o){var i;return e.openBlock(),e.createElementBlock("div",ai,[e.createVNode(s,{model:n,"hide-field-names":!0},null,8,["model"]),t.responseDisplayFlags[o]?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ci,[e.createElementVNode("a",{href:"#",class:"text-decoration-none",onClick:function(e){return t.toggleDisplayResponse(o)},onclick:"return false;"},di,8,si),t.isAdmin?(e.openBlock(),e.createElementBlock("span",{key:0,class:"fas fa-remove",onClick:function(e){t.removeChildForm(n)}},null,8,ui)):e.createCommentVNode("",!0)])),e.createElementVNode("div",mi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.childFieldContainers.$values,(function(n,o){return e.openBlock(),e.createElementBlock("div",pi,[e.createVNode(s,{model:n,"hide-field-names":!0},null,8,["model"]),t.isAdmin?(e.openBlock(),e.createElementBlock("div",fi,[e.createElementVNode("span",{class:"fas fa-remove deleteBtn",onClick:function(e){t.removeResponseForm(n)}},null,8,vi)])):e.createCommentVNode("",!0)])})),256)),t.childResponseFormId?(e.openBlock(),e.createElementBlock("div",Ei,[t.responseDisplayFlags[o]?(e.openBlock(),e.createElementBlock("div",hi,[e.createVNode(c,{model:t.childResponseForm},null,8,["model"]),(null===(i=t.childResponseForm)||void 0===i?void 0:i.validationStatus)===t.eValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",Si,"Response validation failed.")):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-primary submitBtn",onClick:function(e){return t.submitChildResponse(o)}},"Submit",8,gi)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),yi])})),256))])):e.createCommentVNode("",!0)],64)},Qo.__scopeId="data-v-74fdfa3c",function(e){e.LOAD_FORM="LOAD_FORM",e.SUBMIT_FORM="SUBMIT_FORM"}(ki||(ki={}));var _i=(r(Ti={},ki.LOAD_FORM,(function(e){var t=window.location.origin+"/applets/api/itemtemplates/".concat(e.state.itemTemplateId,"/data-form/").concat(e.state.formId);fetch(t).then((function(e){return e.json()})).then((function(t){e.commit(Un.SET_FORM,t)})).catch((function(e){console.error("Actions.LOAD_FORM Error: ",e)}))})),r(Ti,ki.SUBMIT_FORM,(function(e){if(e.state.form){e.commit(Un.SET_SUBMISSION_STATUS,"InProgress");var t=window.location.origin+"/applets/api/itemeditor/?itemTemplateId=".concat(e.state.itemTemplateId,"&groupId=").concat(e.state.groupId,"&collectionId=").concat(e.state.collectionId),n=new FormData;n.append("datamodel",JSON.stringify(e.state.form)),fetch(t,{body:n,method:"post"}).then((function(e){return e.json()})).then((function(e){console.log(JSON.stringify(e))})).catch((function(t){e.commit(Un.SET_SUBMISSION_STATUS,"Fail"),console.log(t)}))}})),Ti),Ii=e.defineComponent({name:"FormSubmission",components:{SubmissionForm:Wo},props:s,setup:function(t){console.log("props: ",JSON.stringify(t));var n=t.dataAttributes,o=Rn.Guid.parse(n["template-id"]),i=Rn.Guid.parse(n["form-id"]),l=Rn.Guid.parse(n["collection-id"]),r=Rn.Guid.parse(n["group-id"]),a=y();return a.commit(Un.CLEAR_FLATTENED_FIELD_MODELS),a.commit(Un.SET_ITEM_TEMPLATE_ID,o),a.commit(Un.SET_FORM_ID,i),a.commit(Un.SET_COLLECTION_ID,l),a.commit(Un.SET_GROUP_ID,r),a.dispatch(ki.LOAD_FORM),{store:a,submissionForm:e.computed((function(){return a.state.form})),submissionStatus:e.computed((function(){return a.state.submissionStatus})),eSubmissionStatus:Mn,eValidationStatus:Et}},storeConfig:{state:$n,actions:_i,mutations:Qn,getters:{}},methods:{submitForm:function(){this.store.dispatch(ki.SUBMIT_FORM)}}}),Fi={key:0},Ci={key:0,class:"alert alert-danger"},Bi={key:1},Di={key:0,class:"alert alert-info"},Ni={key:1,class:"alert alert-info"},bi={key:2,class:"alert alert-danger"};Ii.render=function(t,n,o,i,l,r){var a,c=e.resolveComponent("SubmissionForm");return t.submissionForm&&Object.keys(t.submissionForm).length>0?(e.openBlock(),e.createElementBlock("div",Fi,[e.createVNode(c,{model:t.submissionForm},null,8,["model"]),(null===(a=t.submissionForm)||void 0===a?void 0:a.validationStatus)===t.eValidationStatus.INVALID?(e.openBlock(),e.createElementBlock("div",Ci,"Form validation failed.")):(e.openBlock(),e.createElementBlock("div",Bi,[t.submissionStatus===t.eSubmissionStatus.InProgress?(e.openBlock(),e.createElementBlock("div",Di,"Submitting...")):e.createCommentVNode("",!0),t.submissionStatus===t.eSubmissionStatus.Success?(e.openBlock(),e.createElementBlock("div",Ni,"Submission successful")):e.createCommentVNode("",!0),t.submissionStatus===t.eSubmissionStatus.Fail?(e.openBlock(),e.createElementBlock("div",bi,"Submission failed")):e.createCommentVNode("",!0)])),e.createElementVNode("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=function(e){return t.submitForm()})},"Submit")])):e.createCommentVNode("",!0)};var Oi=Object.freeze({__proto__:null,Carousel:d,KeywordSearch:ke,ItemTemplateEditor:lt,ItemEditor:at,ItemViewer:Wt,ProcessManager:Sn,Grid:bn,ChildFormSubmission:Qo,FormSubmission:Ii}),Ai=function(e){Object.entries(Oi).forEach((function(t){var n=a(t,2),o=n[0],i=n[1];e.component(o,i)}))},Mi=Object.freeze({__proto__:null,default:Ai,Carousel:d,KeywordSearch:ke,ItemTemplateEditor:lt,ItemEditor:at,ItemViewer:Wt,ProcessManager:Sn,Grid:bn,ChildFormSubmission:Qo,FormSubmission:Ii});return Object.entries(Mi).forEach((function(e){var t=a(e,2),n=t[0],o=t[1];"default"!==n&&(Ai[n]=o)})),Ai}(Vue);